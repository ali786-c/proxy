import{I as V,j as e,x as i,y as ve,z as be,A as Ne,E as we,G as Ce}from"./ui-DhchgSRK.js";import{r as n,L as Z,aw as ee,t as se,am as oe,D as I,aA as te}from"./vendor-Dios4bpT.js";import{S as Se}from"./SEOHead-BP3rV7mN.js";import{E as Pe}from"./ErrorBanner-DVlc-IOG.js";import{d as Te,b as $e,u as ke,t as D,e as M,f as O,g as B,h as U,i as k,I as ae,B as A,c as re}from"./index-DuS-nlxc.js";import{L as f}from"./label-CHENNY20.js";import{C as _,a as F,b as q,c as E}from"./card-ClKFnvWz.js";import{T as Ae}from"./textarea-4_MZ9aK-.js";import{T as De,a as _e,b as z,c as G}from"./tabs-qgUyMCni.js";import{T as Ee,a as Le,b as ne,c as v,d as Re,e as b}from"./table-BODbY_8L.js";import{d as Ve,e as Ie,f as Me}from"./use-backend-B1XL4St6.js";import{M as Oe}from"./ManualCryptoDialog-DN_xPLLm.js";import"./useMutation-CPKpAlH6.js";const Be={rp:"residential",mp:"mobile",dc:"datacenter",dc_ipv6:"datacenter_ipv6",dc_unmetered:"datacenter_unmetered"},ie={rp:"residential",mp:"mobile",dc:"datacenter",dc_ipv6:"datacenter-ipv6",dc_unmetered:"datacenter-unmetered"};function Ue(t){return`curl -x http://${t.username}:${t.password}@${t.host}:${t.port} https://httpbin.org/ip`}function ze(t){return`import requests

proxies = {
    "http": "http://${t.username}:${t.password}@${t.host}:${t.port}",
    "https": "http://${t.username}:${t.password}@${t.host}:${t.port}",
}
response = requests.get("https://httpbin.org/ip", proxies=proxies)
print(response.json())`}function Ge(t){return`const HttpsProxyAgent = require('https-proxy-agent');

const agent = new HttpsProxyAgent(
  'http://${t.username}:${t.password}@${t.host}:${t.port}'
);

fetch('https://httpbin.org/ip', { agent })
  .then(res => res.json())
  .then(console.log);`}function as(){var X;const{data:t}=Ve(),{data:d}=Ie(),N=Me(),[p,le]=n.useState(""),[L,ce]=n.useState("residential"),[x,de]=n.useState(""),[xe,me]=n.useState(""),[m,ue]=n.useState("rotating"),[h,pe]=n.useState(1),[c,w]=n.useState(!1),[Q,j]=n.useState(null),[o,he]=n.useState([]),[l,Y]=n.useState(null),[je,C]=n.useState(!1),[ye,J]=n.useState(!1),{gateways:u}=Te(),{format:K}=$e(),{t:S}=ke(),ge=n.useCallback(async()=>{var s,a;if(j(null),Y(null),!p){j("Please select a product.");return}w(!0);try{const r=await N.mutateAsync({product_id:Number(p),quantity:h,country:x||void 0,session_type:m});he(r.proxies||[]),D({title:"Proxies Generated",description:`${((s=r.proxies)==null?void 0:s.length)||0} proxies ready.`})}catch(r){r.status===402&&((a=r.body)!=null&&a.can_direct_purchase)?(Y({productId:r.body.product_id,amount:r.body.total_cost}),j(`Insufficient balance. You need ${K(r.body.total_cost)} to generate these proxies.`)):j(r.message||"Failed to generate proxies.")}finally{w(!1)}},[p,h,x,m,N]),W=async s=>{if(l){w(!0);try{if(s==="cryptomus"){const{url:a}=await re.createCryptomusProductCheckout(l.productId.toString(),h,x||void 0,m);window.location.href=a}else{const{url:a}=await re.createProductCheckout(l.productId.toString(),h,x||void 0,m);window.location.href=a}}catch(a){D({title:"Checkout Error",description:a.message,variant:"destructive"})}finally{w(!1),C(!1)}}},fe=n.useCallback(()=>{const s=o.map(V).join(`
`);navigator.clipboard.writeText(s),D({title:"Copied",description:"All proxies copied to clipboard."})},[o]),R=n.useCallback(s=>{let a,r;s==="json"?(a=JSON.stringify(o,null,2),r="application/json"):s==="csv"?(a=`host,port,username,password
`+o.map($=>`${$.host},${$.port},${$.username},${$.password}`).join(`
`),r="text/csv"):(a=o.map(V).join(`
`),r="text/plain");const T=new Blob([a],{type:r}),y=URL.createObjectURL(T),g=document.createElement("a");g.href=y,g.download=`proxies.${s}`,g.click(),URL.revokeObjectURL(y)},[o]),P=o[0];return e.jsxs(e.Fragment,{children:[e.jsx(Se,{title:"Generate Proxies",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Generate Proxies"}),e.jsx(i,{variant:"outline",asChild:!0,children:e.jsx(Z,{to:"/app/proxies/core-residential",children:"View Active Proxies"})})]}),e.jsxs(_,{children:[e.jsx(F,{children:e.jsx(q,{className:"text-lg",children:"Generate Proxies"})}),e.jsxs(E,{className:"space-y-4",children:[Q&&e.jsx(Pe,{message:Q,onDismiss:()=>j(null)}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{children:"Product"}),e.jsxs(M,{value:p,onValueChange:s=>{le(s);const a=(t??[]).find(r=>r.id.toString()===s);a&&ce(a.type)},children:[e.jsx(O,{children:e.jsx(B,{placeholder:"Select Product..."})}),e.jsx(U,{children:(t??[]).map(s=>e.jsx(k,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{children:"Country"}),e.jsxs(M,{value:x,onValueChange:de,children:[e.jsx(O,{children:e.jsx(B,{placeholder:"Select..."})}),e.jsx(U,{children:(()=>{var r,T;const s=Be[L]||"residential",a=((T=(r=d==null?void 0:d.data)==null?void 0:r[s])==null?void 0:T.countries)||{};return Object.entries(a).map(([y,g])=>e.jsx(k,{value:y,children:g},y))})()})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{children:"City (optional)"}),e.jsx(ae,{value:xe,onChange:s=>me(s.target.value),placeholder:"Any"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{children:"Session Type"}),e.jsxs(M,{value:m,onValueChange:ue,children:[e.jsx(O,{children:e.jsx(B,{})}),e.jsxs(U,{children:[e.jsx(k,{value:"rotating",children:"Rotating"}),e.jsx(k,{value:"sticky",children:"Sticky"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{children:"Quantity"}),e.jsx(ae,{type:"number",min:1,max:1e3,value:h,onChange:s=>pe(Number(s.target.value))})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(i,{onClick:ge,disabled:c,children:[c&&!l&&e.jsx(ee,{className:"mr-2 h-4 w-4 animate-spin"}),S(c&&!l?"common.loading":"proxies.generate")]}),l&&e.jsxs(i,{variant:"secondary",onClick:()=>C(!0),disabled:c,className:"gap-2",children:[c?e.jsx(ee,{className:"h-4 w-4 animate-spin"}):e.jsx(se,{className:"h-4 w-4"}),S("common.pay")," ",K(l.amount)," & ",S("proxies.generate")]})]})]})]}),o.length>0&&e.jsxs(De,{defaultValue:"output",children:[e.jsx("div",{className:"flex items-center justify-between flex-wrap gap-2",children:e.jsxs(_e,{children:[e.jsx(z,{value:"output",children:"Output"}),e.jsx(z,{value:"table",children:"Table View"}),e.jsx(z,{value:"snippets",children:"Config Snippets"})]})}),e.jsx(G,{value:"output",className:"mt-4",children:e.jsxs(_,{children:[e.jsx(F,{className:"flex flex-row items-center justify-between pb-2",children:e.jsxs(q,{className:"text-sm",children:[e.jsx(A,{variant:"secondary",className:"mr-2",children:o.length}),"proxies generated • ",p," • ",x," • ",m]})}),e.jsxs(E,{className:"space-y-3",children:[e.jsx(Ae,{readOnly:!0,className:"font-mono text-xs leading-relaxed min-h-[200px] max-h-[400px] resize-y bg-muted",value:o.map(V).join(`
`),onFocus:s=>s.target.select()}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(i,{variant:"default",size:"sm",onClick:fe,children:[e.jsx(oe,{className:"mr-1.5 h-3.5 w-3.5"})," Copy All"]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>R("txt"),children:[e.jsx(I,{className:"mr-1.5 h-3.5 w-3.5"})," Download .txt"]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>R("csv"),children:[e.jsx(I,{className:"mr-1.5 h-3.5 w-3.5"})," Download .csv"]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>R("json"),children:[e.jsx(I,{className:"mr-1.5 h-3.5 w-3.5"})," Download .json"]}),e.jsx(i,{variant:"secondary",size:"sm",asChild:!0,className:"ml-auto",children:e.jsxs(Z,{to:`/app/proxies/${ie[L]||"residential"}`,children:["View in ",((X=ie[L])==null?void 0:X.split("-").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "))||"Residential"," Tab"]})})]})]})]})}),e.jsx(G,{value:"table",className:"mt-4",children:e.jsx(_,{children:e.jsx(E,{className:"p-0",children:e.jsx("div",{className:"max-h-96 overflow-auto",children:e.jsxs(Ee,{children:[e.jsx(Le,{children:e.jsxs(ne,{children:[e.jsx(v,{className:"w-12",children:"#"}),e.jsx(v,{children:"Host"}),e.jsx(v,{children:"Port"}),e.jsx(v,{children:"Username"}),e.jsx(v,{children:"Password"})]})}),e.jsx(Re,{children:o.map((s,a)=>e.jsxs(ne,{children:[e.jsx(b,{className:"text-muted-foreground",children:a+1}),e.jsx(b,{className:"font-mono text-xs",children:s.host}),e.jsx(b,{className:"font-mono text-xs",children:s.port}),e.jsx(b,{className:"font-mono text-xs",children:s.username}),e.jsx(b,{className:"font-mono text-xs",children:s.password})]},a))})]})})})})}),e.jsx(G,{value:"snippets",className:"mt-4 space-y-4",children:P&&e.jsxs(e.Fragment,{children:[e.jsx(H,{title:"cURL",code:Ue(P)}),e.jsx(H,{title:"Python (requests)",code:ze(P)}),e.jsx(H,{title:"Node.js (fetch)",code:Ge(P)})]})})]})]}),e.jsx(ve,{open:je,onOpenChange:C,children:e.jsxs(be,{className:"sm:max-w-md",children:[e.jsxs(Ne,{children:[e.jsx(we,{children:"Select Payment Method"}),e.jsx(Ce,{children:"Choose how you want to pay for these proxies."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[u.stripe&&e.jsxs(i,{variant:"outline",className:"flex items-center justify-between p-6 h-auto",onClick:()=>W("stripe"),disabled:c,children:[e.jsxs("div",{className:"flex items-center gap-3 text-left",children:[e.jsx(se,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Credit/Debit Card"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Secure via Stripe"})]})]}),e.jsx(A,{variant:"secondary",className:"bg-primary/10 text-primary border-primary/20",children:"+VAT"})]}),u.cryptomus&&e.jsxs(i,{variant:"outline",className:"flex items-center justify-between p-6 h-auto",onClick:()=>W("cryptomus"),disabled:c,children:[e.jsxs("div",{className:"flex items-center gap-3 text-left",children:[e.jsx(te,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Cryptocurrency"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Automated via Cryptomus"})]})]}),e.jsx(A,{variant:"secondary",className:"bg-green-500/10 text-green-600 border-green-200",children:"VAT-FREE"})]}),u.crypto&&e.jsxs(i,{variant:"outline",className:"flex items-center justify-between p-6 h-auto",onClick:()=>{C(!1),J(!0)},disabled:c,children:[e.jsxs("div",{className:"flex items-center gap-3 text-left",children:[e.jsx(te,{className:"h-6 w-6 text-orange-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Binance Pay / Manual"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Send ID & Upload Proof"})]})]}),e.jsx(A,{variant:"secondary",className:"bg-orange-500/10 text-orange-600 border-orange-200",children:"VAT-FREE"})]}),!u.stripe&&!u.cryptomus&&!u.crypto&&e.jsx("p",{className:"text-center text-sm text-muted-foreground italic",children:"No payment gateways are currently configured."})]})]})}),e.jsx(Oe,{open:ye,onOpenChange:J,defaultAmount:l==null?void 0:l.amount.toString(),onSuccess:()=>{}})]})}function H({title:t,code:d}){const N=()=>{navigator.clipboard.writeText(d),D({title:"Copied",description:`${t} snippet copied.`})};return e.jsxs(_,{children:[e.jsxs(F,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(q,{className:"text-sm",children:t}),e.jsxs(i,{variant:"ghost",size:"sm",onClick:N,children:[e.jsx(oe,{className:"mr-1 h-3.5 w-3.5"})," Copy"]})]}),e.jsx(E,{children:e.jsx("pre",{className:"overflow-x-auto rounded-md bg-muted p-3 text-xs leading-relaxed",children:d})})]})}export{as as default};
