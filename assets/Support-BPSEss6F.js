import{r as d,j as e,B as S,q as T,v as y,w as N,x as b,y as r,I as L,t as C}from"./index-BNuaxT4T.js";import{S as D}from"./SEOHead-BL8gBqiH.js";import{C as w,a as A,b as P,c as _}from"./card-DxanYWse.js";import{B as m}from"./badge-CCgDpgoq.js";import{T as E}from"./textarea-zw8R5ODT.js";import{T as F,a as H,b as h,c as i,d as U,e as l}from"./table-2junBFqZ.js";import{S as $}from"./search-EMWWpIKO.js";const q=[{id:"TK-1001",user:"alice@acme.co",subject:"Cannot connect to residential pool",category:"technical",status:"in_progress",priority:"high",created_at:"2026-02-18T10:00:00Z",updated_at:"2026-02-19T14:30:00Z",messages:[{sender:"client",text:"Getting connection refused on port 10000.",time:"2026-02-18T10:00:00Z"},{sender:"support",text:"We're investigating. Can you share your IP allowlist?",time:"2026-02-18T11:30:00Z"}]},{id:"TK-1002",user:"bob@corp.io",subject:"Billing discrepancy on last invoice",category:"billing",status:"open",priority:"medium",created_at:"2026-02-19T08:00:00Z",updated_at:"2026-02-19T08:00:00Z",messages:[{sender:"client",text:"Charged for 58GB but usage shows 42GB.",time:"2026-02-19T08:00:00Z"}]},{id:"TK-1003",user:"charlie@mail.com",subject:"Account suspended without notice",category:"other",status:"open",priority:"high",created_at:"2026-02-20T06:00:00Z",updated_at:"2026-02-20T06:00:00Z",messages:[{sender:"client",text:"My account was suspended. I didn't violate any TOS.",time:"2026-02-20T06:00:00Z"}]},{id:"TK-1004",user:"eve@startup.co",subject:"Request SOCKS5 on mobile",category:"feature",status:"resolved",priority:"low",created_at:"2026-02-14T12:00:00Z",updated_at:"2026-02-15T16:00:00Z",messages:[{sender:"client",text:"Would love SOCKS5 on mobile proxies.",time:"2026-02-14T12:00:00Z"},{sender:"support",text:"Added to our roadmap. Thanks for the suggestion!",time:"2026-02-15T16:00:00Z"}]}],G={open:"secondary",in_progress:"default",resolved:"outline",closed:"outline"},O={low:"secondary",medium:"default",high:"destructive"};function X(){const[n,j]=d.useState(q),[x,Z]=d.useState(""),[p,R]=d.useState("all"),[t,o]=d.useState(null),[u,g]=d.useState(""),f=n.filter(s=>{if(p!=="all"&&s.status!==p)return!1;if(x){const a=x.toLowerCase();return s.id.toLowerCase().includes(a)||s.user.toLowerCase().includes(a)||s.subject.toLowerCase().includes(a)}return!0}),I=()=>{if(!u.trim()||!t)return;const s=n.map(a=>a.id===t.id?{...a,status:"in_progress",messages:[...a.messages,{sender:"support",text:u,time:new Date().toISOString()}],updated_at:new Date().toISOString()}:a);j(s),o(s.find(a=>a.id===t.id)??null),g(""),C({title:"Reply Sent",description:`Response sent to ${t.user}`})},k=(s,a)=>{const v=n.map(c=>c.id===s?{...c,status:a,updated_at:new Date().toISOString()}:c);j(v),o(v.find(c=>c.id===s)??null),C({title:"Status Updated",description:`Ticket ${s} → ${a}`})},B=n.filter(s=>s.status==="open").length,K=n.filter(s=>s.status==="in_progress").length;return e.jsxs(e.Fragment,{children:[e.jsx(D,{title:"Admin — Support",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Support Tickets"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[B," open · ",K," in progress · ",n.length," total"]})]})}),t?e.jsxs("div",{className:"space-y-4",children:[e.jsx(S,{variant:"outline",size:"sm",onClick:()=>o(null),children:"← Back"}),e.jsxs(w,{children:[e.jsx(A,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(P,{className:"text-lg",children:t.subject}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t.id," · ",t.user," · ",t.category]})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(m,{variant:O[t.priority],children:t.priority}),e.jsxs(T,{value:t.status,onValueChange:s=>k(t.id,s),children:[e.jsx(y,{className:"w-[140px] h-8 text-xs",children:e.jsx(N,{})}),e.jsxs(b,{children:[e.jsx(r,{value:"open",children:"Open"}),e.jsx(r,{value:"in_progress",children:"In Progress"}),e.jsx(r,{value:"resolved",children:"Resolved"}),e.jsx(r,{value:"closed",children:"Closed"})]})]})]})]})}),e.jsxs(_,{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:t.messages.map((s,a)=>e.jsxs("div",{className:`rounded-lg p-3 text-sm ${s.sender==="support"?"bg-primary/5 ml-8":"bg-muted mr-8"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium text-xs",children:s.sender==="support"?"Support (You)":t.user}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(s.time).toLocaleString()})]}),e.jsx("p",{children:s.text})]},a))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{value:u,onChange:s=>g(s.target.value),placeholder:"Type your reply...",rows:2,className:"flex-1"}),e.jsx(S,{onClick:I,disabled:!u.trim(),className:"self-end",children:"Send"})]})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx($,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(L,{placeholder:"Search tickets...",value:x,onChange:s=>Z(s.target.value),className:"pl-9"})]}),e.jsxs(T,{value:p,onValueChange:R,children:[e.jsx(y,{className:"w-[150px]",children:e.jsx(N,{placeholder:"Status"})}),e.jsxs(b,{children:[e.jsx(r,{value:"all",children:"All"}),e.jsx(r,{value:"open",children:"Open"}),e.jsx(r,{value:"in_progress",children:"In Progress"}),e.jsx(r,{value:"resolved",children:"Resolved"}),e.jsx(r,{value:"closed",children:"Closed"})]})]})]}),e.jsx(w,{children:e.jsx(_,{className:"p-0",children:e.jsxs(F,{children:[e.jsx(H,{children:e.jsxs(h,{children:[e.jsx(i,{children:"ID"}),e.jsx(i,{children:"User"}),e.jsx(i,{children:"Subject"}),e.jsx(i,{children:"Priority"}),e.jsx(i,{children:"Status"}),e.jsx(i,{className:"text-right",children:"Updated"})]})}),e.jsxs(U,{children:[f.map(s=>e.jsxs(h,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>o(s),children:[e.jsx(l,{className:"font-mono text-xs",children:s.id}),e.jsx(l,{className:"text-sm",children:s.user}),e.jsx(l,{className:"font-medium",children:s.subject}),e.jsx(l,{children:e.jsx(m,{variant:O[s.priority],className:"text-xs",children:s.priority})}),e.jsx(l,{children:e.jsx(m,{variant:G[s.status],className:"text-xs",children:s.status.replace("_"," ")})}),e.jsx(l,{className:"text-right text-xs text-muted-foreground",children:new Date(s.updated_at).toLocaleDateString()})]},s.id)),f.length===0&&e.jsx(h,{children:e.jsx(l,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"No tickets match."})})]})]})})})]})]})]})}export{X as default};
