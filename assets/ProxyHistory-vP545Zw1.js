import{c as U,r as N,j as e,Z as z,I as A,B as l,E as I,t as H}from"./index-BotSXsdz.js";import{S as _}from"./SEOHead-DwHF0MbM.js";import{C as S,a as k,b as L,c as q}from"./card-BmcKZB-J.js";import{T as b,a as w,b as h,c as n,d as v,e as o}from"./table-DNL2J3UL.js";import{B as C}from"./badge-BAlRiWdR.js";import{b as M}from"./use-backend-BOiCW_zm.js";import{D as O,b as V,c as F,d as G,g as Q}from"./dialog-DT0KHvpS.js";import{T as X,a as Z,b as T,c as $}from"./tabs-cRU9w-y_.js";import{S as J}from"./search-2zU8W00u.js";import{f as P}from"./format-sbWH3_uq.js";import{E as K}from"./eye-DlsearmT.js";import{C as B}from"./copy-exWom2Qm.js";import"./useQuery-CCiYUE1R.js";import"./useMutation-mXpATazl.js";import"./api-BTF2QDx4.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=U("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);function D(s){return`${s.host}:${s.port}:${s.username}:${s.password}`}function Y(s){return`curl -x http://${s.username}:${s.password}@${s.host}:${s.port} https://httpbin.org/ip`}function ee(s){return`import requests

proxies = {
    "http": "http://${s.username}:${s.password}@${s.host}:${s.port}",
    "https": "http://${s.username}:${s.password}@${s.host}:${s.port}",
}
response = requests.get("https://httpbin.org/ip", proxies=proxies)
print(response.json())`}function se(s){return`const HttpsProxyAgent = require('https-proxy-agent');

const agent = new HttpsProxyAgent(
  'http://${s.username}:${s.password}@${s.host}:${s.port}'
);

fetch('https://httpbin.org/ip', { agent })
  .then(res => res.json())
  .then(console.log);`}function fe(){var g,y;const{data:s,isLoading:d}=M(),[c,E]=N.useState(""),[a,p]=N.useState(null),m=s==null?void 0:s.filter(t=>{var r,i;return((i=(r=t.product)==null?void 0:r.name)==null?void 0:i.toLowerCase().includes(c.toLowerCase()))||t.id.toString().includes(c)}),f=t=>{const r=t.map(D).join(`
`);navigator.clipboard.writeText(r),H({title:"Copied",description:"Proxies copied to clipboard."})},R=t=>{const r=t.proxies.map(D).join(`
`),i=new Blob([r],{type:"text/plain"}),x=URL.createObjectURL(i),j=document.createElement("a");j.href=x,j.download=`proxies_order_${t.id}.txt`,j.click(),URL.revokeObjectURL(x)};return e.jsxs(e.Fragment,{children:[e.jsx(_,{title:"Proxy History",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(z,{className:"h-6 w-6 text-primary"}),"Proxy History"]}),e.jsxs("div",{className:"relative w-64",children:[e.jsx(J,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(A,{placeholder:"Search orders...",className:"pl-9",value:c,onChange:t=>E(t.target.value)})]})]}),e.jsxs(S,{children:[e.jsx(k,{children:e.jsx(L,{className:"text-lg",children:"Generated Proxy Orders"})}),e.jsx(q,{children:d?e.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Loading history..."}):(m==null?void 0:m.length)===0?e.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"No orders found."}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(b,{children:[e.jsx(w,{children:e.jsxs(h,{children:[e.jsx(n,{children:"Order ID"}),e.jsx(n,{children:"Product"}),e.jsx(n,{children:"Quantity"}),e.jsx(n,{children:"Date"}),e.jsx(n,{children:"Status"}),e.jsx(n,{className:"text-right",children:"Actions"})]})}),e.jsx(v,{children:m.map(t=>{var r,i,x;return e.jsxs(h,{children:[e.jsxs(o,{className:"font-medium text-xs",children:["#",t.id]}),e.jsx(o,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:(r=t.product)==null?void 0:r.name}),e.jsx("span",{className:"text-xs text-muted-foreground uppercase",children:(i=t.product)==null?void 0:i.type})]})}),e.jsx(o,{children:e.jsxs(C,{variant:"secondary",children:[((x=t.proxies)==null?void 0:x.length)||0," Proxies"]})}),e.jsx(o,{className:"text-xs text-muted-foreground",children:P(new Date(t.created_at),"MMM d, yyyy HH:mm")}),e.jsx(o,{children:e.jsx(C,{variant:t.status==="active"?"outline":"secondary",className:"capitalize",children:t.status})}),e.jsx(o,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>p(t),title:"View Details",children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>f(t.proxies),title:"Copy All",children:e.jsx(B,{className:"h-4 w-4"})}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>R(t),title:"Download TXT",children:e.jsx(I,{className:"h-4 w-4"})})]})})]},t.id)})})]})})})]})]}),e.jsx(O,{open:!!a,onOpenChange:()=>p(null),children:e.jsxs(V,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(F,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:["Order Details #",a==null?void 0:a.id]}),e.jsxs(Q,{children:[(g=a==null?void 0:a.product)==null?void 0:g.name," • ",(y=a==null?void 0:a.proxies)==null?void 0:y.length," Proxies • ",a&&P(new Date(a.created_at),"PPP p")]})]}),a&&e.jsxs(X,{defaultValue:"table",className:"mt-4",children:[e.jsxs(Z,{className:"mb-4",children:[e.jsx(T,{value:"table",children:"Table View"}),e.jsx(T,{value:"snippets",children:"Config Snippets"})]}),e.jsx($,{value:"table",children:e.jsx("div",{className:"rounded-md border max-h-[400px] overflow-auto text-card-foreground",children:e.jsxs(b,{children:[e.jsx(w,{children:e.jsxs(h,{children:[e.jsx(n,{className:"w-12",children:"#"}),e.jsx(n,{children:"Host"}),e.jsx(n,{children:"Port"}),e.jsx(n,{children:"Username"}),e.jsx(n,{children:"Password"})]})}),e.jsx(v,{children:a.proxies.map((t,r)=>e.jsxs(h,{children:[e.jsx(o,{className:"text-muted-foreground",children:r+1}),e.jsx(o,{className:"font-mono text-xs",children:t.host}),e.jsx(o,{className:"font-mono text-xs",children:t.port}),e.jsx(o,{className:"font-mono text-xs",children:t.username}),e.jsx(o,{className:"font-mono text-xs",children:t.password})]},r))})]})})}),e.jsx($,{value:"snippets",className:"space-y-4",children:a.proxies[0]&&e.jsxs(e.Fragment,{children:[e.jsx(u,{title:"cURL",code:Y(a.proxies[0])}),e.jsx(u,{title:"Python (requests)",code:ee(a.proxies[0])}),e.jsx(u,{title:"Node.js (fetch)",code:se(a.proxies[0])})]})})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6 font-semibold",children:[e.jsx(l,{variant:"outline",onClick:()=>p(null),children:"Close"}),e.jsx(l,{onClick:()=>f(a.proxies),children:"Copy All Proxies"})]})]})})]})}function u({title:s,code:d}){const c=()=>{navigator.clipboard.writeText(d),H({title:"Copied",description:`${s} snippet copied.`})};return e.jsxs(S,{children:[e.jsxs(k,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsxs(L,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4 text-primary"}),s]}),e.jsxs(l,{variant:"ghost",size:"sm",onClick:c,children:[e.jsx(B,{className:"mr-1 h-3.5 w-3.5"})," Copy"]})]}),e.jsx(q,{children:e.jsx("pre",{className:"overflow-x-auto rounded-md bg-muted p-3 text-xs leading-relaxed font-mono",children:d})})]})}export{fe as default};
