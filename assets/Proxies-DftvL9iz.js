import{r,t as B,j as e,y as P,z as k,E as L,J as A,K as N,I as D,a as i,N as E}from"./index-BUT0sXTI.js";import{S as te}from"./SEOHead-BCkjpzGJ.js";import{E as ae}from"./ErrorBanner-9hBlt9-v.js";import{L as m}from"./label-C1zToKJ6.js";import{C as w,a as H,b as U,c as C}from"./card-DLfvWdew.js";import{T as re}from"./textarea-DgCM9JAd.js";import{T as ne,a as oe,b as G,c as O}from"./tabs-CmfFQxPM.js";import{T as le,a as ie,b as F,c as p,d as ce,e as h}from"./table-BPHTtwtd.js";import{B as de}from"./badge-4qiJzpXv.js";import{b as xe,c as me,d as pe}from"./use-backend-BmGcWdvK.js";import{L as he}from"./loader-circle-C-ckRUIj.js";import{C as I}from"./copy-fTu7tvcp.js";import"./circle-alert-BeQAPfp-.js";import"./useMutation-B77yjbCU.js";import"./dashboard-BD9vk-6s.js";const ue={rp:"residential",mp:"mobile",isp:"isp",dc:"datacenter"};function R(s){return`${s.host}:${s.port}:${s.username}:${s.password}`}function je(s){return`curl -x http://${s.username}:${s.password}@${s.host}:${s.port} https://httpbin.org/ip`}function ye(s){return`import requests

proxies = {
    "http": "http://${s.username}:${s.password}@${s.host}:${s.port}",
    "https": "http://${s.username}:${s.password}@${s.host}:${s.port}",
}
response = requests.get("https://httpbin.org/ip", proxies=proxies)
print(response.json())`}function ge(s){return`const HttpsProxyAgent = require('https-proxy-agent');

const agent = new HttpsProxyAgent(
  'http://${s.username}:${s.password}@${s.host}:${s.port}'
);

fetch('https://httpbin.org/ip', { agent })
  .then(res => res.json())
  .then(console.log);`}function Oe(){const{data:s}=xe(),{data:l}=me(),u=pe(),[c,_]=r.useState(""),[J,Q]=r.useState("residential"),[j,K]=r.useState(""),[M,Y]=r.useState(""),[y,W]=r.useState("rotating"),[S,X]=r.useState(1),[T,V]=r.useState(!1),[q,g]=r.useState(null),[n,Z]=r.useState([]),ee=r.useCallback(async()=>{var t;if(g(null),!c){g("Please select a product.");return}V(!0);try{const a=await u.mutateAsync({product_id:Number(c),quantity:S,country:j||void 0,session_type:y});Z(a.proxies||[]),B({title:"Proxies Generated",description:`${((t=a.proxies)==null?void 0:t.length)||0} proxies ready.`})}catch(a){g(a.message||"Failed to generate proxies.")}finally{V(!1)}},[c,S,j,y,u]),se=r.useCallback(()=>{const t=n.map(R).join(`
`);navigator.clipboard.writeText(t),B({title:"Copied",description:"All proxies copied to clipboard."})},[n]),$=r.useCallback(t=>{let a,o;t==="json"?(a=JSON.stringify(n,null,2),o="application/json"):t==="csv"?(a=`host,port,username,password
`+n.map(v=>`${v.host},${v.port},${v.username},${v.password}`).join(`
`),o="text/csv"):(a=n.map(R).join(`
`),o="text/plain");const b=new Blob([a],{type:o}),d=URL.createObjectURL(b),x=document.createElement("a");x.href=d,x.download=`proxies.${t}`,x.click(),URL.revokeObjectURL(d)},[n]),f=n[0];return e.jsxs(e.Fragment,{children:[e.jsx(te,{title:"Proxy Generator",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Proxy Generator"}),e.jsxs(w,{children:[e.jsx(H,{children:e.jsx(U,{className:"text-lg",children:"Generate Proxies"})}),e.jsxs(C,{className:"space-y-4",children:[q&&e.jsx(ae,{message:q,onDismiss:()=>g(null)}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Product"}),e.jsxs(P,{value:c,onValueChange:t=>{_(t);const a=(s??[]).find(o=>o.id.toString()===t);a&&Q(a.type)},children:[e.jsx(k,{children:e.jsx(L,{placeholder:"Select Product..."})}),e.jsx(A,{children:(s??[]).map(t=>e.jsx(N,{value:t.id.toString(),children:t.name},t.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Country"}),e.jsxs(P,{value:j,onValueChange:K,children:[e.jsx(k,{children:e.jsx(L,{placeholder:"Select..."})}),e.jsx(A,{children:(()=>{var o,b;const t=ue[J]||"residential",a=((b=(o=l==null?void 0:l.data)==null?void 0:o[t])==null?void 0:b.countries)||{};return Object.entries(a).map(([d,x])=>e.jsx(N,{value:d,children:x},d))})()})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"City (optional)"}),e.jsx(D,{value:M,onChange:t=>Y(t.target.value),placeholder:"Any"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Session Type"}),e.jsxs(P,{value:y,onValueChange:W,children:[e.jsx(k,{children:e.jsx(L,{})}),e.jsxs(A,{children:[e.jsx(N,{value:"rotating",children:"Rotating"}),e.jsx(N,{value:"sticky",children:"Sticky"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Quantity"}),e.jsx(D,{type:"number",min:1,max:1e3,value:S,onChange:t=>X(Number(t.target.value))})]})]}),e.jsxs(i,{onClick:ee,disabled:T,children:[T&&e.jsx(he,{className:"mr-2 h-4 w-4 animate-spin"}),T?"Generating…":"Generate Proxies"]})]})]}),n.length>0&&e.jsxs(ne,{defaultValue:"output",children:[e.jsx("div",{className:"flex items-center justify-between flex-wrap gap-2",children:e.jsxs(oe,{children:[e.jsx(G,{value:"output",children:"Output"}),e.jsx(G,{value:"table",children:"Table View"}),e.jsx(G,{value:"snippets",children:"Config Snippets"})]})}),e.jsx(O,{value:"output",className:"mt-4",children:e.jsxs(w,{children:[e.jsx(H,{className:"flex flex-row items-center justify-between pb-2",children:e.jsxs(U,{className:"text-sm",children:[e.jsx(de,{variant:"secondary",className:"mr-2",children:n.length}),"proxies generated • ",c," • ",j," • ",y]})}),e.jsxs(C,{className:"space-y-3",children:[e.jsx(re,{readOnly:!0,className:"font-mono text-xs leading-relaxed min-h-[200px] max-h-[400px] resize-y bg-muted",value:n.map(R).join(`
`),onFocus:t=>t.target.select()}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(i,{variant:"default",size:"sm",onClick:se,children:[e.jsx(I,{className:"mr-1.5 h-3.5 w-3.5"})," Copy All"]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>$("txt"),children:[e.jsx(E,{className:"mr-1.5 h-3.5 w-3.5"})," Download .txt"]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>$("csv"),children:[e.jsx(E,{className:"mr-1.5 h-3.5 w-3.5"})," Download .csv"]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>$("json"),children:[e.jsx(E,{className:"mr-1.5 h-3.5 w-3.5"})," Download .json"]})]})]})]})}),e.jsx(O,{value:"table",className:"mt-4",children:e.jsx(w,{children:e.jsx(C,{className:"p-0",children:e.jsx("div",{className:"max-h-96 overflow-auto",children:e.jsxs(le,{children:[e.jsx(ie,{children:e.jsxs(F,{children:[e.jsx(p,{className:"w-12",children:"#"}),e.jsx(p,{children:"Host"}),e.jsx(p,{children:"Port"}),e.jsx(p,{children:"Username"}),e.jsx(p,{children:"Password"})]})}),e.jsx(ce,{children:n.map((t,a)=>e.jsxs(F,{children:[e.jsx(h,{className:"text-muted-foreground",children:a+1}),e.jsx(h,{className:"font-mono text-xs",children:t.host}),e.jsx(h,{className:"font-mono text-xs",children:t.port}),e.jsx(h,{className:"font-mono text-xs",children:t.username}),e.jsx(h,{className:"font-mono text-xs",children:t.password})]},a))})]})})})})}),e.jsx(O,{value:"snippets",className:"mt-4 space-y-4",children:f&&e.jsxs(e.Fragment,{children:[e.jsx(z,{title:"cURL",code:je(f)}),e.jsx(z,{title:"Python (requests)",code:ye(f)}),e.jsx(z,{title:"Node.js (fetch)",code:ge(f)})]})})]})]})]})}function z({title:s,code:l}){const u=()=>{navigator.clipboard.writeText(l),B({title:"Copied",description:`${s} snippet copied.`})};return e.jsxs(w,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(U,{className:"text-sm",children:s}),e.jsxs(i,{variant:"ghost",size:"sm",onClick:u,children:[e.jsx(I,{className:"mr-1 h-3.5 w-3.5"})," Copy"]})]}),e.jsx(C,{children:e.jsx("pre",{className:"overflow-x-auto rounded-md bg-muted p-3 text-xs leading-relaxed",children:l})})]})}export{Oe as default};
