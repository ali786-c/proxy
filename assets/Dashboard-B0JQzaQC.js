import{c as p,i as j,j as e,a0 as g,Y as v,D as f,g as N,G as b,ae as _}from"./index-D5UIMIAT.js";import{S as y}from"./SEOHead-D-mAupIa.js";import{C as a,c as i,a as o,b as x}from"./card-rwfYRBA5.js";import{B as h}from"./badge-0xpZ6sgU.js";import{P as u}from"./progress-BJoyCi1h.js";import{C as w}from"./chart-column-CveYkXZR.js";import{Z as C}from"./zap-DVKpi5P6.js";import{T as S}from"./trending-up-B02CcXMd.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=p("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=p("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);function l({title:s,value:n,change:r,icon:t,prefix:d="",suffix:c=""}){const m=(r??0)>=0;return e.jsx(a,{children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s}),e.jsxs("p",{className:"mt-1 text-2xl font-bold",children:[d,n,c]}),r!==void 0&&e.jsxs("div",{className:`mt-1 flex items-center gap-1 text-xs ${m?"text-green-600":"text-destructive"}`,children:[m?e.jsx(k,{className:"h-3 w-3"}):e.jsx(A,{className:"h-3 w-3"}),Math.abs(r),"% from last month"]})]}),e.jsx("div",{className:"rounded-lg bg-primary/10 p-3",children:e.jsx(t,{className:"h-5 w-5 text-primary"})})]})})})}function F(){const{data:s,isLoading:n}=j({queryKey:["admin-stats"],queryFn:()=>_.get("/admin/stats",t=>t)}),r={total_users:(s==null?void 0:s.total_users)??0,users_change:0,active_subs:(s==null?void 0:s.total_active_proxies)??0,subs_change:0,revenue_30d:((s==null?void 0:s.total_revenue)??0)*100,revenue_change:0,bandwidth_30d_gb:(s==null?void 0:s.bandwidth_30d_gb)??0,bandwidth_change:0,error_rate:(s==null?void 0:s.error_rate)??.1,active_proxies:(s==null?void 0:s.total_active_proxies)??0,uptime:(s==null?void 0:s.uptime)??99.99,top_geos:(s==null?void 0:s.top_geos)??[{country:"Global",flag:"üåê",bandwidth_gb:0,users:(s==null?void 0:s.total_users)??0}],recent_sales:(s==null?void 0:s.recent_sales)??[],alerts:(s==null?void 0:s.alerts)??[]};return n?e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Loading system stats..."}):e.jsxs(e.Fragment,{children:[e.jsx(y,{title:"Admin Overview",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Admin Overview"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"System-wide KPIs and operational status."})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(l,{title:"Total Users",value:r.total_users.toLocaleString(),change:r.users_change,icon:g}),e.jsx(l,{title:"Active Subscriptions",value:r.active_subs.toLocaleString(),change:r.subs_change,icon:v}),e.jsx(l,{title:"Revenue (30d)",value:(r.revenue_30d/100).toLocaleString(),change:r.revenue_change,icon:f,prefix:"$"}),e.jsx(l,{title:"Bandwidth (30d)",value:(r.bandwidth_30d_gb/1e3).toFixed(1),change:r.bandwidth_change,icon:w,suffix:" TB"})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[e.jsx(a,{children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Proxies"}),e.jsxs("p",{className:"text-2xl font-bold",children:[(r.active_proxies/1e6).toFixed(1),"M+"]})]}),e.jsx("div",{className:"rounded-lg bg-primary/10 p-3",children:e.jsx(N,{className:"h-5 w-5 text-primary"})})]})})}),e.jsx(a,{children:e.jsxs(i,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Uptime"}),e.jsxs("p",{className:"text-2xl font-bold",children:[r.uptime,"%"]})]}),e.jsx(h,{variant:"default",className:"bg-success text-success-foreground",children:"Healthy"})]}),e.jsx(u,{value:r.uptime,className:"mt-3 h-2"})]})}),e.jsx(a,{children:e.jsxs(i,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Error Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[r.error_rate,"%"]})]}),e.jsx(h,{variant:r.error_rate<5?"default":"destructive",children:r.error_rate<5?"Normal":"Elevated"})]}),e.jsx(u,{value:r.error_rate,max:10,className:"mt-3 h-2"})]})})]}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[e.jsxs(a,{children:[e.jsx(o,{children:e.jsx(x,{className:"text-lg",children:"Operational Alerts"})}),e.jsx(i,{className:"space-y-3",children:r.alerts.length>0?r.alerts.map(t=>e.jsxs("div",{className:`flex items-start gap-3 rounded-md border p-3 text-sm ${t.type==="error"?"border-destructive/30 bg-destructive/5":t.type==="warning"?"border-yellow-500/30 bg-yellow-500/5":"border-border bg-muted/30"}`,children:[e.jsx(C,{className:`mt-0.5 h-4 w-4 shrink-0 ${t.type==="error"?"text-destructive":t.type==="warning"?"text-yellow-600":"text-muted-foreground"}`}),e.jsx("span",{children:t.message})]},t.id)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No active alerts."})})]}),e.jsxs(a,{children:[e.jsx(o,{children:e.jsxs(x,{className:"text-lg flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5"})," Recent Sales"]})}),e.jsx(i,{children:e.jsx("div",{className:"space-y-4",children:r.recent_sales.length>0?r.recent_sales.map((t,d)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:t.user}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.plan," ¬∑ ",t.time]})]}),e.jsxs("span",{className:"font-semibold text-primary",children:["+$",t.amount]})]},d)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No recent sales."})})})]})]}),e.jsxs(a,{children:[e.jsx(o,{children:e.jsxs(x,{className:"text-lg flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5"})," Top Geographies (30d)"]})}),e.jsx(i,{children:e.jsx("div",{className:"space-y-3",children:r.top_geos.map((t,d)=>{const c=Math.round(t.bandwidth_gb/r.top_geos[0].bandwidth_gb*100);return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"font-medium",children:[t.flag," ",t.country,e.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",t.users.toLocaleString()," users)"]})]}),e.jsxs("span",{className:"text-muted-foreground",children:[(t.bandwidth_gb/1e3).toFixed(1)," TB"]})]}),e.jsx("div",{className:"h-2 w-full rounded-full bg-muted",children:e.jsx("div",{className:"h-2 rounded-full bg-primary transition-all",style:{width:`${c}%`}})})]},t.country)})})})]})]})]})}export{F as default};
