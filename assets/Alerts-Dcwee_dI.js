import{c as be,r as d,a2 as je,j as e,a6 as R,a0 as K,az as P,aD as Se,a1 as ve,aP as ee,aB as we,a8 as ye,aA as _e,_ as Ne,B as Ce,T as ke,aI as Re,D as Pe,I as J,G as De,a as Q}from"./index-BuE-Xh2G.js";import{S as Ee}from"./SEOHead-DoxekdhE.js";import{C as M,a as T,b as B,d as H,c as V}from"./card-6TtDi5Gl.js";import{L as Ae}from"./label-DfxgaNDc.js";import{S as Z}from"./switch-B2I3oN4X.js";import{B as Ie}from"./badge-BbTNflPw.js";import{S as Me}from"./save-BKMNEGug.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=be("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);var te=["PageUp","PageDown"],se=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ne={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},D="Slider",[G,Be,Ve]=Se(D),[re]=ye(D,[Ve]),[Ke,O]=re(D),oe=d.forwardRef((t,n)=>{const{name:r,min:o=0,max:a=100,step:c=1,orientation:s="horizontal",disabled:i=!1,minStepsBetweenThumbs:u=0,defaultValue:p=[o],value:g,onValueChange:l=()=>{},onValueCommit:m=()=>{},inverted:j=!1,form:w,...b}=t,h=d.useRef(new Set),f=d.useRef(0),S=s==="horizontal"?He:Le,[x=[],E]=je({prop:g,defaultProp:p,onChange:v=>{var C;(C=[...h.current][f.current])==null||C.focus(),l(v)}}),z=d.useRef(x);function U(v){const y=Ge(x,v);A(v,y)}function pe(v){A(v,f.current)}function ge(){const v=z.current[f.current];x[f.current]!==v&&m(x)}function A(v,y,{commit:C}={commit:!1}){const X=Xe(c),F=qe(Math.round((v-o)/c)*c+o,X),I=ee(F,[o,a]);E((k=[])=>{const _=Ue(k,I,y);if($e(_,u*c)){f.current=_.indexOf(I);const q=String(_)!==String(k);return q&&C&&m(_),q?_:k}else return k})}return e.jsx(Ke,{scope:t.__scopeSlider,name:r,disabled:i,min:o,max:a,valueIndexToChangeRef:f,thumbs:h.current,values:x,orientation:s,form:w,children:e.jsx(G.Provider,{scope:t.__scopeSlider,children:e.jsx(G.Slot,{scope:t.__scopeSlider,children:e.jsx(S,{"aria-disabled":i,"data-disabled":i?"":void 0,...b,ref:n,onPointerDown:R(b.onPointerDown,()=>{i||(z.current=x)}),min:o,max:a,inverted:j,onSlideStart:i?void 0:U,onSlideMove:i?void 0:pe,onSlideEnd:i?void 0:ge,onHomeKeyDown:()=>!i&&A(o,0,{commit:!0}),onEndKeyDown:()=>!i&&A(a,x.length-1,{commit:!0}),onStepKeyDown:({event:v,direction:y})=>{if(!i){const F=te.includes(v.key)||v.shiftKey&&se.includes(v.key)?10:1,I=f.current,k=x[I],_=c*F*y;A(k+_,I,{commit:!0})}}})})})})});oe.displayName=D;var[ae,ie]=re(D,{startEdge:"left",endEdge:"right",size:"width",direction:1}),He=d.forwardRef((t,n)=>{const{min:r,max:o,dir:a,inverted:c,onSlideStart:s,onSlideMove:i,onSlideEnd:u,onStepKeyDown:p,...g}=t,[l,m]=d.useState(null),j=P(n,S=>m(S)),w=d.useRef(void 0),b=ve(a),h=b==="ltr",f=h&&!c||!h&&c;function N(S){const x=w.current||l.getBoundingClientRect(),E=[0,x.width],U=$(E,f?[r,o]:[o,r]);return w.current=x,U(S-x.left)}return e.jsx(ae,{scope:t.__scopeSlider,startEdge:f?"left":"right",endEdge:f?"right":"left",direction:f?1:-1,size:"width",children:e.jsx(le,{dir:b,"data-orientation":"horizontal",...g,ref:j,style:{...g.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const x=N(S.clientX);s==null||s(x)},onSlideMove:S=>{const x=N(S.clientX);i==null||i(x)},onSlideEnd:()=>{w.current=void 0,u==null||u()},onStepKeyDown:S=>{const E=ne[f?"from-left":"from-right"].includes(S.key);p==null||p({event:S,direction:E?-1:1})}})})}),Le=d.forwardRef((t,n)=>{const{min:r,max:o,inverted:a,onSlideStart:c,onSlideMove:s,onSlideEnd:i,onStepKeyDown:u,...p}=t,g=d.useRef(null),l=P(n,g),m=d.useRef(void 0),j=!a;function w(b){const h=m.current||g.current.getBoundingClientRect(),f=[0,h.height],S=$(f,j?[o,r]:[r,o]);return m.current=h,S(b-h.top)}return e.jsx(ae,{scope:t.__scopeSlider,startEdge:j?"bottom":"top",endEdge:j?"top":"bottom",size:"height",direction:j?1:-1,children:e.jsx(le,{"data-orientation":"vertical",...p,ref:l,style:{...p.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const h=w(b.clientY);c==null||c(h)},onSlideMove:b=>{const h=w(b.clientY);s==null||s(h)},onSlideEnd:()=>{m.current=void 0,i==null||i()},onStepKeyDown:b=>{const f=ne[j?"from-bottom":"from-top"].includes(b.key);u==null||u({event:b,direction:f?-1:1})}})})}),le=d.forwardRef((t,n)=>{const{__scopeSlider:r,onSlideStart:o,onSlideMove:a,onSlideEnd:c,onHomeKeyDown:s,onEndKeyDown:i,onStepKeyDown:u,...p}=t,g=O(D,r);return e.jsx(K.span,{...p,ref:n,onKeyDown:R(t.onKeyDown,l=>{l.key==="Home"?(s(l),l.preventDefault()):l.key==="End"?(i(l),l.preventDefault()):te.concat(se).includes(l.key)&&(u(l),l.preventDefault())}),onPointerDown:R(t.onPointerDown,l=>{const m=l.target;m.setPointerCapture(l.pointerId),l.preventDefault(),g.thumbs.has(m)?m.focus():o(l)}),onPointerMove:R(t.onPointerMove,l=>{l.target.hasPointerCapture(l.pointerId)&&a(l)}),onPointerUp:R(t.onPointerUp,l=>{const m=l.target;m.hasPointerCapture(l.pointerId)&&(m.releasePointerCapture(l.pointerId),c(l))})})}),ce="SliderTrack",de=d.forwardRef((t,n)=>{const{__scopeSlider:r,...o}=t,a=O(ce,r);return e.jsx(K.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...o,ref:n})});de.displayName=ce;var W="SliderRange",ue=d.forwardRef((t,n)=>{const{__scopeSlider:r,...o}=t,a=O(W,r),c=ie(W,r),s=d.useRef(null),i=P(n,s),u=a.values.length,p=a.values.map(m=>he(m,a.min,a.max)),g=u>1?Math.min(...p):0,l=100-Math.max(...p);return e.jsx(K.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...o,ref:i,style:{...t.style,[c.startEdge]:g+"%",[c.endEdge]:l+"%"}})});ue.displayName=W;var Y="SliderThumb",me=d.forwardRef((t,n)=>{const r=Be(t.__scopeSlider),[o,a]=d.useState(null),c=P(n,i=>a(i)),s=d.useMemo(()=>o?r().findIndex(i=>i.ref.current===o):-1,[r,o]);return e.jsx(Oe,{...t,ref:c,index:s})}),Oe=d.forwardRef((t,n)=>{const{__scopeSlider:r,index:o,name:a,...c}=t,s=O(Y,r),i=ie(Y,r),[u,p]=d.useState(null),g=P(n,N=>p(N)),l=u?s.form||!!u.closest("form"):!0,m=we(u),j=s.values[o],w=j===void 0?0:he(j,s.min,s.max),b=Fe(o,s.values.length),h=m==null?void 0:m[i.size],f=h?We(h,w,i.direction):0;return d.useEffect(()=>{if(u)return s.thumbs.add(u),()=>{s.thumbs.delete(u)}},[u,s.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[i.startEdge]:`calc(${w}% + ${f}px)`},children:[e.jsx(G.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(K.span,{role:"slider","aria-label":t["aria-label"]||b,"aria-valuemin":s.min,"aria-valuenow":j,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...c,ref:g,style:j===void 0?{display:"none"}:t.style,onFocus:R(t.onFocus,()=>{s.valueIndexToChangeRef.current=o})})}),l&&e.jsx(fe,{name:a??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:j},o)]})});me.displayName=Y;var ze="RadioBubbleInput",fe=d.forwardRef(({__scopeSlider:t,value:n,...r},o)=>{const a=d.useRef(null),c=P(a,o),s=_e(n);return d.useEffect(()=>{const i=a.current;if(!i)return;const u=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(u,"value").set;if(s!==n&&g){const l=new Event("input",{bubbles:!0});g.call(i,n),i.dispatchEvent(l)}},[s,n]),e.jsx(K.input,{style:{display:"none"},...r,ref:c,defaultValue:n})});fe.displayName=ze;function Ue(t=[],n,r){const o=[...t];return o[r]=n,o.sort((a,c)=>a-c)}function he(t,n,r){const c=100/(r-n)*(t-n);return ee(c,[0,100])}function Fe(t,n){return n>2?`Value ${t+1} of ${n}`:n===2?["Minimum","Maximum"][t]:void 0}function Ge(t,n){if(t.length===1)return 0;const r=t.map(a=>Math.abs(a-n)),o=Math.min(...r);return r.indexOf(o)}function We(t,n,r){const o=t/2,c=$([0,50],[0,o]);return(o-c(n)*r)*r}function Ye(t){return t.slice(0,-1).map((n,r)=>t[r+1]-n)}function $e(t,n){if(n>0){const r=Ye(t);return Math.min(...r)>=n}return!0}function $(t,n){return r=>{if(t[0]===t[1]||n[0]===n[1])return n[0];const o=(n[1]-n[0])/(t[1]-t[0]);return n[0]+o*(r-t[0])}}function Xe(t){return(String(t).split(".")[1]||"").length}function qe(t,n){const r=Math.pow(10,n);return Math.round(t*r)/r}var xe=oe,Je=de,Qe=ue,Ze=me;const L=d.forwardRef(({className:t,...n},r)=>e.jsxs(xe,{ref:r,className:Ne("relative flex w-full touch-none select-none items-center",t),...n,children:[e.jsx(Je,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(Qe,{className:"absolute h-full bg-primary"})}),e.jsx(Ze,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));L.displayName=xe.displayName;const et={error_spike_pct:5,ban_spike_pct:8,spend_cap_usd:5e3,unusual_geo_threshold:3,notify_email:!0,notify_webhook:!1,webhook_url:""};function lt(){const[t,n]=d.useState(et),[r,o]=d.useState(!1),a=(s,i)=>{n(u=>({...u,[s]:i})),o(!0)},c=()=>{alert("Alert thresholds saved"),o(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(Ee,{title:"Admin — Alerts",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Alert Configuration"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure operational thresholds and notification channels."})]}),e.jsxs(Ce,{onClick:c,disabled:!r,children:[e.jsx(Me,{className:"mr-2 h-4 w-4"}),"Save Changes",r&&e.jsx(Ie,{variant:"secondary",className:"ml-2 text-xs",children:"unsaved"})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs(M,{children:[e.jsxs(T,{className:"pb-3",children:[e.jsxs(B,{className:"flex items-center gap-2 text-base",children:[e.jsx(ke,{className:"h-4 w-4 text-destructive"}),"Error Spike Threshold"]}),e.jsx(H,{children:"Trigger alert when error rate exceeds this percentage."})]}),e.jsxs(V,{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("span",{className:"text-2xl font-bold",children:[t.error_spike_pct,"%"]})}),e.jsx(L,{value:[t.error_spike_pct],onValueChange:([s])=>a("error_spike_pct",s),min:1,max:25,step:.5}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Current: alerts if error rate ",">"," ",t.error_spike_pct,"%"]})]})]}),e.jsxs(M,{children:[e.jsxs(T,{className:"pb-3",children:[e.jsxs(B,{className:"flex items-center gap-2 text-base",children:[e.jsx(Re,{className:"h-4 w-4 text-yellow-600"}),"Ban Spike Threshold"]}),e.jsx(H,{children:"Trigger alert when proxy block/ban rate exceeds this percentage."})]}),e.jsxs(V,{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("span",{className:"text-2xl font-bold",children:[t.ban_spike_pct,"%"]})}),e.jsx(L,{value:[t.ban_spike_pct],onValueChange:([s])=>a("ban_spike_pct",s),min:1,max:30,step:.5}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Current: alerts if ban rate ",">"," ",t.ban_spike_pct,"%"]})]})]}),e.jsxs(M,{children:[e.jsxs(T,{className:"pb-3",children:[e.jsxs(B,{className:"flex items-center gap-2 text-base",children:[e.jsx(Pe,{className:"h-4 w-4 text-primary"}),"Spend Cap"]}),e.jsx(H,{children:"Alert when total platform spend exceeds this daily threshold (EUR)."})]}),e.jsxs(V,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg font-bold",children:"€"}),e.jsx(J,{type:"number",value:t.spend_cap_usd,onChange:s=>a("spend_cap_usd",Number(s.target.value)),className:"max-w-[150px]"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Daily platform-wide spend alert in EUR."})]})]}),e.jsxs(M,{children:[e.jsxs(T,{className:"pb-3",children:[e.jsxs(B,{className:"flex items-center gap-2 text-base",children:[e.jsx(De,{className:"h-4 w-4 text-primary"}),"Unusual Geo Usage"]}),e.jsx(H,{children:"Alert when a single user connects from more than N countries in 1 hour."})]}),e.jsxs(V,{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("span",{className:"text-2xl font-bold",children:[t.unusual_geo_threshold," countries"]})}),e.jsx(L,{value:[t.unusual_geo_threshold],onValueChange:([s])=>a("unusual_geo_threshold",s),min:2,max:15,step:1}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Flags potential credential sharing or abuse."})]})]})]}),e.jsxs(M,{children:[e.jsx(T,{children:e.jsxs(B,{className:"text-lg flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5"})," Notification Channels"]})}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-md border p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Email Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Send alerts to admin email addresses."})]})]}),e.jsx(Z,{checked:t.notify_email,onCheckedChange:s=>a("notify_email",s)})]}),e.jsxs("div",{className:"space-y-3 rounded-md border p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Te,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Webhook"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"POST alert payloads to a custom endpoint."})]})]}),e.jsx(Z,{checked:t.notify_webhook,onCheckedChange:s=>a("notify_webhook",s)})]}),t.notify_webhook&&e.jsxs("div",{className:"space-y-1 pl-7",children:[e.jsx(Ae,{className:"text-xs",children:"Webhook URL"}),e.jsx(J,{placeholder:"https://your-service.com/webhook",value:t.webhook_url,onChange:s=>a("webhook_url",s.target.value)})]})]})]})]})]})]})}export{lt as default};
