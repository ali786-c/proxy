import{i as o,al as c,am as d,s as a}from"./index-WAZqrxeU.js";import{u as y}from"./useMutation-ZvIPFomk.js";function p(){const{user:e}=o();return c({queryKey:["invoices",e==null?void 0:e.id],enabled:!!(e!=null&&e.id),queryFn:async()=>{const{data:s,error:t}=await a.from("invoices").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(t)throw t;return s??[]}})}function m(){const{user:e}=o(),s=d(),t=c({queryKey:["tickets",e==null?void 0:e.id],enabled:!!(e!=null&&e.id),queryFn:async()=>{const{data:i,error:r}=await a.from("support_tickets").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(r)throw r;return i??[]}}),u=y({mutationFn:async i=>{const{data:r,error:n}=await a.from("support_tickets").insert({user_id:e.id,...i}).select().single();if(n)throw n;return r},onSuccess:()=>s.invalidateQueries({queryKey:["tickets"]})});return{...t,createTicket:u}}export{m as a,p as u};
