import{h as j,i as g,r as c,j as s,I as r,B as y,L as v,t as N,o as S,s as i}from"./index-C0xZJzrY.js";import{u as b,t as E}from"./zod-CpY8ps5J.js";import{S as C}from"./SEOHead-BLxs91Wc.js";import{E as _}from"./ErrorBanner-Bl5gtpau.js";import{L as o}from"./label-BPvoMbvf.js";import{L}from"./loader-circle-Duzx9M10.js";import"./circle-alert-BiR_jvPM.js";const F=S({name:i().trim().min(1,"Name is required").max(100),email:i().trim().min(1,"Email is required").email("Enter a valid email address"),password:i().min(8,"Password must be at least 8 characters").max(128),password_confirmation:i()}).refine(a=>a.password===a.password_confirmation,{message:"Passwords do not match",path:["password_confirmation"]});function D(){const{signup:a,clearError:l,error:m}=j(),p=g(),[n,d]=c.useState(!1),[P,A]=c.useState(!1),{register:t,handleSubmit:x,formState:{errors:e}}=b({resolver:E(F),defaultValues:{name:"",email:"",password:"",password_confirmation:""}}),u=async h=>{d(!0);try{const f=await a(h);N({title:"Account created",description:"Welcome to UpgradedProxy!"});const w=f.role==="admin"?"/admin":"/app";p(w)}catch{}finally{d(!1)}};return s.jsxs(s.Fragment,{children:[s.jsx(C,{title:"Sign Up",description:"Create your UpgradedProxy account.",noindex:!0}),s.jsx("div",{className:"flex min-h-screen items-center justify-center px-4",children:s.jsxs("form",{onSubmit:x(u),className:"w-full max-w-sm space-y-4 rounded-lg border bg-card p-8",noValidate:!0,children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Create Account"}),m&&s.jsx(_,{message:m,onDismiss:l}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(o,{htmlFor:"name",children:"Name"}),s.jsx(r,{id:"name",autoComplete:"name","aria-invalid":!!e.name,...t("name")}),e.name&&s.jsx("p",{className:"text-xs text-destructive",children:e.name.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(o,{htmlFor:"email",children:"Email"}),s.jsx(r,{id:"email",type:"email",autoComplete:"email","aria-invalid":!!e.email,...t("email")}),e.email&&s.jsx("p",{className:"text-xs text-destructive",children:e.email.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(o,{htmlFor:"password",children:"Password"}),s.jsx(r,{id:"password",type:"password",autoComplete:"new-password","aria-invalid":!!e.password,...t("password")}),e.password&&s.jsx("p",{className:"text-xs text-destructive",children:e.password.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(o,{htmlFor:"password_confirmation",children:"Confirm Password"}),s.jsx(r,{id:"password_confirmation",type:"password",autoComplete:"new-password","aria-invalid":!!e.password_confirmation,...t("password_confirmation")}),e.password_confirmation&&s.jsx("p",{className:"text-xs text-destructive",children:e.password_confirmation.message})]}),s.jsxs(y,{type:"submit",className:"w-full",disabled:n,children:[n&&s.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"}),n?"Creating accountâ€¦":"Create Account"]}),s.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Already have an account?"," ",s.jsx(v,{to:"/login",className:"text-primary hover:underline",children:"Login"})]})]})})]})}export{D as default};
