import{k as y,r as s,s as x,j as e,B as i,L as S,I as h}from"./index-WAZqrxeU.js";import{S as l}from"./SEOHead-BQbD0fka.js";import{L as p}from"./label-Cv0_4Q_2.js";import{C as P}from"./circle-check-Dv33wnTl.js";import{L as C}from"./loader-circle-CkOwjKTV.js";function U(){const f=y(),[r,w]=s.useState(""),[o,j]=s.useState(""),[d,c]=s.useState(!1),[g,N]=s.useState(!1),[u,a]=s.useState(null),[b,m]=s.useState(!1);s.useEffect(()=>{window.location.hash.includes("type=recovery")&&m(!0),x.auth.getSession().then(({data:n})=>{n.session&&m(!0)})},[]);const v=async t=>{if(t.preventDefault(),r!==o){a("Passwords do not match");return}if(r.length<8){a("Password must be at least 8 characters");return}c(!0),a(null);const{error:n}=await x.auth.updateUser({password:r});c(!1),n?a(n.message):N(!0)};return g?e.jsxs(e.Fragment,{children:[e.jsx(l,{title:"Password Updated",noindex:!0}),e.jsx("div",{className:"flex min-h-screen items-center justify-center px-4",children:e.jsxs("div",{className:"w-full max-w-sm space-y-4 rounded-lg border bg-card p-8 text-center",children:[e.jsx(P,{className:"mx-auto h-12 w-12 text-success"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Password Updated"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your password has been successfully reset."}),e.jsx(i,{className:"w-full",onClick:()=>f("/app",{replace:!0}),children:"Go to Dashboard"})]})})]}):b?e.jsxs(e.Fragment,{children:[e.jsx(l,{title:"Reset Password",noindex:!0}),e.jsx("div",{className:"flex min-h-screen items-center justify-center px-4",children:e.jsxs("form",{onSubmit:v,className:"w-full max-w-sm space-y-4 rounded-lg border bg-card p-8",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Set New Password"}),u&&e.jsx("p",{className:"text-sm text-destructive",children:u}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"password",children:"New Password"}),e.jsx(h,{id:"password",type:"password",value:r,onChange:t=>w(t.target.value),minLength:8,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"confirm",children:"Confirm Password"}),e.jsx(h,{id:"confirm",type:"password",value:o,onChange:t=>j(t.target.value),required:!0})]}),e.jsxs(i,{type:"submit",className:"w-full",disabled:d,children:[d&&e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Password"]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{title:"Reset Password",noindex:!0}),e.jsx("div",{className:"flex min-h-screen items-center justify-center px-4",children:e.jsxs("div",{className:"w-full max-w-sm space-y-4 rounded-lg border bg-card p-8 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Invalid or Expired Link"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This password reset link is invalid or has expired."}),e.jsx(i,{variant:"outline",className:"w-full",asChild:!0,children:e.jsx(S,{to:"/forgot-password",children:"Request a New Link"})})]})})]})}export{U as default};
