import{j as e}from"./ui-CeaNA1b8.js";import{S as b}from"./SEOHead-CNdL5gGP.js";import{C as n,c as d,a as m,b as h}from"./card-clxFFivi.js";import{k as N,B as j,o as u,C as g,s as i,Y as a,y as f}from"./index-un0RGWJf.js";import{P as v}from"./progress-DX2Plpoe.js";import{U as y,t as w,I as _,a9 as S,n as A,aQ as C,A as T,K as L,aa as R,Z as $,as as B,G as F,aR as U,aS as G}from"./vendor-CSZBJNtL.js";function o({title:s,value:x,change:t,icon:r,prefix:l="",suffix:c=""}){const p=(t??0)>=0;return e.jsx(n,{children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s}),e.jsxs("p",{className:"mt-1 text-2xl font-bold",children:[l,x,c]}),t!==void 0&&e.jsxs("div",{className:`mt-1 flex items-center gap-1 text-xs ${p?"text-green-600":"text-destructive"}`,children:[p?e.jsx(U,{className:"h-3 w-3"}):e.jsx(G,{className:"h-3 w-3"}),Math.abs(t),"% from last month"]})]}),e.jsx("div",{className:"rounded-lg bg-primary/10 p-3",children:e.jsx(r,{className:"h-5 w-5 text-primary"})})]})})})}const I=u({total_users:a(),total_active_proxies:a(),total_revenue:a(),system_total_balance:a(),recent_registrations:a(),revenue_last_24h:a(),bandwidth_30d_gb:a(),uptime:a(),error_rate:a(),recent_sales:g(u({user:i(),amount:a(),time:i(),plan:i()})),alerts:g(u({id:i(),type:i(),message:i(),icon:i()}))});function H(){const{data:s,isLoading:x}=N({queryKey:["admin-stats"],queryFn:()=>f.get("/admin/stats",I)}),t={total_users:(s==null?void 0:s.total_users)??0,users_change:0,active_subs:(s==null?void 0:s.total_active_proxies)??0,subs_change:0,revenue_30d:((s==null?void 0:s.total_revenue)??0)*100,revenue_change:0,bandwidth_30d_gb:(s==null?void 0:s.bandwidth_30d_gb)??0,bandwidth_change:0,error_rate:(s==null?void 0:s.error_rate)??.1,active_proxies:(s==null?void 0:s.total_active_proxies)??0,uptime:(s==null?void 0:s.uptime)??99.99,top_geos:(s==null?void 0:s.top_geos)??[{country:"Global",flag:"ðŸŒ",bandwidth_gb:0,users:(s==null?void 0:s.total_users)??0}],recent_sales:(s==null?void 0:s.recent_sales)??[],alerts:(s==null?void 0:s.alerts)??[]};return x?e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Loading system stats..."}):e.jsxs(e.Fragment,{children:[e.jsx(b,{title:"Admin Overview",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Admin Overview"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"System-wide KPIs and operational status."})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(o,{title:"Total Users",value:t.total_users.toLocaleString(),change:t.users_change,icon:y}),e.jsx(o,{title:"Active Subscriptions",value:t.active_subs.toLocaleString(),change:t.subs_change,icon:w}),e.jsx(o,{title:"Revenue (30d)",value:(t.revenue_30d/100).toLocaleString(),change:t.revenue_change,icon:_,prefix:"$"}),e.jsx(o,{title:"Bandwidth (30d)",value:t.bandwidth_30d_gb>=1e3?(t.bandwidth_30d_gb/1e3).toFixed(1):t.bandwidth_30d_gb.toFixed(1),change:t.bandwidth_change,icon:S,suffix:t.bandwidth_30d_gb>=1e3?" TB":" GB"})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[e.jsx(n,{children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Proxies"}),e.jsx("p",{className:"text-2xl font-bold",children:t.active_proxies>=1e6?`${(t.active_proxies/1e6).toFixed(1)}M+`:t.active_proxies.toLocaleString()})]}),e.jsx("div",{className:"rounded-lg bg-primary/10 p-3",children:e.jsx(A,{className:"h-5 w-5 text-primary"})})]})})}),e.jsx(n,{children:e.jsxs(d,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Uptime"}),e.jsxs("p",{className:"text-2xl font-bold",children:[t.uptime,"%"]})]}),e.jsx(j,{variant:"default",className:"bg-success text-success-foreground",children:"Healthy"})]}),e.jsx(v,{value:t.uptime,className:"mt-3 h-2"})]})}),e.jsx(n,{children:e.jsxs(d,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Error Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[t.error_rate,"%"]})]}),e.jsx(j,{variant:t.error_rate<5?"default":"destructive",children:t.error_rate<5?"Normal":"Elevated"})]}),e.jsx(v,{value:t.error_rate,max:10,className:"mt-3 h-2"})]})})]}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[e.jsxs(n,{children:[e.jsx(m,{children:e.jsx(h,{className:"text-lg",children:"Operational Alerts"})}),e.jsx(d,{className:"space-y-3",children:t.alerts.length>0?t.alerts.map(r=>e.jsxs("div",{className:`flex items-start gap-3 rounded-md border p-3 text-sm ${r.type==="error"?"border-destructive/30 bg-destructive/5":r.type==="warning"?"border-yellow-500/30 bg-yellow-500/5":"border-border bg-muted/30"}`,children:[(()=>{const c={Zap:R,ShieldAlert:L,Activity:T,Ticket:C,DollarSign:_}[r.icon]||$;return e.jsx(c,{className:`mt-0.5 h-4 w-4 shrink-0 ${r.type==="error"?"text-destructive":r.type==="warning"?"text-yellow-600":"text-muted-foreground"}`})})(),e.jsx("span",{children:r.message})]},r.id)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No active alerts."})})]}),e.jsxs(n,{children:[e.jsx(m,{children:e.jsxs(h,{className:"text-lg flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5"})," Recent Sales"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:t.recent_sales.length>0?t.recent_sales.map((r,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:r.user}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.plan," Â· ",r.time]})]}),e.jsxs("span",{className:"font-semibold text-primary",children:["+$",r.amount]})]},l)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No recent sales."})})})]})]}),e.jsxs(n,{children:[e.jsx(m,{children:e.jsxs(h,{className:"text-lg flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"})," Top Geographies (30d)"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-3",children:t.top_geos.map((r,l)=>{const c=Math.round(r.bandwidth_gb/t.top_geos[0].bandwidth_gb*100);return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"font-medium",children:[r.flag," ",r.country,e.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",r.users.toLocaleString()," users)"]})]}),e.jsxs("span",{className:"text-muted-foreground",children:[(r.bandwidth_gb/1e3).toFixed(1)," TB"]})]}),e.jsx("div",{className:"h-2 w-full rounded-full bg-muted",children:e.jsx("div",{className:"h-2 rounded-full bg-primary transition-all",style:{width:`${c}%`}})})]},r.country)})})})]})]})]})}export{H as default};
