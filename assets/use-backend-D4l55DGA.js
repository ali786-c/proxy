import{k as r,j as o,x as n,y as a,z as f,M as q,P as K,U as F,A as m,E as v,C as S,D as b,c as Q}from"./index-DRHqx7nX.js";import{u}from"./useMutation-D4mh0lzF.js";function h(){const e=o();return u({mutationFn:async t=>n.post("/profile",q,t),onSuccess:()=>{e.invalidateQueries({queryKey:["profile"]}),e.invalidateQueries({queryKey:["profile-info"]})}})}function A(){return r({queryKey:["stats"],queryFn:async()=>n.get("/stats",a()),refetchInterval:1e3*60*5})}function w(e="7d"){return r({queryKey:["usage",e],queryFn:async()=>n.get(`/me/usage?range=${encodeURIComponent(e)}`,F),staleTime:1e3*60*5})}function _(){return r({queryKey:["events"],queryFn:async()=>n.get("/me/events",m(v))})}function P(e){return r({queryKey:["orders",e],queryFn:async()=>{const t=e?`/proxies?type=${e}`:"/proxies";return n.get(t,m(a()))}})}function $(){return r({queryKey:["invoices"],queryFn:async()=>n.get("/invoices",m(S))})}function B(){const e=o(),t=r({queryKey:["tickets"],queryFn:async()=>(await n.get("/support/tickets",m(a()))).map(s=>{var y;return{...s,messages:((y=s.messages)==null?void 0:y.map(i=>({...i,sender:i.is_admin_reply?"support":"client",text:i.message,time:i.created_at,attachment_url:i.attachment_url,attachment_name:i.attachment_name})))||[]}})}),d=u({mutationFn:async({subject:c,message:s,priority:y,attachment:i})=>{const l=new FormData;return l.append("subject",c),l.append("message",s),l.append("priority",y),i&&l.append("attachment",i),n.post("/support/tickets",a(),l)},onSuccess:()=>e.invalidateQueries({queryKey:["tickets"]})}),p=u({mutationFn:async({id:c,message:s,attachment:y})=>{const i=new FormData;return i.append("message",s),y&&i.append("attachment",y),n.post(`/support/tickets/${c}/reply`,a(),i)},onSuccess:()=>{e.invalidateQueries({queryKey:["tickets"]}),e.invalidateQueries({queryKey:["admin","tickets"]})}}),g=u({mutationFn:async({id:c,status:s})=>n.post(`/admin/support/tickets/${c}/status`,a(),{status:s}),onSuccess:()=>e.invalidateQueries({queryKey:["tickets"]})});return{...t,createTicket:d,replyTicket:p,updateStatus:g}}function R(){return r({queryKey:["products"],queryFn:async()=>n.get(`/products?_t=${Date.now()}`,m(b))})}function D(){const e=o();return u({mutationFn:async t=>n.post("/proxies/generate",K,t),onSuccess:()=>{e.invalidateQueries({queryKey:["orders"]}),e.invalidateQueries({queryKey:["profile"]}),e.invalidateQueries({queryKey:["subuser-status"]})}})}function T(){return r({queryKey:["referrals"],queryFn:async()=>Q.getReferralStats()})}function U(){const e=o(),t=r({queryKey:["admin","tickets"],queryFn:async()=>(await n.get("/admin/support/tickets",m(a()))).map(s=>{var y,i;return{id:String(s.id),user:((y=s.user)==null?void 0:y.email)||"Unknown",subject:s.subject,status:s.status,priority:s.priority==="normal"?"medium":s.priority,created_at:s.created_at,updated_at:s.updated_at,messages:((i=s.messages)==null?void 0:i.map(l=>({sender:l.is_admin_reply?"support":"client",text:l.message,time:l.created_at,attachment_url:l.attachment_url,attachment_name:l.attachment_name})))||[]}})}),d=u({mutationFn:async({id:c,message:s,attachment:y})=>{const i=new FormData;return i.append("message",s),y&&i.append("attachment",y),n.post(`/admin/support/tickets/${c}/reply`,q,i)},onSuccess:()=>{e.invalidateQueries({queryKey:["admin","tickets"]}),e.invalidateQueries({queryKey:["tickets"]})}}),p=u({mutationFn:async({id:c,status:s})=>n.post(`/admin/support/tickets/${c}/status`,q,{status:s}),onSuccess:()=>e.invalidateQueries({queryKey:["admin","tickets"]})}),g=u({mutationFn:async c=>{await n.delete(`/admin/support/tickets/${c}`,q)},onSuccess:()=>{e.invalidateQueries({queryKey:["admin","tickets"]}),e.invalidateQueries({queryKey:["tickets"]})}});return{...t,replyTicket:d,updateStatus:p,deleteTicket:g}}function x(e){return r({queryKey:["admin","payment-gateways",e],queryFn:async()=>{const t=e?"/admin/payment-gateways?refresh=true":"/admin/payment-gateways";return n.get(t,a())}})}function I(){return r({queryKey:["blog","posts"],queryFn:async()=>n.get("/blog",m(a()))})}function j(e){return r({queryKey:["blog","post",e],queryFn:async()=>n.get(`/blog/${e}`,a()),enabled:!!e})}function E(){return r({queryKey:["admin","blog"],queryFn:async()=>n.get("/admin/blog",m(a()))})}function G(){const e=o();return u({mutationFn:t=>n.post("/admin/blog",a(),t),onSuccess:()=>e.invalidateQueries({queryKey:["admin","blog"]})})}function M(){const e=o();return u({mutationFn:({id:t,data:d})=>n.put(`/admin/blog/${t}`,a(),d),onSuccess:()=>e.invalidateQueries({queryKey:["admin","blog"]})})}function z(){const e=o();return u({mutationFn:t=>n.delete(`/admin/blog/${t}`,a()),onSuccess:()=>e.invalidateQueries({queryKey:["admin","blog"]})})}function H(){const e=o();return u({mutationFn:({id:t,is_draft:d})=>n.post(`/admin/blog/${t}/publish`,a(),{is_draft:d}),onSuccess:()=>{e.invalidateQueries({queryKey:["admin","blog"]}),e.invalidateQueries({queryKey:["blog","posts"]})}})}function L(){return r({queryKey:["admin","blog","automation"],queryFn:()=>n.get("/admin/blog/automation",a())})}function J(){const e=o();return u({mutationFn:t=>n.post("/admin/blog/automation/settings",a(),t),onSuccess:()=>e.invalidateQueries({queryKey:["admin","blog","automation"]})})}function O(){const e=o();return u({mutationFn:t=>n.post("/admin/blog/automation/keywords",a(),t),onSuccess:()=>e.invalidateQueries({queryKey:["admin","blog","automation"]})})}function N(){const e=o();return u({mutationFn:t=>n.delete(`/admin/blog/automation/keywords/${t}`,a()),onSuccess:()=>e.invalidateQueries({queryKey:["admin","blog","automation"]})})}function V(){const e=o();return u({mutationFn:t=>n.post("/admin/blog/automation/trigger",a(),t||{}),onSuccess:()=>{e.invalidateQueries({queryKey:["admin","blog"]}),e.invalidateQueries({queryKey:["blog","posts"]}),e.invalidateQueries({queryKey:["admin","blog","automation"]})}})}function W(){return r({queryKey:["admin","alerts","config"],queryFn:async()=>n.get("/admin/alerts/config",a())})}function X(){const e=o();return u({mutationFn:t=>n.patch("/admin/alerts/config",a(),t),onSuccess:()=>e.invalidateQueries({queryKey:["admin","alerts","config"]})})}function Y(e){return r({queryKey:["admin","fraud","signals",e],queryFn:async()=>{const t=e!==void 0?`/admin/fraud/signals?resolved=${e}`:"/admin/fraud/signals";return n.get(t,m(a()))}})}function Z(){return r({queryKey:["admin","fraud","risk-scores"],queryFn:async()=>n.get("/admin/fraud/risk-scores",m(a()))})}function ee(){return r({queryKey:["admin","fraud","login-history"],queryFn:async()=>n.get("/admin/fraud/login-history",m(a()))})}function te(){const e=o();return u({mutationFn:t=>n.put(`/admin/fraud/signals/${t}/resolve`,a()),onSuccess:()=>{e.invalidateQueries({queryKey:["admin","fraud","signals"]}),e.invalidateQueries({queryKey:["admin-stats"]})}})}function ne(){return r({queryKey:["admin","referrals","stats"],queryFn:async()=>n.get("/admin/referrals/stats",a())})}function ae(e,t=1){return r({queryKey:["admin","referrals","earnings",e,t],queryFn:async()=>{const d=new URLSearchParams;e&&d.append("status",e),t>1&&d.append("page",t.toString());const p=d.toString(),g=p?`/admin/referrals/earnings?${p}`:"/admin/referrals/earnings";return n.get(g,a())}})}function se(){const e=o();return u({mutationFn:async t=>n.post("/admin/referrals/influencer-rate",q,t),onSuccess:()=>{e.invalidateQueries({queryKey:["admin","users"]}),e.invalidateQueries({queryKey:["admin","referrals","stats"]})}})}function re(){return r({queryKey:["auth","2fa","setup"],queryFn:()=>f.setup(),staleTime:0,retry:!1})}function ue(){const e=o();return u({mutationFn:t=>f.confirm(t),onSuccess:()=>{e.invalidateQueries({queryKey:["profile"]}),e.invalidateQueries({queryKey:["profile-info"]})}})}function ie(){const e=o();return u({mutationFn:t=>f.disable(t),onSuccess:()=>{e.invalidateQueries({queryKey:["profile"]}),e.invalidateQueries({queryKey:["profile-info"]})}})}function oe(e=!1){return r({queryKey:["auth","2fa","recovery-codes"],queryFn:()=>f.getRecoveryCodes(),enabled:e})}export{W as A,X as B,x as C,U as D,Y as E,Z as F,ee as G,te as H,ne as I,ae as J,se as K,I as a,j as b,w as c,A as d,D as e,P as f,_ as g,$ as h,T as i,B as j,re as k,ue as l,ie as m,oe as n,h as o,E as p,G as q,M as r,z as s,H as t,R as u,L as v,J as w,O as x,N as y,V as z};
