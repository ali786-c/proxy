import{c as K,r as l,V as Q,U as L,j as e,I as j,a as o,t as n,Y as Z,q as J,Z as ee,e as se}from"./index-Rwiql0M9.js";import{S as te}from"./SEOHead-BMZyVndU.js";import{C as d,a as m,b as x,d as k,c as p}from"./card-tIXyLfJ6.js";import{T as ae,a as le,b as M,c as y,d as ne,e as f}from"./table-BKtTxP6A.js";import{B as C}from"./badge-BoUN-fu7.js";import{L as N}from"./label-DVuobNe6.js";import{S as ie}from"./switch-WwzWjvgL.js";import{c as v}from"./dashboard-CmRBWwxh.js";import{C as ce}from"./circle-alert-D_ODNWHd.js";import{B as R}from"./bitcoin-94ZT5zuj.js";import{I as re}from"./info-CVNTn8JM.js";import{C as oe}from"./copy-D7qHjtfP.js";import{R as de}from"./refresh-cw-CIoqVze4.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=K("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]),xe=.22,i=5,pe={paid:"default",pending:"secondary",failed:"destructive"},he=[{id:"btc",name:"Bitcoin (BTC)",icon:"₿",placeholder:"BTC wallet address — coming soon"},{id:"ltc",name:"Litecoin (LTC)",icon:"Ł",placeholder:"LTC wallet address — coming soon"},{id:"sol",name:"Solana (SOL)",icon:"◎",placeholder:"SOL wallet address — coming soon"},{id:"trx",name:"TRON (TRX)",icon:"⧫",placeholder:"TRX wallet address — coming soon"},{id:"bnb",name:"Binance (BNB)",icon:"♦",placeholder:"BNB wallet address — coming soon"}];function Be(){const[w]=l.useState("residential"),{gateways:h,autoTopUpEnabled:U}=Q(),[T,F]=l.useState(!1),[I,V]=l.useState("50"),[O,_]=l.useState("5"),[a,$]=l.useState(null),[A,D]=l.useState("10"),[S,q]=l.useState(""),[B,P]=l.useState(!1),{data:H}=L({queryKey:["plans"],queryFn:()=>v.getPlans()}),{data:W}=L({queryKey:["invoices"],queryFn:()=>v.getInvoices()}),c=parseFloat(A)||0,r=a==="crypto",E=r?0:c*xe,g=c+E,b=c<i,Y=s=>{n({title:"Product Selected",description:`Switching to ${s}.`})},z=async()=>{if(b){n({title:"Minimum not met",description:`Minimum purchase is €${i}.`,variant:"destructive"});return}if(!a){n({title:"Select a payment method",description:"Please choose how you'd like to pay.",variant:"destructive"});return}if(r){n({title:"Crypto Payment",description:"Send the exact amount to the wallet address shown below. Your balance will be credited once confirmed."});return}if(a==="stripe"){P(!0);try{const{url:s}=await v.createCheckout(w,S||void 0);window.location.href=s}catch(s){n({title:"Checkout Error",description:s.message,variant:"destructive"})}finally{P(!1)}}else n({title:`Pay with ${a}`,description:`Redirecting to ${a} checkout for €${g.toFixed(2)}...`})},G=[{id:"stripe",name:"Card (Stripe)",subtitle:"Credit/Debit Card",icon:Z,vatLabel:"+22% VAT"},{id:"paypal",name:"PayPal",subtitle:"PayPal Balance",icon:J,vatLabel:"+22% VAT"},{id:"crypto",name:"Crypto",subtitle:"BTC, LTC, SOL, TRX, BNB",icon:R,vatLabel:"No VAT"}],X=h.stripe||h.paypal||h.crypto;return e.jsxs(e.Fragment,{children:[e.jsx(te,{title:"Account & Billing",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Account & Billing"}),e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsxs(x,{className:"flex items-center gap-2 text-lg",children:[e.jsx(me,{className:"h-5 w-5"})," Add Balance"]}),e.jsxs(k,{children:["Minimum purchase: €",i,". 22% VAT applies to card & PayPal payments. Crypto is VAT-free."]})]}),e.jsxs(p,{className:"space-y-5",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 max-w-lg",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(N,{children:"Amount (€)"}),e.jsx(j,{type:"number",value:A,onChange:s=>D(s.target.value),min:i,step:"1",placeholder:`Min €${i}`}),b&&c>0&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(ce,{className:"h-3 w-3"})," Minimum purchase is €",i]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(N,{children:"Promo Code (optional)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{placeholder:"WELCOME20",value:S,onChange:s=>q(s.target.value)}),e.jsx(o,{variant:"outline",size:"sm",className:"shrink-0",onClick:()=>n({title:"Coupon Applied",description:"Discount applied to your balance."}),children:"Apply"})]})]})]}),!X&&e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No payment methods are currently available. Please contact support."}),e.jsx("div",{className:"grid gap-3 sm:grid-cols-3",children:G.map(s=>{const t=h[s.id],u=a===s.id;return e.jsxs(o,{variant:u?"default":"outline",className:`h-auto py-4 flex-col gap-1 relative ${t?"":"opacity-40 cursor-not-allowed"}`,disabled:!t,onClick:()=>$(s.id),children:[e.jsx(s.icon,{className:"h-6 w-6"}),e.jsx("span",{className:"font-semibold",children:s.name}),e.jsx("span",{className:"text-[11px] font-normal opacity-80",children:s.subtitle}),e.jsx(C,{variant:s.id==="crypto"?"default":"secondary",className:"text-[10px] mt-1",children:s.vatLabel}),!t&&e.jsx("span",{className:"text-[10px] font-normal",children:"Not available"})]},s.id)})}),a&&c>=i&&e.jsxs("div",{className:"rounded-lg border bg-muted/30 p-4 max-w-sm space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold",children:"Order Summary"}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["€",c.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:["VAT (22%)",r&&e.jsx(re,{className:"h-3 w-3 text-muted-foreground"})]}),e.jsx("span",{className:r?"line-through text-muted-foreground":"",children:r?"€0.00 — exempt":`€${E.toFixed(2)}`})]}),e.jsx(ee,{}),e.jsxs("div",{className:"flex justify-between text-sm font-bold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["€",g.toFixed(2)]})]}),e.jsxs(o,{className:"w-full mt-2",onClick:z,disabled:b||B,children:[B?e.jsx(Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):null,r?"Show Wallet Addresses":`Pay €${g.toFixed(2)}`]})]}),a==="crypto"&&e.jsxs(d,{className:"border-dashed",children:[e.jsxs(m,{className:"pb-2",children:[e.jsxs(x,{className:"text-sm flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"})," Crypto Payment — Send Exact Amount"]}),e.jsx(k,{className:"text-xs",children:"No VAT on crypto payments. Send the exact EUR-equivalent in crypto. Balance credited after 1 confirmation."})]}),e.jsxs(p,{className:"space-y-3",children:[he.map(s=>e.jsxs("div",{className:"flex items-center gap-3 rounded-md border p-3",children:[e.jsx("span",{className:"text-lg w-6 text-center",children:s.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s.placeholder})]}),e.jsx(o,{variant:"ghost",size:"icon",className:"h-7 w-7 opacity-40",disabled:!0,children:e.jsx(oe,{className:"h-3.5 w-3.5"})})]},s.id)),e.jsx("p",{className:"text-[11px] text-muted-foreground text-center",children:"Wallet addresses will be configured by the administrator. Contact support for manual crypto payments."})]})]})]})]}),U&&e.jsxs(d,{children:[e.jsx(m,{children:e.jsxs(x,{className:"flex items-center gap-2 text-lg",children:[e.jsx(de,{className:"h-5 w-5"})," Auto Top-Up"]})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Enable Auto Top-Up"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically add balance when it drops below the threshold"})]}),e.jsx(ie,{checked:T,onCheckedChange:F})]}),T&&e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(N,{children:"Min Balance Threshold (€)"}),e.jsx(j,{type:"number",value:O,onChange:s=>_(s.target.value)})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(N,{children:"Top-Up Amount (€)"}),e.jsx(j,{type:"number",value:I,onChange:s=>V(s.target.value)})]})]})]})]}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-3",children:(H||[]).map(s=>{const t=s.id===w;return e.jsxs(d,{className:t?"border-primary ring-2 ring-primary/20":"",children:[e.jsx(m,{className:"pb-2",children:e.jsxs(x,{className:"flex items-center justify-between text-lg",children:[s.name,t&&e.jsx(C,{children:"Active"})]})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("p",{className:"text-3xl font-bold",children:["€",(s.price_cents/100).toFixed(2),e.jsxs("span",{className:"text-base font-normal text-muted-foreground",children:["/",(s.id==="datacenter","GB")]})]}),e.jsx("ul",{className:"space-y-1.5",children:s.features.map(u=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[e.jsx(se,{className:"mt-0.5 h-4 w-4 shrink-0 text-primary"}),u]},u))}),e.jsx(o,{variant:t?"outline":"default",className:"w-full",disabled:t,onClick:()=>Y(s.id),children:t?"Active Product":"Switch Product"})]})]},s.id)})}),e.jsxs(d,{children:[e.jsx(m,{children:e.jsx(x,{className:"text-lg",children:"Recent Invoices"})}),e.jsx(p,{className:"p-0",children:e.jsxs(ae,{children:[e.jsx(le,{children:e.jsxs(M,{children:[e.jsx(y,{children:"Period"}),e.jsx(y,{children:"Amount"}),e.jsx(y,{children:"Status"}),e.jsx(y,{className:"text-right",children:"Date"})]})}),e.jsx(ne,{children:(W||[]).map(s=>e.jsxs(M,{children:[e.jsx(f,{className:"font-medium",children:s.period}),e.jsxs(f,{children:["€",(s.amount_cents/100).toFixed(2)]}),e.jsx(f,{children:e.jsx(C,{variant:pe[s.status]??"secondary",children:s.status})}),e.jsx(f,{className:"text-right text-sm text-muted-foreground",children:new Date(s.created_at).toLocaleDateString()})]},s.id))})]})})]})]})]})}export{Be as default};
