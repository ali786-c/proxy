import{ab as y,j as e,b as f,t as l}from"./index-AkMOU31n.js";import{S as b}from"./SEOHead-Dp93D3qd.js";import{C,a as N,b as T,c as q}from"./card-BMBKLJ43.js";import{B as v}from"./badge-BhNyuZGe.js";import{S as P}from"./switch-CNwm9Cj0.js";import{T as S,a as k,b as d,c as n,d as w,e as o}from"./table-ColB3Miv.js";import{u as m}from"./useQuery-CwukAndk.js";import{u as B}from"./useMutation-DV0x6ne4.js";function z(){const x=y(),{data:r}=m({queryKey:["permissions"],queryFn:async()=>[]}),{data:t}=m({queryKey:["role-permissions"],queryFn:async()=>[]}),u=B({mutationFn:async({role:a,permissionId:s,enabled:i})=>{console.log("Mock toggle permission",{role:a,permissionId:s,enabled:i})},onSuccess:()=>{x.invalidateQueries({queryKey:["role-permissions"]}),l({title:"Permission Updated"})},onError:a=>l({title:"Error",description:a.message,variant:"destructive"})}),h=(a,s)=>(t==null?void 0:t.some(i=>i.role===a&&i.permission_id===s))??!1,p=[...new Set((r==null?void 0:r.map(a=>a.category))??[])],c=["admin","client"],j={proxy:"ðŸŒ",billing:"ðŸ’³",support:"ðŸŽ§",users:"ðŸ‘¥",api:"ðŸ”‘",audit:"ðŸ“‹",settings:"âš™ï¸",org:"ðŸ¢"};return e.jsxs(e.Fragment,{children:[e.jsx(b,{title:"Admin â€” Permissions",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(f,{className:"h-6 w-6"})," Role Permissions (RBAC)"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage granular permissions for each role."})]}),p.map(a=>e.jsxs(C,{children:[e.jsx(N,{children:e.jsxs(T,{className:"text-lg flex items-center gap-2",children:[e.jsx("span",{children:j[a]??"ðŸ“¦"}),e.jsx("span",{className:"capitalize",children:a})]})}),e.jsx(q,{className:"p-0",children:e.jsxs(S,{children:[e.jsx(k,{children:e.jsxs(d,{children:[e.jsx(n,{children:"Permission"}),e.jsx(n,{children:"Description"}),c.map(s=>e.jsx(n,{className:"text-center capitalize",children:s},s))]})}),e.jsx(w,{children:r==null?void 0:r.filter(s=>s.category===a).map(s=>e.jsxs(d,{children:[e.jsx(o,{children:e.jsx(v,{variant:"outline",className:"font-mono text-xs",children:s.name})}),e.jsx(o,{className:"text-sm text-muted-foreground",children:s.description}),c.map(i=>e.jsx(o,{className:"text-center",children:e.jsx(P,{checked:h(i,s.id),onCheckedChange:g=>u.mutate({role:i,permissionId:s.id,enabled:g}),disabled:i==="admin"})},i))]},s.id))})]})})]},a))]})]})}export{z as default};
