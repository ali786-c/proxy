import{c as N,r as g,j as e,I as v,B as m,E as b,t as w}from"./index-AMVWoFUG.js";import{S as C}from"./SEOHead-CHZvE3pk.js";import{C as H,a as T,b as L,c as P}from"./card-DpvZaonW.js";import{T as S,a as $,b as h,c as r,d as k,e as i}from"./table-DIVOPaxd.js";import{B as p}from"./badge-GnBnn40f.js";import{b as B}from"./use-backend-CL8kXeJX.js";import{S as M}from"./search-CzyunPSc.js";import{f as R}from"./format-sbWH3_uq.js";import{C as D}from"./copy-BOdcT_iN.js";import"./useQuery-S4gJ6zu_.js";import"./useMutation-CVAT4hy_.js";import"./api-BTF2QDx4.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=N("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);function K(){const{data:l,isLoading:j}=B(),[d,u]=g.useState(""),c=l==null?void 0:l.filter(s=>{var a,t;return((t=(a=s.product)==null?void 0:a.name)==null?void 0:t.toLowerCase().includes(d.toLowerCase()))||s.id.toString().includes(d)}),f=s=>{const a=s.map(t=>`${t.host}:${t.port}:${t.username}:${t.password}`).join(`
`);navigator.clipboard.writeText(a),w({title:"Copied",description:"Proxies copied to clipboard."})},y=s=>{const a=s.proxies.map(n=>`${n.host}:${n.port}:${n.username}:${n.password}`).join(`
`),t=new Blob([a],{type:"text/plain"}),o=URL.createObjectURL(t),x=document.createElement("a");x.href=o,x.download=`proxies_order_${s.id}.txt`,x.click(),URL.revokeObjectURL(o)};return e.jsxs(e.Fragment,{children:[e.jsx(C,{title:"Proxy History",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(E,{className:"h-6 w-6 text-primary"}),"Proxy History"]}),e.jsxs("div",{className:"relative w-64",children:[e.jsx(M,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(v,{placeholder:"Search orders...",className:"pl-9",value:d,onChange:s=>u(s.target.value)})]})]}),e.jsxs(H,{children:[e.jsx(T,{children:e.jsx(L,{className:"text-lg",children:"Generated Proxy Orders"})}),e.jsx(P,{children:j?e.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Loading history..."}):(c==null?void 0:c.length)===0?e.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"No orders found."}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(h,{children:[e.jsx(r,{children:"Order ID"}),e.jsx(r,{children:"Product"}),e.jsx(r,{children:"Quantity"}),e.jsx(r,{children:"Date"}),e.jsx(r,{children:"Status"}),e.jsx(r,{className:"text-right",children:"Actions"})]})}),e.jsx(k,{children:c.map(s=>{var a,t,o;return e.jsxs(h,{children:[e.jsxs(i,{className:"font-medium text-xs",children:["#",s.id]}),e.jsx(i,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:(a=s.product)==null?void 0:a.name}),e.jsx("span",{className:"text-xs text-muted-foreground uppercase",children:(t=s.product)==null?void 0:t.type})]})}),e.jsx(i,{children:e.jsxs(p,{variant:"secondary",children:[((o=s.proxies)==null?void 0:o.length)||0," Proxies"]})}),e.jsx(i,{className:"text-xs text-muted-foreground",children:R(new Date(s.created_at),"MMM d, yyyy HH:mm")}),e.jsx(i,{children:e.jsx(p,{variant:s.status==="active"?"success":"secondary",className:"capitalize",children:s.status})}),e.jsx(i,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>f(s.proxies),title:"Copy All",children:e.jsx(D,{className:"h-4 w-4"})}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>y(s),title:"Download TXT",children:e.jsx(b,{className:"h-4 w-4"})})]})})]},s.id)})})]})})})]})]})]})}export{K as default};
