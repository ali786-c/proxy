import{c as _,r as a,j as e,a as l,F as se,aX as Ue,I as h,z as ae,E as te,J as le,K as ie,N as g,k as ne,G as Oe,t as j}from"./index-BeYWUc0b.js";import{S as Ve}from"./SEOHead-pmtGgQ8x.js";import{C as d,c as o}from"./card-B5UOakCf.js";import{T as Re,a as We,b as I,c as re}from"./tabs-wujR6Wut.js";import{L as n}from"./label-BtEyUhVW.js";import{T as ce}from"./textarea-C5NJP2je.js";import{T as de,a as oe,b as p,c as r,d as he,e as i}from"./table-DgkavPbA.js";import{D as xe,b as me,c as ue,d as ge,g as je,e as pe}from"./dialog-Cffnlhjv.js";import{S as qe}from"./switch-BgZO59oF.js";import{k as Ye,l as Ze,m as Je,n as Qe,o as Xe,p as $e,q as es,r as ss,s as as,t as ts}from"./use-backend-DKfEqBtt.js";import{P as fe}from"./plus-XGeDSIgw.js";import{C as Ne}from"./clock-D2RXjpXL.js";import{E as ls}from"./eye-BvPH47It.js";import{S as ve}from"./search-BkkNA4U0.js";import{L as f}from"./loader-circle-C6EZ6HXl.js";import{T as ye}from"./trash-2-Cv7ofXLE.js";import{K as is}from"./key-CQ-oIGum.js";import{S as G}from"./save-C0uNQL0i.js";import{Z as ns}from"./zap-CewH3AQe.js";import"./useMutation-BOgpOETL.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=_("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=_("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=_("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=_("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),os={draft:"outline",published:"default"};function Ms(){var Y,Z,J,Q,X,$;const[be,Se]=a.useState("posts"),[L,Ce]=a.useState("all"),[D,Pe]=a.useState(""),[ke,N]=a.useState(!1),[Ae,v]=a.useState(!1),[Te,z]=a.useState(null),[x,y]=a.useState(""),[m,w]=a.useState(""),[b,S]=a.useState(""),{data:_e=[],isLoading:Le}=Ye(),M=Ze(),B=Je(),De=Qe(),C=Xe(),{data:t={keywords:[],settings:{}},isLoading:hs}=$e(),P=es(),E=ss(),F=as(),u=ts(),[k,K]=a.useState(""),[Me,xs]=a.useState("General"),[H,U]=a.useState(""),[O,V]=a.useState(""),[Be,R]=a.useState(0),W=["Selecting the best keyword...","Contacting Gemini 2.5 Flash...","Writing high-quality content...","Formatting HTML & SEO optimizations...","Saving to database..."];a.useEffect(()=>{let s;return u.isPending?(R(0),s=setInterval(()=>{R(c=>(c+1)%W.length)},3e3)):clearInterval(s),()=>clearInterval(s)},[u.isPending]),a.useEffect(()=>{t.settings&&(U(t.settings.gemini_api_key||""),V(t.settings.gemini_model||"gemini-2.5-flash"))},[t.settings]);const A=_e.map(s=>({...s,status:s.is_draft?"draft":"published"})),Ie=()=>{M.mutate({title:x,content:m,image_url:b},{onSuccess:()=>{N(!1),T(),j({title:"Draft created",description:"Your article has been saved as a draft."})}})},Ge=()=>{B.mutate({id:Te.id,data:{title:x,content:m,image_url:b}},{onSuccess:()=>{v(!1),T(),j({title:"Post updated"})}})},ze=s=>{confirm("Are you sure you want to delete this post?")&&De.mutate(s,{onSuccess:()=>j({title:"Post deleted"})})},Ee=(s,c)=>{C.mutate({id:s,is_draft:!c},{onSuccess:()=>j({title:c?"Article Published":"Moved to Drafts",description:c?"The article is now live on the blog.":"The article has been hidden."})})},Fe=s=>{z(s),y(s.title),w(s.content),S(s.image_url||""),v(!0)},T=()=>{y(""),w(""),S(""),z(null)},q=A.filter(s=>!(L!=="all"&&s.status!==L||D&&!s.title.toLowerCase().includes(D.toLowerCase()))),Ke=A.filter(s=>s.status==="draft").length,He=A.filter(s=>s.status==="published").length;return e.jsxs(e.Fragment,{children:[e.jsx(Ve,{title:"Admin — Blog Management",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Blog Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage articles, news, and updates for your users."})]}),e.jsxs(l,{onClick:()=>N(!0),className:"gap-2",children:[e.jsx(fe,{className:"h-4 w-4"})," New Article"]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-4",children:[e.jsx(d,{children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2.5",children:e.jsx(se,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:A.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Posts"})]})]})})}),e.jsx(d,{children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2.5",children:e.jsx(Ne,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:Ke}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Drafts"})]})]})})}),e.jsx(d,{children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2.5",children:e.jsx(cs,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:He}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Published"})]})]})})}),e.jsx(d,{children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2.5",children:e.jsx(ls,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:"—"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Views"})]})]})})})]}),e.jsxs(Re,{value:be,onValueChange:Se,children:[e.jsxs(We,{children:[e.jsxs(I,{value:"posts",className:"gap-1.5",children:[e.jsx(se,{className:"h-3.5 w-3.5"})," Articles"]}),e.jsxs(I,{value:"automation",className:"gap-1.5",children:[e.jsx(we,{className:"h-3.5 w-3.5"})," Automation"]}),e.jsxs(I,{value:"channels",className:"gap-1.5 disabled",disabled:!0,children:[e.jsx(Ue,{className:"h-3.5 w-3.5"})," Channels (Coming Soon)"]})]}),e.jsxs(re,{value:"posts",className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ve,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(h,{placeholder:"Search posts…",value:D,onChange:s=>Pe(s.target.value),className:"pl-9"})]}),e.jsxs(ae,{value:L,onValueChange:Ce,children:[e.jsx(te,{className:"w-32",children:e.jsx(le,{})}),e.jsxs(ie,{children:[e.jsx(g,{value:"all",children:"All"}),e.jsx(g,{value:"draft",children:"Drafts"}),e.jsx(g,{value:"published",children:"Published"})]})]})]}),e.jsx(d,{children:e.jsx(o,{className:"p-0",children:e.jsxs(de,{children:[e.jsx(oe,{children:e.jsxs(p,{children:[e.jsx(r,{children:"Title"}),e.jsx(r,{children:"Author"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Date"}),e.jsx(r,{className:"text-right",children:"Actions"})]})}),e.jsxs(he,{children:[q.map(s=>{var c,ee;return e.jsxs(p,{className:"group",children:[e.jsx(i,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground truncate max-w-[300px]",children:s.slug})]})}),e.jsx(i,{children:e.jsx("span",{className:"text-sm font-medium",children:((c=s.author)==null?void 0:c.name)||"System"})}),e.jsx(i,{children:e.jsx(ne,{variant:os[s.status]??"outline",className:"text-[10px] uppercase",children:s.status})}),e.jsx(i,{className:"text-sm text-muted-foreground",children:new Date(s.published_at||s.created_at).toLocaleDateString()}),e.jsx(i,{children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(l,{size:"icon",variant:"ghost",onClick:()=>Fe(s),className:"h-8 w-8",children:e.jsx(rs,{className:"h-3.5 w-3.5"})}),e.jsx(l,{size:"sm",variant:s.is_draft?"default":"outline",onClick:()=>Ee(s.id,s.is_draft),disabled:C.isPending,className:"h-8 gap-1",children:C.isPending&&((ee=C.variables)==null?void 0:ee.id)===s.id?e.jsx(f,{className:"h-3 w-3 animate-spin"}):s.is_draft?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"h-3 w-3"})," Publish"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"h-3 w-3"})," Unpublish"]})}),e.jsx(l,{size:"icon",variant:"ghost",onClick:()=>ze(s.id),className:"h-8 w-8 text-destructive hover:text-destructive",children:e.jsx(ye,{className:"h-3.5 w-3.5"})})]})})]},s.id)}),q.length===0&&e.jsx(p,{children:e.jsx(i,{colSpan:5,className:"h-32 text-center text-muted-foreground",children:Le?e.jsx(f,{className:"h-6 w-6 animate-spin mx-auto"}):"No posts found."})})]})]})})})]}),e.jsxs(re,{value:"automation",className:"mt-4 space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsx(d,{children:e.jsxs(o,{className:"pt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 font-semibold text-lg",children:[e.jsx(is,{className:"h-5 w-5 text-primary"}),"Gemini AI Configuration"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{children:"Google Gemini API Key"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(h,{type:"password",name:"gemini_api_key_field",autoComplete:"new-password",placeholder:"AIza...",value:H,onChange:s=>U(s.target.value)})}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Get your key from Google AI Studio"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{children:"Model Selection"}),e.jsxs(ae,{value:O,onValueChange:V,children:[e.jsx(te,{children:e.jsx(le,{})}),e.jsxs(ie,{children:[e.jsx(g,{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash (Fash & Verified)"}),e.jsx(g,{value:"gemini-1.5-flash",children:"Gemini 1.5 Flash (Fash & Cheap)"}),e.jsx(g,{value:"gemini-1.5-pro",children:"Gemini 1.5 Pro (High Quality)"})]})]})]}),e.jsx("div",{className:"pt-2",children:e.jsxs(l,{size:"sm",className:"w-full gap-2",onClick:()=>P.mutate({gemini_api_key:H,gemini_model:O},{onSuccess:()=>j({title:"Settings Saved",description:"Gemini configuration updated successfully."})}),disabled:P.isPending,children:[P.isPending?e.jsx(f,{className:"h-4 w-4 animate-spin"}):e.jsx(G,{className:"h-4 w-4"}),"Save Settings"]})}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{children:"Daily Auto-Posting"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically post 1 article every day"})]}),e.jsx(qe,{checked:(Y=t.settings)==null?void 0:Y.auto_posting_enabled,onCheckedChange:s=>P.mutate({auto_blog_enabled:s})})]})]})]})}),e.jsx(d,{children:e.jsxs(o,{className:"pt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 font-semibold text-lg",children:[e.jsx(ns,{className:"h-5 w-5 text-yellow-500"}),"Instant Content Generation"]}),e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Push the button below to immediately generate and publish a professional blog post using your next available keyword."}),e.jsxs(l,{className:"w-full h-12 gap-2 text-md font-bold transition-all",variant:"secondary",disabled:u.isPending||!((Z=t.settings)!=null&&Z.gemini_api_key)||!((J=t.settings)!=null&&J.gemini_api_key.startsWith("AIza")),onClick:()=>{u.mutate({},{onSuccess:s=>j({title:"Success!",description:s.message})})},children:[u.isPending?e.jsx(f,{className:"h-5 w-5 animate-spin"}):e.jsx(ds,{className:"h-5 w-5"}),"Generate & Publish Now"]}),u.isPending&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-primary animate-pulse py-1",children:[e.jsx(we,{className:"h-3 w-3"}),e.jsx("span",{className:"text-[11px] font-medium italic",children:W[Be]})]}),(!((Q=t.settings)!=null&&Q.gemini_api_key)||!((X=t.settings)!=null&&X.gemini_api_key.startsWith("AIza")))&&e.jsx("p",{className:"text-center text-xs text-destructive",children:"Please configure a valid API key first (starts with AIza)."})]})})]}),e.jsx(d,{children:e.jsxs(o,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 font-semibold text-lg",children:[e.jsx(ve,{className:"h-5 w-5 text-primary"}),"Target Keywords & Topics"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{placeholder:"e.g. Benefits of Residential Proxies",className:"w-64",value:k,onChange:s=>K(s.target.value)}),e.jsxs(l,{onClick:()=>{k&&E.mutate({keyword:k,category:Me},{onSuccess:()=>K("")})},disabled:E.isPending||!k,children:[e.jsx(fe,{className:"h-4 w-4 mr-2"})," Add"]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(de,{children:[e.jsx(oe,{children:e.jsxs(p,{children:[e.jsx(r,{children:"Topic / Keyword"}),e.jsx(r,{children:"Category"}),e.jsx(r,{children:"Last Used"}),e.jsx(r,{className:"text-right",children:"Action"})]})}),e.jsxs(he,{children:[($=t.keywords)==null?void 0:$.map(s=>e.jsxs(p,{children:[e.jsx(i,{className:"font-medium",children:s.keyword}),e.jsx(i,{children:e.jsx(ne,{variant:"outline",className:"text-[10px]",children:s.category||"General"})}),e.jsx(i,{className:"text-xs text-muted-foreground",children:s.last_used_at?new Date(s.last_used_at).toLocaleDateString():"Never"}),e.jsx(i,{className:"text-right",children:e.jsx(l,{size:"icon",variant:"ghost",className:"h-8 w-8 text-destructive",onClick:()=>F.mutate(s.id),disabled:F.isPending,children:e.jsx(ye,{className:"h-3.5 w-3.5"})})})]},s.id)),(!t.keywords||t.keywords.length===0)&&e.jsx(p,{children:e.jsx(i,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No keywords added yet. Add some to start auto-blogging."})})]})]})})]})})]})]}),e.jsx(xe,{open:ke,onOpenChange:s=>{N(s),s||T()},children:e.jsxs(me,{className:"max-w-2xl",children:[e.jsxs(ue,{children:[e.jsx(ge,{children:"Create New Article"}),e.jsx(je,{children:"Draft your post. You can publish it once it's saved."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Title"}),e.jsx(h,{value:x,onChange:s=>y(s.target.value),placeholder:"Article headline..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Hero Image URL"}),e.jsx(h,{value:b,onChange:s=>S(s.target.value),placeholder:"https://..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Content (HTML/Text)"}),e.jsx(ce,{value:m,onChange:s=>w(s.target.value),placeholder:"Write your article content here...",className:"min-h-[250px]"})]})]}),e.jsxs(pe,{children:[e.jsx(l,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),e.jsxs(l,{onClick:Ie,disabled:M.isPending||!x||!m,children:[M.isPending?e.jsx(f,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(G,{className:"h-4 w-4 mr-2"}),"Save Draft"]})]})]})}),e.jsx(xe,{open:Ae,onOpenChange:s=>{v(s),s||T()},children:e.jsxs(me,{className:"max-w-2xl",children:[e.jsxs(ue,{children:[e.jsx(ge,{children:"Edit Article"}),e.jsx(je,{children:"Update the content of your post."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Title"}),e.jsx(h,{value:x,onChange:s=>y(s.target.value),placeholder:"Article headline..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Hero Image URL"}),e.jsx(h,{value:b,onChange:s=>S(s.target.value),placeholder:"https://..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Content (HTML/Text)"}),e.jsx(ce,{value:m,onChange:s=>w(s.target.value),placeholder:"Write your article content here...",className:"min-h-[250px]"})]})]}),e.jsxs(pe,{children:[e.jsx(l,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),e.jsxs(l,{onClick:Ge,disabled:B.isPending||!x||!m,children:[B.isPending?e.jsx(f,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(G,{className:"h-4 w-4 mr-2"}),"Update Post"]})]})]})})]})]})}export{Ms as default};
