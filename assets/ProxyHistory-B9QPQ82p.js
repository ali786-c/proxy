import{c as H,k as A,r as b,j as e,I,B as l,z as _,t as S}from"./index-CMJpK8T_.js";import{S as F}from"./SEOHead-BSBieVKE.js";import{C as L,a as q,b as B,c as R}from"./card-6RIx5ki-.js";import{T as w,a as v,b as m,c as n,d as C,e as o}from"./table-Bh__f6iH.js";import{B as P}from"./badge-CvXcBGMK.js";import{b as O}from"./use-backend-B6QnDZHO.js";import{D as V,b as G,c as Q,d as X,g as J}from"./dialog-9QI67EFS.js";import{T as K,a as W,b as T,c as $}from"./tabs-8ALh0jb9.js";import{S as Y}from"./search-XR6XNw61.js";import{f as k}from"./format-sbWH3_uq.js";import{E as Z}from"./eye-Bauo4jB2.js";import{C as z}from"./copy-DK_RBLC6.js";import"./useQuery-CvsD0ZMN.js";import"./useMutation-vXY56IAa.js";import"./api-BTF2QDx4.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=H("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=H("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);function D(s){return`${s.host}:${s.port}:${s.username}:${s.password}`}function te(s){return`curl -x http://${s.username}:${s.password}@${s.host}:${s.port} https://httpbin.org/ip`}function ae(s){return`import requests

proxies = {
    "http": "http://${s.username}:${s.password}@${s.host}:${s.port}",
    "https": "http://${s.username}:${s.password}@${s.host}:${s.port}",
}
response = requests.get("https://httpbin.org/ip", proxies=proxies)
print(response.json())`}function re(s){return`const HttpsProxyAgent = require('https-proxy-agent');

const agent = new HttpsProxyAgent(
  'http://${s.username}:${s.password}@${s.host}:${s.port}'
);

fetch('https://httpbin.org/ip', { agent })
  .then(res => res.json())
  .then(console.log);`}function Ne(){var y,N;const[s]=A(),d=s.get("type"),{data:c,isLoading:E}=O(d),[p,M]=b.useState(""),[a,j]=b.useState(null),h=c==null?void 0:c.filter(t=>{var r,i;return((i=(r=t.product)==null?void 0:r.name)==null?void 0:i.toLowerCase().includes(p.toLowerCase()))||t.id.toString().includes(p)}),g=t=>{const r=t.map(D).join(`
`);navigator.clipboard.writeText(r),S({title:"Copied",description:"Proxies copied to clipboard."})},U=t=>{const r=t.proxies.map(D).join(`
`),i=new Blob([r],{type:"text/plain"}),x=URL.createObjectURL(i),u=document.createElement("a");u.href=x,u.download=`proxies_order_${t.id}.txt`,u.click(),URL.revokeObjectURL(x)};return e.jsxs(e.Fragment,{children:[e.jsx(F,{title:"Proxy History",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(ee,{className:"h-6 w-6 text-primary"}),"Proxy History"]}),e.jsxs("div",{className:"relative w-64",children:[e.jsx(Y,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(I,{placeholder:"Search orders...",className:"pl-9",value:p,onChange:t=>M(t.target.value)})]})]}),e.jsxs(L,{children:[e.jsx(q,{children:e.jsx(B,{className:"text-lg",children:"Generated Proxy Orders"})}),e.jsx(R,{children:E?e.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Loading history..."}):(h==null?void 0:h.length)===0?e.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"No orders found."}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(w,{children:[e.jsx(v,{children:e.jsxs(m,{children:[e.jsx(n,{children:"Order ID"}),e.jsx(n,{children:"Product"}),e.jsx(n,{children:"Quantity"}),e.jsx(n,{children:"Date"}),e.jsx(n,{children:"Status"}),e.jsx(n,{className:"text-right",children:"Actions"})]})}),e.jsx(C,{children:h.map(t=>{var r,i,x;return e.jsxs(m,{children:[e.jsxs(o,{className:"font-medium text-xs",children:["#",t.id]}),e.jsx(o,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:(r=t.product)==null?void 0:r.name}),e.jsx("span",{className:"text-xs text-muted-foreground uppercase",children:(i=t.product)==null?void 0:i.type})]})}),e.jsx(o,{children:e.jsxs(P,{variant:"secondary",children:[((x=t.proxies)==null?void 0:x.length)||0," Proxies"]})}),e.jsx(o,{className:"text-xs text-muted-foreground",children:k(new Date(t.created_at),"MMM d, yyyy HH:mm")}),e.jsx(o,{children:e.jsx(P,{variant:t.status==="active"?"outline":"secondary",className:"capitalize",children:t.status})}),e.jsx(o,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>j(t),title:"View Details",children:e.jsx(Z,{className:"h-4 w-4"})}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>g(t.proxies),title:"Copy All",children:e.jsx(z,{className:"h-4 w-4"})}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>U(t),title:"Download TXT",children:e.jsx(_,{className:"h-4 w-4"})})]})})]},t.id)})})]})})})]})]}),e.jsx(V,{open:!!a,onOpenChange:()=>j(null),children:e.jsxs(G,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Q,{children:[e.jsxs(X,{className:"flex items-center gap-2",children:["Order Details #",a==null?void 0:a.id]}),e.jsxs(J,{children:[(y=a==null?void 0:a.product)==null?void 0:y.name," • ",(N=a==null?void 0:a.proxies)==null?void 0:N.length," Proxies • ",a&&k(new Date(a.created_at),"PPP p")]})]}),a&&e.jsxs(K,{defaultValue:"table",className:"mt-4",children:[e.jsxs(W,{className:"mb-4",children:[e.jsx(T,{value:"table",children:"Table View"}),e.jsx(T,{value:"snippets",children:"Config Snippets"})]}),e.jsx($,{value:"table",children:e.jsx("div",{className:"rounded-md border max-h-[400px] overflow-auto text-card-foreground",children:e.jsxs(w,{children:[e.jsx(v,{children:e.jsxs(m,{children:[e.jsx(n,{className:"w-12",children:"#"}),e.jsx(n,{children:"Host"}),e.jsx(n,{children:"Port"}),e.jsx(n,{children:"Username"}),e.jsx(n,{children:"Password"})]})}),e.jsx(C,{children:a.proxies.map((t,r)=>e.jsxs(m,{children:[e.jsx(o,{className:"text-muted-foreground",children:r+1}),e.jsx(o,{className:"font-mono text-xs",children:t.host}),e.jsx(o,{className:"font-mono text-xs",children:t.port}),e.jsx(o,{className:"font-mono text-xs",children:t.username}),e.jsx(o,{className:"font-mono text-xs",children:t.password})]},r))})]})})}),e.jsx($,{value:"snippets",className:"space-y-4",children:a.proxies[0]&&e.jsxs(e.Fragment,{children:[e.jsx(f,{title:"cURL",code:te(a.proxies[0])}),e.jsx(f,{title:"Python (requests)",code:ae(a.proxies[0])}),e.jsx(f,{title:"Node.js (fetch)",code:re(a.proxies[0])})]})})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6 font-semibold",children:[e.jsx(l,{variant:"outline",onClick:()=>j(null),children:"Close"}),e.jsx(l,{onClick:()=>g(a.proxies),children:"Copy All Proxies"})]})]})})]})}function f({title:s,code:d}){const c=()=>{navigator.clipboard.writeText(d),S({title:"Copied",description:`${s} snippet copied.`})};return e.jsxs(L,{children:[e.jsxs(q,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsxs(B,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4 text-primary"}),s]}),e.jsxs(l,{variant:"ghost",size:"sm",onClick:c,children:[e.jsx(z,{className:"mr-1 h-3.5 w-3.5"})," Copy"]})]}),e.jsx(R,{children:e.jsx("pre",{className:"overflow-x-auto rounded-md bg-muted p-3 text-xs leading-relaxed font-mono",children:d})})]})}export{Ne as default};
