import{I as G,j as e,x as i,y as we,z as Ce,A as Pe,E as Se,G as Te}from"./ui-DhchgSRK.js";import{r as n,L as se,aw as te,t as ae,am as ce,D as R,aA as re}from"./vendor-Dios4bpT.js";import{S as $e}from"./SEOHead-CJyn75wT.js";import{E as ke}from"./ErrorBanner-DVlc-IOG.js";import{d as De,b as Ae,u as _e,t as L,e as B,f as O,g as U,h as q,i as E,I as ne,B as P,c as ie}from"./index-BvY8aRMn.js";import{L as S}from"./label-CHENNY20.js";import{C as I,a as Q,b as Y,c as M}from"./card-ClKFnvWz.js";import{T as Ee}from"./textarea-4_MZ9aK-.js";import{T as Le,a as Ie,b as z,c as H}from"./tabs-BNdWe11u.js";import{T as Me,a as Ve,b as oe,c as T,d as Ge,e as $}from"./table-BODbY_8L.js";import{u as Re,e as Be,f as Oe}from"./use-backend-Bc5D64NZ.js";import{M as Ue}from"./ManualCryptoDialog-bBy7JsNr.js";import"./useMutation-DIpJkaYt.js";const qe={rp:"residential",mp:"mobile",dc:"datacenter",dc_ipv6:"datacenter_ipv6",dc_unmetered:"datacenter_unmetered"},le={rp:"residential",mp:"mobile",dc:"datacenter",dc_ipv6:"datacenter-ipv6",dc_unmetered:"datacenter-unmetered"};function ze(t){return`curl -x http://${t.username}:${t.password}@${t.host}:${t.port} https://httpbin.org/ip`}function He(t){return`import requests

proxies = {
    "http": "http://${t.username}:${t.password}@${t.host}:${t.port}",
    "https": "http://${t.username}:${t.password}@${t.host}:${t.port}",
}
response = requests.get("https://httpbin.org/ip", proxies=proxies)
print(response.json())`}function Fe(t){return`const HttpsProxyAgent = require('https-proxy-agent');

const agent = new HttpsProxyAgent(
  'http://${t.username}:${t.password}@${t.host}:${t.port}'
);

fetch('https://httpbin.org/ip', { agent })
  .then(res => res.json())
  .then(console.log);`}function is(){var ee;const{data:t}=Re(),{data:h}=Be(),k=Oe(),[j,de]=n.useState(""),[v,xe]=n.useState("residential"),[y,me]=n.useState(""),[ue,pe]=n.useState(""),[g,he]=n.useState("rotating"),[c,je]=n.useState(1),[x,D]=n.useState(!1),[J,N]=n.useState(null),[o,ye]=n.useState([]),[l,K]=n.useState(null),[ge,A]=n.useState(!1),[fe,W]=n.useState(!1),{gateways:f}=De(),{format:w}=Ae(),{t:X}=_e(),C=(t??[]).find(s=>s.id.toString()===j),b=n.useMemo(()=>{if(!C)return null;let s=Number(C.price);const r=[...C.volume_discounts||[]].sort((d,Ne)=>Ne.min_qty-d.min_qty);for(const d of r)if(c>=d.min_qty){s=Number(d.price);break}const m=Number(C.price),u=s*c,p=s<m;return{unitPrice:s,total:u,isDiscounted:p,basePrice:m}},[C,c]),be=n.useCallback(async()=>{var s,a;if(N(null),K(null),!j){N("Please select a product.");return}D(!0);try{const r=await k.mutateAsync({product_id:Number(j),quantity:c,country:y||void 0,session_type:g});ye(r.proxies||[]),L({title:"Proxies Generated",description:`${((s=r.proxies)==null?void 0:s.length)||0} proxies ready.`})}catch(r){r.status===402&&((a=r.body)!=null&&a.can_direct_purchase)?(K({productId:r.body.product_id,amount:r.body.total_cost}),N(`Insufficient balance. You need ${w(r.body.total_cost)} to generate these proxies.`)):N(r.message||"Failed to generate proxies.")}finally{D(!1)}},[j,c,y,g,k]),Z=async s=>{if(l){D(!0);try{if(s==="cryptomus"){const{url:a}=await ie.createCryptomusProductCheckout(l.productId.toString(),c,y||void 0,g);window.location.href=a}else{const{url:a}=await ie.createProductCheckout(l.productId.toString(),c,y||void 0,g);window.location.href=a}}catch(a){L({title:"Checkout Error",description:a.message,variant:"destructive"})}finally{D(!1),A(!1)}}},ve=n.useCallback(()=>{const s=o.map(G).join(`
`);navigator.clipboard.writeText(s),L({title:"Copied",description:"All proxies copied to clipboard."})},[o]),V=n.useCallback(s=>{let a,r;s==="json"?(a=JSON.stringify(o,null,2),r="application/json"):s==="csv"?(a=`host,port,username,password
`+o.map(d=>`${d.host},${d.port},${d.username},${d.password}`).join(`
`),r="text/csv"):(a=o.map(G).join(`
`),r="text/plain");const m=new Blob([a],{type:r}),u=URL.createObjectURL(m),p=document.createElement("a");p.href=u,p.download=`proxies.${s}`,p.click(),URL.revokeObjectURL(u)},[o]),_=o[0];return e.jsxs(e.Fragment,{children:[e.jsx($e,{title:"Generate Proxies",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Generate Proxies"}),e.jsx(i,{variant:"outline",asChild:!0,children:e.jsx(se,{to:"/app/proxies/core-residential",children:"View Active Proxies"})})]}),e.jsxs(I,{children:[e.jsx(Q,{children:e.jsx(Y,{className:"text-lg",children:"Generate Proxies"})}),e.jsxs(M,{className:"space-y-4",children:[J&&e.jsx(ke,{message:J,onDismiss:()=>N(null)}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:"Product"}),e.jsxs(B,{value:j,onValueChange:s=>{de(s);const a=(t??[]).find(r=>r.id.toString()===s);a&&xe(a.type)},children:[e.jsx(O,{children:e.jsx(U,{placeholder:"Select Product..."})}),e.jsx(q,{children:(t??[]).map(s=>e.jsx(E,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:"Country"}),e.jsxs(B,{value:y,onValueChange:me,children:[e.jsx(O,{children:e.jsx(U,{placeholder:"Select..."})}),e.jsx(q,{children:(()=>{var r,m;const s=qe[v]||"residential",a=((m=(r=h==null?void 0:h.data)==null?void 0:r[s])==null?void 0:m.countries)||{};return Object.entries(a).map(([u,p])=>e.jsx(E,{value:u,children:p},u))})()})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:"City (optional)"}),e.jsx(ne,{value:ue,onChange:s=>pe(s.target.value),placeholder:"Any"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:"Session Type"}),e.jsxs(B,{value:g,onValueChange:he,children:[e.jsx(O,{children:e.jsx(U,{})}),e.jsxs(q,{children:[e.jsx(E,{value:"rotating",children:"Rotating"}),e.jsx(E,{value:"sticky",children:"Sticky"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:"Quantity"}),e.jsx(ne,{type:"number",min:1,max:1e3,value:c,onChange:s=>je(Number(s.target.value))})]})]}),b&&e.jsxs("div",{className:"flex items-center justify-between bg-muted/50 p-4 rounded-md border border-border/50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Estimated Cost"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[c," ",v==="isp"?"IPs":v==="dc_unmetered"?"Months":"GB"," @ ",w(b.unitPrice),"/ea",b.isDiscounted&&e.jsx("span",{className:"line-through text-muted-foreground/50 ml-2",children:w(b.basePrice)})]})]}),e.jsxs("div",{className:"text-right flex flex-col items-end",children:[e.jsx("p",{className:"text-lg font-bold text-primary",children:w(b.total)}),b.isDiscounted&&e.jsx(P,{variant:"secondary",className:"bg-green-500/10 text-green-600 border-green-200 mt-1 text-[10px] px-1.5 py-0 h-4",children:"Volume Discount"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsxs(i,{onClick:be,disabled:x,children:[x&&!l&&e.jsx(te,{className:"mr-2 h-4 w-4 animate-spin"}),x&&!l?X("common.loading"):"Generate"]}),l&&e.jsxs(i,{variant:"secondary",onClick:()=>A(!0),disabled:x,className:"gap-2",children:[x?e.jsx(te,{className:"h-4 w-4 animate-spin"}):e.jsx(ae,{className:"h-4 w-4"}),X("common.pay")," ",w(l.amount)," & Generate"]})]})]})]}),o.length>0&&e.jsxs(Le,{defaultValue:"output",children:[e.jsx("div",{className:"flex items-center justify-between flex-wrap gap-2",children:e.jsxs(Ie,{children:[e.jsx(z,{value:"output",children:"Output"}),e.jsx(z,{value:"table",children:"Table View"}),e.jsx(z,{value:"snippets",children:"Config Snippets"})]})}),e.jsx(H,{value:"output",className:"mt-4",children:e.jsxs(I,{children:[e.jsx(Q,{className:"flex flex-row items-center justify-between pb-2",children:e.jsxs(Y,{className:"text-sm",children:[e.jsx(P,{variant:"secondary",className:"mr-2",children:o.length}),"proxies generated • ",j," • ",y," • ",g]})}),e.jsxs(M,{className:"space-y-3",children:[e.jsx(Ee,{readOnly:!0,className:"font-mono text-xs leading-relaxed min-h-[200px] max-h-[400px] resize-y bg-muted",value:o.map(G).join(`
`),onFocus:s=>s.target.select()}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(i,{variant:"default",size:"sm",onClick:ve,children:[e.jsx(ce,{className:"mr-1.5 h-3.5 w-3.5"})," Copy All"]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>V("txt"),children:[e.jsx(R,{className:"mr-1.5 h-3.5 w-3.5"})," Download .txt"]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>V("csv"),children:[e.jsx(R,{className:"mr-1.5 h-3.5 w-3.5"})," Download .csv"]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>V("json"),children:[e.jsx(R,{className:"mr-1.5 h-3.5 w-3.5"})," Download .json"]}),e.jsx(i,{variant:"secondary",size:"sm",asChild:!0,className:"ml-auto",children:e.jsxs(se,{to:`/app/proxies/${le[v]||"residential"}`,children:["View in ",((ee=le[v])==null?void 0:ee.split("-").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "))||"Residential"," Tab"]})})]})]})]})}),e.jsx(H,{value:"table",className:"mt-4",children:e.jsx(I,{children:e.jsx(M,{className:"p-0",children:e.jsx("div",{className:"max-h-96 overflow-auto",children:e.jsxs(Me,{children:[e.jsx(Ve,{children:e.jsxs(oe,{children:[e.jsx(T,{className:"w-12",children:"#"}),e.jsx(T,{children:"Host"}),e.jsx(T,{children:"Port"}),e.jsx(T,{children:"Username"}),e.jsx(T,{children:"Password"})]})}),e.jsx(Ge,{children:o.map((s,a)=>e.jsxs(oe,{children:[e.jsx($,{className:"text-muted-foreground",children:a+1}),e.jsx($,{className:"font-mono text-xs",children:s.host}),e.jsx($,{className:"font-mono text-xs",children:s.port}),e.jsx($,{className:"font-mono text-xs",children:s.username}),e.jsx($,{className:"font-mono text-xs",children:s.password})]},a))})]})})})})}),e.jsx(H,{value:"snippets",className:"mt-4 space-y-4",children:_&&e.jsxs(e.Fragment,{children:[e.jsx(F,{title:"cURL",code:ze(_)}),e.jsx(F,{title:"Python (requests)",code:He(_)}),e.jsx(F,{title:"Node.js (fetch)",code:Fe(_)})]})})]})]}),e.jsx(we,{open:ge,onOpenChange:A,children:e.jsxs(Ce,{className:"sm:max-w-md",children:[e.jsxs(Pe,{children:[e.jsx(Se,{children:"Select Payment Method"}),e.jsx(Te,{children:"Choose how you want to pay for these proxies."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[f.stripe&&e.jsxs(i,{variant:"outline",className:"flex items-center justify-between p-6 h-auto",onClick:()=>Z("stripe"),disabled:x,children:[e.jsxs("div",{className:"flex items-center gap-3 text-left",children:[e.jsx(ae,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Credit/Debit Card"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Secure via Stripe"})]})]}),e.jsx(P,{variant:"secondary",className:"bg-primary/10 text-primary border-primary/20",children:"+VAT"})]}),f.cryptomus&&e.jsxs(i,{variant:"outline",className:"flex items-center justify-between p-6 h-auto",onClick:()=>Z("cryptomus"),disabled:x,children:[e.jsxs("div",{className:"flex items-center gap-3 text-left",children:[e.jsx(re,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Cryptocurrency"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Automated via Cryptomus"})]})]}),e.jsx(P,{variant:"secondary",className:"bg-green-500/10 text-green-600 border-green-200",children:"VAT-FREE"})]}),f.crypto&&e.jsxs(i,{variant:"outline",className:"flex items-center justify-between p-6 h-auto",onClick:()=>{A(!1),W(!0)},disabled:x,children:[e.jsxs("div",{className:"flex items-center gap-3 text-left",children:[e.jsx(re,{className:"h-6 w-6 text-orange-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Binance Pay / Manual"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Send ID & Upload Proof"})]})]}),e.jsx(P,{variant:"secondary",className:"bg-orange-500/10 text-orange-600 border-orange-200",children:"VAT-FREE"})]}),!f.stripe&&!f.cryptomus&&!f.crypto&&e.jsx("p",{className:"text-center text-sm text-muted-foreground italic",children:"No payment gateways are currently configured."})]})]})}),e.jsx(Ue,{open:fe,onOpenChange:W,defaultAmount:l==null?void 0:l.amount.toString(),onSuccess:()=>{}})]})}function F({title:t,code:h}){const k=()=>{navigator.clipboard.writeText(h),L({title:"Copied",description:`${t} snippet copied.`})};return e.jsxs(I,{children:[e.jsxs(Q,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(Y,{className:"text-sm",children:t}),e.jsxs(i,{variant:"ghost",size:"sm",onClick:k,children:[e.jsx(ce,{className:"mr-1 h-3.5 w-3.5"})," Copy"]})]}),e.jsx(M,{children:e.jsx("pre",{className:"overflow-x-auto rounded-md bg-muted p-3 text-xs leading-relaxed",children:h})})]})}export{is as default};
