import{Q as S,r as p,U as _,j as e,a as C,G as b,I as i,aI as w,S as q,t as h,ae as j,af as P,aU as E,ag as M}from"./index-C-hQHNw1.js";import{u as k}from"./useMutation-DR2AoCow.js";import{S as F}from"./SEOHead-YzVvxQ4K.js";import{C as c,a as d,b as m,c as o}from"./card-RM_oJbVE.js";import{L as n}from"./label-DV3w9G48.js";import{S as x}from"./switch-DvWI2qvi.js";import{S as A}from"./save-hSSGQgqz.js";function R(){const g=S(),[a,u]=p.useState({}),{data:r={},isLoading:f}=_({queryKey:["admin-settings"],queryFn:()=>j.get("/admin/settings",E(M()))});p.useEffect(()=>{r&&u(r)},[r]);const l=k({mutationFn:s=>j.post("/admin/settings",P,s),onSuccess:()=>{g.invalidateQueries({queryKey:["admin-settings"]}),h({title:"Settings Saved",description:"System configuration updated successfully."})},onError:s=>h({title:"Error",description:s.message,variant:"destructive"})}),t=(s,y)=>{u(N=>({...N,[s]:y}))},v=()=>{l.mutate(a)};return f?e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Loading settings..."}):e.jsxs(e.Fragment,{children:[e.jsx(F,{title:"Admin — Settings",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"System Settings"}),e.jsxs(C,{onClick:v,disabled:l.isPending,children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),l.isPending?"Saving...":"Save All Changes"]})]}),e.jsxs(c,{children:[e.jsx(d,{children:e.jsxs(m,{className:"flex items-center gap-2 text-lg",children:[e.jsx(b,{className:"h-5 w-5"})," General"]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{children:"Site Name"}),e.jsx(i,{value:a.site_name||"",onChange:s=>t("site_name",s.target.value),placeholder:"UpgradedProxy"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{children:"Support Email"}),e.jsx(i,{value:a.support_email||"",onChange:s=>t("support_email",s.target.value),placeholder:"support@upgradedproxy.com"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Maintenance Mode"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Disable public access temporarily"})]}),e.jsx(x,{checked:a.maintenance_mode==="1"||a.maintenance_mode===!0,onCheckedChange:s=>t("maintenance_mode",s)})]})]})]}),e.jsxs(c,{children:[e.jsx(d,{children:e.jsxs(m,{className:"flex items-center gap-2 text-lg",children:[e.jsx(w,{className:"h-5 w-5"})," Email / SMTP"]})}),e.jsx(o,{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{children:"SMTP Host"}),e.jsx(i,{value:a.smtp_host||"",onChange:s=>t("smtp_host",s.target.value),placeholder:"smtp.example.com"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{children:"SMTP Port"}),e.jsx(i,{value:a.smtp_port||"",onChange:s=>t("smtp_port",s.target.value),placeholder:"587"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{children:"Username"}),e.jsx(i,{value:a.smtp_user||"",onChange:s=>t("smtp_user",s.target.value),placeholder:"user@example.com"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{children:"Password"}),e.jsx(i,{type:"password",value:a.smtp_pass||"",onChange:s=>t("smtp_pass",s.target.value),placeholder:"••••••••"})]})]})})]}),e.jsxs(c,{children:[e.jsx(d,{children:e.jsxs(m,{className:"flex items-center gap-2 text-lg",children:[e.jsx(q,{className:"h-5 w-5"})," Security"]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"2FA Required for Admin"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Force all admins to use two-factor authentication"})]}),e.jsx(x,{checked:a.admin_2fa_required==="1"||a.admin_2fa_required===!0,onCheckedChange:s=>t("admin_2fa_required",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Rate Limiting"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Limit API requests per minute to prevent abuse"})]}),e.jsx(x,{checked:a.rate_limiting_enabled==="1"||a.rate_limiting_enabled===!0,onCheckedChange:s=>t("rate_limiting_enabled",s)})]})]})]})]})]})}export{R as default};
