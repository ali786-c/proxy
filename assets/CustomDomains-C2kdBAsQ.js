import{c as q,h as w,ab as B,r as v,j as e,G as I,B as d,I as L,q as M,v as z,w as E,x as X,y as c,t as h}from"./index-B1McbkCw.js";import{u as F}from"./useQuery-o3JVtk6V.js";import{u as f}from"./useMutation--QnKykxw.js";import{C,a as N,b,d as H,c as D}from"./card-BY13p4Aj.js";import{L as S}from"./label-DdUIoVPA.js";import{B as t}from"./badge-Ct-SqLz6.js";import{T as Q,a as R,b as u,c as o,d as V,e as i}from"./table-CYh1wfJD.js";import{D as G,a as K,b as O,c as U,d as W}from"./dialog-DbblfIXV.js";import{P as Y}from"./plus-BKGQW0VH.js";import{C as j}from"./clock-CBjCsDHU.js";import{C as _}from"./circle-check-big-dHMvbEia.js";import{C as J}from"./copy-B88XyVEj.js";import{T as Z}from"./trash-2-Dbn5Qeog.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=q("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),T={active:{variant:"default",icon:_},issuing:{variant:"outline",icon:j},pending:{variant:"secondary",icon:j},failed:{variant:"destructive",icon:$}};function ee(){const{user:a}=w();return F({queryKey:["custom-domains",a==null?void 0:a.id],enabled:!!(a!=null&&a.id),queryFn:async()=>[]})}function je(){const{user:a}=w(),{data:n,isLoading:se}=ee(),p=B(),[A,y]=v.useState(!1),[l,x]=v.useState({domain:"",proxy_type:"residential"}),m=f({mutationFn:async()=>{},onSuccess:()=>{p.invalidateQueries({queryKey:["custom-domains"]}),h({title:"Mock: Domain added."}),y(!1),x({domain:"",proxy_type:"residential"})}}),k=f({mutationFn:async s=>{},onSuccess:()=>{p.invalidateQueries({queryKey:["custom-domains"]}),h({title:"Domain removed (Mock)"})}}),P=s=>{navigator.clipboard.writeText(s),h({title:"Copied to clipboard"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(I,{className:"h-6 w-6"})," Custom Proxy Domains"]}),e.jsx("p",{className:"text-muted-foreground",children:"Use your own domain for proxy endpoints"})]}),e.jsxs(G,{open:A,onOpenChange:y,children:[e.jsx(K,{asChild:!0,children:e.jsxs(d,{children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Add Domain"]})}),e.jsxs(O,{children:[e.jsx(U,{children:e.jsx(W,{children:"Add Custom Proxy Domain"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(S,{children:"Domain"}),e.jsx(L,{placeholder:"proxy.yourdomain.com",value:l.domain,onChange:s=>x(r=>({...r,domain:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx(S,{children:"Proxy Type"}),e.jsxs(M,{value:l.proxy_type,onValueChange:s=>x(r=>({...r,proxy_type:s})),children:[e.jsx(z,{children:e.jsx(E,{})}),e.jsxs(X,{children:[e.jsx(c,{value:"residential",children:"Residential"}),e.jsx(c,{value:"datacenter",children:"Datacenter"}),e.jsx(c,{value:"mobile",children:"Mobile"}),e.jsx(c,{value:"isp",children:"ISP"})]})]})]}),e.jsx(d,{onClick:()=>m.mutate(),disabled:m.isPending||!l.domain,className:"w-full",children:m.isPending?"Adding…":"Add Domain"})]})]})]})]}),e.jsxs(C,{children:[e.jsxs(N,{children:[e.jsx(b,{children:"DNS Setup Instructions"}),e.jsx(H,{children:"Add a CNAME record pointing your domain to our proxy endpoint, then add the TXT record to verify ownership."})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(t,{variant:"outline",children:"1"}),e.jsxs("span",{children:["Add a ",e.jsx("code",{className:"bg-muted px-1 rounded",children:"CNAME"})," record: ",e.jsx("code",{className:"bg-muted px-1 rounded",children:"proxy.yourdomain.com → endpoint.upgraderproxy.com"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(t,{variant:"outline",children:"2"}),e.jsxs("span",{children:["Add a ",e.jsx("code",{className:"bg-muted px-1 rounded",children:"TXT"})," record with the verification value shown below"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(t,{variant:"outline",children:"3"}),e.jsx("span",{children:"Wait for DNS propagation and SSL provisioning (up to 24 hours)"})]})]})})]}),e.jsxs(C,{children:[e.jsx(N,{children:e.jsx(b,{children:"Your Domains"})}),e.jsx(D,{children:e.jsxs(Q,{children:[e.jsx(R,{children:e.jsxs(u,{children:[e.jsx(o,{children:"Domain"}),e.jsx(o,{children:"Proxy Type"}),e.jsx(o,{children:"DNS Verified"}),e.jsx(o,{children:"SSL Status"}),e.jsx(o,{children:"TXT Record"}),e.jsx(o,{children:"Actions"})]})}),e.jsxs(V,{children:[n==null?void 0:n.map(s=>{var g;const r=T[s.ssl_status]??T.pending;return e.jsxs(u,{children:[e.jsx(i,{className:"font-medium",children:s.domain}),e.jsx(i,{className:"capitalize",children:s.proxy_type}),e.jsx(i,{children:s.dns_verified?e.jsxs(t,{variant:"default",children:[e.jsx(_,{className:"mr-1 h-3 w-3"}),"Verified"]}):e.jsxs(t,{variant:"secondary",children:[e.jsx(j,{className:"mr-1 h-3 w-3"}),"Pending"]})}),e.jsx(i,{children:e.jsxs(t,{variant:r.variant,children:[e.jsx(r.icon,{className:"mr-1 h-3 w-3"}),s.ssl_status]})}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("code",{className:"bg-muted px-1 rounded text-xs",children:[(g=s.dns_txt_record)==null?void 0:g.slice(0,20),"…"]}),e.jsx(d,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>P(s.dns_txt_record??""),children:e.jsx(J,{className:"h-3 w-3"})})]})}),e.jsx(i,{children:e.jsx(d,{size:"icon",variant:"ghost",className:"h-8 w-8 text-destructive",onClick:()=>k.mutate(s.id),children:e.jsx(Z,{className:"h-4 w-4"})})})]},s.id)}),!(n!=null&&n.length)&&e.jsx(u,{children:e.jsx(i,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No custom domains configured"})})]})]})})]})]})}export{je as default};
