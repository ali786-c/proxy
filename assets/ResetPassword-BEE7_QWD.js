import{k as P,r as s,j as e,B as i,L as C,I as p}from"./index-DroWz3-G.js";import{a as L}from"./api-CW1y2m9B.js";import{S as l}from"./SEOHead-BWHcznh9.js";import{L as h}from"./label-aMCsD8Lk.js";import{C as k}from"./circle-check-BtRVTKE0.js";import{L as F}from"./loader-circle-hOFnmCtk.js";function H(){const f=P(),[a,w]=s.useState(""),[n,j]=s.useState(""),[d,c]=s.useState(!1),[g,N]=s.useState(!1),[m,o]=s.useState(null),[b,R]=s.useState(!0),v=async t=>{var u,x;if(t.preventDefault(),a!==n){o("Passwords do not match");return}c(!0),o(null);try{const r=new URLSearchParams(window.location.search),y=r.get("token"),S=r.get("email");await L.post("/reset-password",{token:y,email:S,password:a,password_confirmation:n}),N(!0)}catch(r){o(((x=(u=r.response)==null?void 0:u.data)==null?void 0:x.error)||"Failed to reset password.")}finally{c(!1)}};return g?e.jsxs(e.Fragment,{children:[e.jsx(l,{title:"Password Updated",noindex:!0}),e.jsx("div",{className:"flex min-h-screen items-center justify-center px-4",children:e.jsxs("div",{className:"w-full max-w-sm space-y-4 rounded-lg border bg-card p-8 text-center",children:[e.jsx(k,{className:"mx-auto h-12 w-12 text-success"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Password Updated"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your password has been successfully reset."}),e.jsx(i,{className:"w-full",onClick:()=>f("/app",{replace:!0}),children:"Go to Dashboard"})]})})]}):b?e.jsxs(e.Fragment,{children:[e.jsx(l,{title:"Reset Password",noindex:!0}),e.jsx("div",{className:"flex min-h-screen items-center justify-center px-4",children:e.jsxs("form",{onSubmit:v,className:"w-full max-w-sm space-y-4 rounded-lg border bg-card p-8",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Set New Password"}),m&&e.jsx("p",{className:"text-sm text-destructive",children:m}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"password",children:"New Password"}),e.jsx(p,{id:"password",type:"password",value:a,onChange:t=>w(t.target.value),minLength:8,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"confirm",children:"Confirm Password"}),e.jsx(p,{id:"confirm",type:"password",value:n,onChange:t=>j(t.target.value),required:!0})]}),e.jsxs(i,{type:"submit",className:"w-full",disabled:d,children:[d&&e.jsx(F,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Password"]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{title:"Reset Password",noindex:!0}),e.jsx("div",{className:"flex min-h-screen items-center justify-center px-4",children:e.jsxs("div",{className:"w-full max-w-sm space-y-4 rounded-lg border bg-card p-8 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Invalid or Expired Link"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This password reset link is invalid or has expired."}),e.jsx(i,{variant:"outline",className:"w-full",asChild:!0,children:e.jsx(C,{to:"/forgot-password",children:"Request a New Link"})})]})})]})}export{H as default};
