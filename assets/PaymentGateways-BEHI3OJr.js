import{O as k,r as c,m as N,W as g,j as e,I as C,B as S,t as m}from"./index-CgHDtXVg.js";import{S as $}from"./SEOHead-BGa795gw.js";import{C as p,a as E,b as P,c as y}from"./card-DYSUTfQM.js";import{L as u}from"./label-esT6mfUN.js";import{S as _}from"./switch-BGKWLPk-.js";import{B as x}from"./badge-Dlh2k9NF.js";import{B as w}from"./bitcoin-Bhu08WIc.js";import{E as G}from"./eye-off-Dz31-O9i.js";import{E as I}from"./eye-BpXmJM6v.js";import{S as A}from"./save-DxOgjmTV.js";const B=[{id:"stripe",name:"Stripe",icon:N,connected:!1,fields:[{key:"publishable_key",label:"Publishable Key",placeholder:"pk_live_...",value:""},{key:"secret_key",label:"Secret Key",placeholder:"sk_live_...",value:""},{key:"webhook_secret",label:"Webhook Secret",placeholder:"whsec_...",value:""}]},{id:"paypal",name:"PayPal",icon:g,connected:!1,fields:[{key:"client_id",label:"Client ID",placeholder:"AV...",value:""},{key:"client_secret",label:"Client Secret",placeholder:"EL...",value:""},{key:"mode",label:"Mode (sandbox/live)",placeholder:"sandbox",value:""}]},{id:"crypto",name:"Crypto (USDT/BTC/ETH)",icon:w,connected:!1,fields:[{key:"wallet_address",label:"Wallet Address",placeholder:"0x...",value:""},{key:"provider",label:"Provider (e.g. NOWPayments)",placeholder:"nowpayments",value:""},{key:"api_key",label:"API Key",placeholder:"Your API key",value:""}]}];function Y(){const{gateways:h,toggleGateway:f}=k(),[i,d]=c.useState(B),[o,b]=c.useState({}),v=(a,l,s)=>{d(t=>t.map(r=>r.id===a?{...r,fields:r.fields.map(n=>n.key===l?{...n,value:s}:n)}:r))},j=a=>{const l=i.find(t=>t.id===a);if(!l)return;const s=l.fields.filter(t=>!t.value.trim());if(s.length>0){m({title:"Missing fields",description:`Please fill in: ${s.map(t=>t.label).join(", ")}`,variant:"destructive"});return}d(t=>t.map(r=>r.id===a?{...r,connected:!0}:r)),m({title:"Gateway Saved",description:`${l.name} configuration saved.`})};return e.jsxs(e.Fragment,{children:[e.jsx($,{title:"Payment Gateways",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Payment Gateways"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure and enable payment methods for clients. Only enabled gateways appear in the client billing page."})]}),e.jsx("div",{className:"grid gap-6",children:i.map(a=>{const l=h[a.id];return e.jsxs(p,{className:l?"border-primary/30 ring-1 ring-primary/10":"",children:[e.jsx(E,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(P,{className:"flex items-center gap-3 text-lg",children:[e.jsx("div",{className:`rounded-lg p-2 ${l?"bg-primary/10":"bg-muted"}`,children:e.jsx(a.icon,{className:`h-5 w-5 ${l?"text-primary":"text-muted-foreground"}`})}),a.name,a.connected&&e.jsx(x,{variant:"default",className:"bg-success text-success-foreground",children:"Connected"}),!a.connected&&l&&e.jsx(x,{variant:"secondary",children:"Not configured"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{htmlFor:`toggle-${a.id}`,className:"text-sm text-muted-foreground",children:l?"Enabled for clients":"Disabled"}),e.jsx(_,{id:`toggle-${a.id}`,checked:l,onCheckedChange:()=>f(a.id)})]})]})}),l&&e.jsxs(y,{className:"space-y-4",children:[a.fields.map(s=>e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(u,{className:"text-sm",children:s.label}),e.jsxs("div",{className:"relative",children:[e.jsx(C,{type:o[`${a.id}-${s.key}`]?"text":"password",placeholder:s.placeholder,value:s.value,onChange:t=>v(a.id,s.key,t.target.value)}),e.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",onClick:()=>b(t=>({...t,[`${a.id}-${s.key}`]:!t[`${a.id}-${s.key}`]})),children:o[`${a.id}-${s.key}`]?e.jsx(G,{className:"h-4 w-4"}):e.jsx(I,{className:"h-4 w-4"})})]})]},s.key)),e.jsxs(S,{onClick:()=>j(a.id),className:"gap-2",children:[e.jsx(A,{className:"h-4 w-4"})," Save Configuration"]})]})]},a.id)})}),e.jsx(p,{className:"border-dashed",children:e.jsxs(y,{className:"pt-6 text-center text-sm text-muted-foreground space-y-2",children:[e.jsx("p",{className:"font-medium text-foreground",children:"⚠️ Security Notice"}),e.jsx("p",{children:"API keys are stored locally for UI preview. Enable Lovable Cloud for encrypted secret storage in production."})]})})]})]})}export{Y as default};
