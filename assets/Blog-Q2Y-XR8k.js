import{c as G,r as a,j as e,a as t,F as E,aQ as ce,I as d,x as de,y as oe,z as xe,E as he,J as D,G as me,t as C}from"./index-C-hQHNw1.js";import{S as ue}from"./SEOHead-YzVvxQ4K.js";import{C as o,c as x}from"./card-RM_oJbVE.js";import{B as je}from"./badge-LB6dqpLf.js";import{T as pe,a as ge,b as _,c as fe}from"./tabs-BW_kaZUX.js";import{L as r}from"./label-DV3w9G48.js";import{T as U}from"./textarea-BdZb5zDL.js";import{T as Ne,a as ve,b as A,c as h,d as be,e as c}from"./table-ehW73X9l.js";import{D as F,b as I,c as H,d as M,g as O,e as z}from"./dialog-LFMyeO-Q.js";import{k as Ce,l as ye,m as Se,n as we,o as Te}from"./use-backend-C7XQrfOz.js";import{P as Pe}from"./plus-BWvKVU90.js";import{C as R}from"./clock-D4zw_vgB.js";import{E as De}from"./eye-CJiTgAfE.js";import{S as Ae}from"./search-IEN1uYtn.js";import{L as y}from"./loader-circle-Cc0K1f7s.js";import{T as Le}from"./trash-2-DRySiHpH.js";import{S as V}from"./save-hSSGQgqz.js";import"./useMutation-DR2AoCow.js";import"./dashboard-DCiUPAM5.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=G("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=G("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),Ee={draft:"outline",published:"default"};function $e(){const[W,Y]=a.useState("posts"),[S,J]=a.useState("all"),[w,Q]=a.useState(""),[q,m]=a.useState(!1),[K,u]=a.useState(!1),[X,L]=a.useState(null),[l,j]=a.useState(""),[i,p]=a.useState(""),[g,f]=a.useState(""),{data:Z=[],isLoading:$}=Ce(),T=ye(),P=Se(),ee=we(),N=Te(),v=Z.map(s=>({...s,status:s.is_draft?"draft":"published"})),se=()=>{T.mutate({title:l,content:i,image_url:g},{onSuccess:()=>{m(!1),b(),C({title:"Draft created",description:"Your article has been saved as a draft."})}})},ae=()=>{P.mutate({id:X.id,data:{title:l,content:i,image_url:g}},{onSuccess:()=>{u(!1),b(),C({title:"Post updated"})}})},te=s=>{confirm("Are you sure you want to delete this post?")&&ee.mutate(s,{onSuccess:()=>C({title:"Post deleted"})})},le=(s,n)=>{N.mutate({id:s,is_draft:!n},{onSuccess:()=>C({title:n?"Article Published":"Moved to Drafts",description:n?"The article is now live on the blog.":"The article has been hidden."})})},ie=s=>{L(s),j(s.title),p(s.content),f(s.image_url||""),u(!0)},b=()=>{j(""),p(""),f(""),L(null)},k=v.filter(s=>!(S!=="all"&&s.status!==S||w&&!s.title.toLowerCase().includes(w.toLowerCase()))),ne=v.filter(s=>s.status==="draft").length,re=v.filter(s=>s.status==="published").length;return e.jsxs(e.Fragment,{children:[e.jsx(ue,{title:"Admin — Blog Management",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Blog Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage articles, news, and updates for your users."})]}),e.jsxs(t,{onClick:()=>m(!0),className:"gap-2",children:[e.jsx(Pe,{className:"h-4 w-4"})," New Article"]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-4",children:[e.jsx(o,{children:e.jsx(x,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2.5",children:e.jsx(E,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:v.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Posts"})]})]})})}),e.jsx(o,{children:e.jsx(x,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2.5",children:e.jsx(R,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:ne}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Drafts"})]})]})})}),e.jsx(o,{children:e.jsx(x,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2.5",children:e.jsx(Be,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:re}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Published"})]})]})})}),e.jsx(o,{children:e.jsx(x,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-2.5",children:e.jsx(De,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:"—"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Views"})]})]})})})]}),e.jsxs(pe,{value:W,onValueChange:Y,children:[e.jsxs(ge,{children:[e.jsxs(_,{value:"posts",className:"gap-1.5",children:[e.jsx(E,{className:"h-3.5 w-3.5"})," Articles"]}),e.jsxs(_,{value:"settings",className:"gap-1.5 disabled",disabled:!0,children:[e.jsx(ce,{className:"h-3.5 w-3.5"})," Channels (Coming Soon)"]})]}),e.jsxs(fe,{value:"posts",className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ae,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(d,{placeholder:"Search posts…",value:w,onChange:s=>Q(s.target.value),className:"pl-9"})]}),e.jsxs(de,{value:S,onValueChange:J,children:[e.jsx(oe,{className:"w-32",children:e.jsx(xe,{})}),e.jsxs(he,{children:[e.jsx(D,{value:"all",children:"All"}),e.jsx(D,{value:"draft",children:"Drafts"}),e.jsx(D,{value:"published",children:"Published"})]})]})]}),e.jsx(o,{children:e.jsx(x,{className:"p-0",children:e.jsxs(Ne,{children:[e.jsx(ve,{children:e.jsxs(A,{children:[e.jsx(h,{children:"Title"}),e.jsx(h,{children:"Author"}),e.jsx(h,{children:"Status"}),e.jsx(h,{children:"Date"}),e.jsx(h,{className:"text-right",children:"Actions"})]})}),e.jsxs(be,{children:[k.map(s=>{var n,B;return e.jsxs(A,{className:"group",children:[e.jsx(c,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground truncate max-w-[300px]",children:s.slug})]})}),e.jsx(c,{children:e.jsx("span",{className:"text-sm font-medium",children:((n=s.author)==null?void 0:n.name)||"System"})}),e.jsx(c,{children:e.jsx(je,{variant:Ee[s.status]??"outline",className:"text-[10px] uppercase",children:s.status})}),e.jsx(c,{className:"text-sm text-muted-foreground",children:new Date(s.published_at||s.created_at).toLocaleDateString()}),e.jsx(c,{children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(t,{size:"icon",variant:"ghost",onClick:()=>ie(s),className:"h-8 w-8",children:e.jsx(ke,{className:"h-3.5 w-3.5"})}),e.jsx(t,{size:"sm",variant:s.is_draft?"default":"outline",onClick:()=>le(s.id,s.is_draft),disabled:N.isPending,className:"h-8 gap-1",children:N.isPending&&((B=N.variables)==null?void 0:B.id)===s.id?e.jsx(y,{className:"h-3 w-3 animate-spin"}):s.is_draft?e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"h-3 w-3"})," Publish"]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-3 w-3"})," Unpublish"]})}),e.jsx(t,{size:"icon",variant:"ghost",onClick:()=>te(s.id),className:"h-8 w-8 text-destructive hover:text-destructive",children:e.jsx(Le,{className:"h-3.5 w-3.5"})})]})})]},s.id)}),k.length===0&&e.jsx(A,{children:e.jsx(c,{colSpan:5,className:"h-32 text-center text-muted-foreground",children:$?e.jsx(y,{className:"h-6 w-6 animate-spin mx-auto"}):"No posts found."})})]})]})})})]})]}),e.jsx(F,{open:q,onOpenChange:s=>{m(s),s||b()},children:e.jsxs(I,{className:"max-w-2xl",children:[e.jsxs(H,{children:[e.jsx(M,{children:"Create New Article"}),e.jsx(O,{children:"Draft your post. You can publish it once it's saved."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Title"}),e.jsx(d,{value:l,onChange:s=>j(s.target.value),placeholder:"Article headline..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Hero Image URL"}),e.jsx(d,{value:g,onChange:s=>f(s.target.value),placeholder:"https://..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Content (HTML/Text)"}),e.jsx(U,{value:i,onChange:s=>p(s.target.value),placeholder:"Write your article content here...",className:"min-h-[250px]"})]})]}),e.jsxs(z,{children:[e.jsx(t,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsxs(t,{onClick:se,disabled:T.isPending||!l||!i,children:[T.isPending?e.jsx(y,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(V,{className:"h-4 w-4 mr-2"}),"Save Draft"]})]})]})}),e.jsx(F,{open:K,onOpenChange:s=>{u(s),s||b()},children:e.jsxs(I,{className:"max-w-2xl",children:[e.jsxs(H,{children:[e.jsx(M,{children:"Edit Article"}),e.jsx(O,{children:"Update the content of your post."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Title"}),e.jsx(d,{value:l,onChange:s=>j(s.target.value),placeholder:"Article headline..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Hero Image URL"}),e.jsx(d,{value:g,onChange:s=>f(s.target.value),placeholder:"https://..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Content (HTML/Text)"}),e.jsx(U,{value:i,onChange:s=>p(s.target.value),placeholder:"Write your article content here...",className:"min-h-[250px]"})]})]}),e.jsxs(z,{children:[e.jsx(t,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsxs(t,{onClick:ae,disabled:P.isPending||!l||!i,children:[P.isPending?e.jsx(y,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(V,{className:"h-4 w-4 mr-2"}),"Update Post"]})]})]})})]})]})}export{$e as default};
