import{c as ae,r as i,V as ie,U as R,j as e,I as o,a as d,t as a,Y as re,q as ce,Z as F,e as ne}from"./index-4rqwHGa0.js";import{S as le}from"./SEOHead-Cm869j7y.js";import{C as p,a as u,b as h,d as U,c as j}from"./card-Cx_GhBst.js";import{T as oe,a as de,b as D,c as C,d as me,e as T}from"./table-DrZxLr0C.js";import{B}from"./badge-BzqNAmKP.js";import{L as m}from"./label-BujHCYgv.js";import{S as xe}from"./switch-z43Znc8V.js";import{c as y}from"./dashboard-DGGw5F9w.js";import{C as pe}from"./circle-alert-C-NHO2oY.js";import{B as V}from"./bitcoin-CVdxDLc1.js";import{I as ue}from"./info-CWzmx7VW.js";import{L as he}from"./loader-circle-DQIv8Mg7.js";import{C as je}from"./copy-CWhzmlTK.js";import{R as ye}from"./refresh-cw-Bexa1jTO.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=ae("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]),Ne=.22,c=5,ge={paid:"default",pending:"secondary",failed:"destructive"},be=[{id:"btc",name:"Bitcoin (BTC)",icon:"₿",placeholder:"BTC wallet address — coming soon"},{id:"ltc",name:"Litecoin (LTC)",icon:"Ł",placeholder:"LTC wallet address — coming soon"},{id:"sol",name:"Solana (SOL)",icon:"◎",placeholder:"SOL wallet address — coming soon"},{id:"trx",name:"TRON (TRX)",icon:"⧫",placeholder:"TRX wallet address — coming soon"},{id:"bnb",name:"Binance (BNB)",icon:"♦",placeholder:"BNB wallet address — coming soon"}];function Fe(){const[P]=i.useState("residential"),{gateways:f,autoTopUpEnabled:O}=ie(),[E,L]=i.useState(!1),[_,$]=i.useState("50"),[X,q]=i.useState("5"),[r,k]=i.useState(null),[x,H]=i.useState("10"),[z,W]=i.useState(""),[N,g]=i.useState(!1),{data:Y}=R({queryKey:["plans"],queryFn:()=>y.getPlans()}),{data:G}=R({queryKey:["invoices"],queryFn:()=>y.getInvoices()}),n=parseFloat(x)||0,l=r==="crypto",M=l?0:n*Ne,S=n+M,w=n<c,K=s=>{a({title:"Product Selected",description:`Switching to ${s}.`})},[A,Q]=i.useState(""),[b,I]=i.useState(""),Z=async()=>{if(!A||!b||!x){a({title:"Missing information",description:"Please provide currency, amount, and TXID.",variant:"destructive"});return}g(!0);try{await y.submitCrypto({currency:A,amount:parseFloat(x),txid:b}),a({title:"Submitted",description:"Your transaction has been submitted for review."}),I(""),k(null)}catch(s){a({title:"Error",description:s.message,variant:"destructive"})}finally{g(!1)}},J=async s=>{if(L(s),s)try{const{client_secret:t}=await y.createSetupIntent();a({title:"Card setup started",description:"Please follow the instructions to save your card for auto top-up."})}catch(t){a({title:"Setup Error",description:t.message,variant:"destructive"}),L(!1)}},ee=async()=>{if(w){a({title:"Minimum not met",description:`Minimum purchase is €${c}.`,variant:"destructive"});return}if(!r){a({title:"Select a payment method",description:"Please choose how you'd like to pay.",variant:"destructive"});return}if(!l)if(r==="stripe"){g(!0);try{const{url:s}=await y.createCheckout(P,parseFloat(x));window.location.href=s}catch(s){a({title:"Checkout Error",description:s.message,variant:"destructive"})}finally{g(!1)}}else a({title:`Pay with ${r}`,description:`Redirecting to ${r} checkout for €${S.toFixed(2)}...`})},se=[{id:"stripe",name:"Card (Stripe)",subtitle:"Credit/Debit Card",icon:re,vatLabel:"+22% VAT"},{id:"paypal",name:"PayPal",subtitle:"PayPal Balance",icon:ce,vatLabel:"+22% VAT"},{id:"crypto",name:"Crypto",subtitle:"BTC, LTC, SOL, TRX, BNB",icon:V,vatLabel:"No VAT"}],te=f.stripe||f.paypal||f.crypto;return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Account & Billing",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Account & Billing"}),e.jsxs(p,{children:[e.jsxs(u,{children:[e.jsxs(h,{className:"flex items-center gap-2 text-lg",children:[e.jsx(fe,{className:"h-5 w-5"})," Add Balance"]}),e.jsxs(U,{children:["Minimum purchase: €",c,". 22% VAT applies to card & PayPal payments. Crypto is VAT-free."]})]}),e.jsxs(j,{className:"space-y-5",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 max-w-lg",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(m,{children:"Amount (€)"}),e.jsx(o,{type:"number",value:x,onChange:s=>H(s.target.value),min:c,step:"1",placeholder:`Min €${c}`}),w&&n>0&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(pe,{className:"h-3 w-3"})," Minimum purchase is €",c]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(m,{children:"Promo Code (optional)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{placeholder:"WELCOME20",value:z,onChange:s=>W(s.target.value)}),e.jsx(d,{variant:"outline",size:"sm",className:"shrink-0",onClick:()=>a({title:"Coupon Applied",description:"Discount applied to your balance."}),children:"Apply"})]})]})]}),!te&&e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No payment methods are currently available. Please contact support."}),e.jsx("div",{className:"grid gap-3 sm:grid-cols-3",children:se.map(s=>{const t=f[s.id],v=r===s.id;return e.jsxs(d,{variant:v?"default":"outline",className:`h-auto py-4 flex-col gap-1 relative ${t?"":"opacity-40 cursor-not-allowed"}`,disabled:!t,onClick:()=>k(s.id),children:[e.jsx(s.icon,{className:"h-6 w-6"}),e.jsx("span",{className:"font-semibold",children:s.name}),e.jsx("span",{className:"text-[11px] font-normal opacity-80",children:s.subtitle}),e.jsx(B,{variant:s.id==="crypto"?"default":"secondary",className:"text-[10px] mt-1",children:s.vatLabel}),!t&&e.jsx("span",{className:"text-[10px] font-normal",children:"Not available"})]},s.id)})}),r&&n>=c&&e.jsxs("div",{className:"rounded-lg border bg-muted/30 p-4 max-w-sm space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold",children:"Order Summary"}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["€",n.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:["VAT (22%)",l&&e.jsx(ue,{className:"h-3 w-3 text-muted-foreground"})]}),e.jsx("span",{className:l?"line-through text-muted-foreground":"",children:l?"€0.00 — exempt":`€${M.toFixed(2)}`})]}),e.jsx(F,{}),e.jsxs("div",{className:"flex justify-between text-sm font-bold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["€",S.toFixed(2)]})]}),e.jsxs(d,{className:"w-full mt-2",onClick:ee,disabled:w||N,children:[N?e.jsx(he,{className:"mr-2 h-4 w-4 animate-spin"}):null,l?"Show Wallet Addresses":`Pay €${S.toFixed(2)}`]})]}),r==="crypto"&&e.jsxs(p,{className:"border-dashed",children:[e.jsxs(u,{className:"pb-2",children:[e.jsxs(h,{className:"text-sm flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"})," Crypto Payment — Send Exact Amount"]}),e.jsx(U,{className:"text-xs",children:"No VAT on crypto payments. Send the exact EUR-equivalent in crypto. Submitting your TXID allows an admin to verify and credit your balance."})]}),e.jsxs(j,{className:"space-y-4",children:[be.map(s=>e.jsxs("div",{className:"flex items-center gap-3 rounded-md border p-3",children:[e.jsx("span",{className:"text-lg w-6 text-center",children:s.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-semibold",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s.placeholder})]}),e.jsx(d,{variant:"ghost",size:"icon",className:"h-7 w-7 opacity-40",disabled:!0,children:e.jsx(je,{className:"h-3.5 w-3.5"})})]},s.id)),e.jsx(F,{}),e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsx("h5",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Submit Transaction"}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{htmlFor:"crypto-curr",className:"text-[10px]",children:"Currency Used"}),e.jsx(o,{id:"crypto-curr",size:1,className:"h-8 text-xs",placeholder:"e.g. BTC, SOL",value:A,onChange:s=>Q(s.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(m,{htmlFor:"crypto-txid",className:"text-[10px]",children:"Transaction ID (TXID)"}),e.jsx(o,{id:"crypto-txid",className:"h-8 text-xs",placeholder:"Paste TXID here",value:b,onChange:s=>I(s.target.value)})]})]}),e.jsx(d,{className:"w-full h-9 text-xs",onClick:Z,disabled:N||!b,children:N?"Submitting...":"Submit for Verification"})]})]})]})]})]}),O&&e.jsxs(p,{children:[e.jsx(u,{children:e.jsxs(h,{className:"flex items-center gap-2 text-lg",children:[e.jsx(ye,{className:"h-5 w-5"})," Auto Top-Up"]})}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Enable Auto Top-Up"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically add balance when it drops below the threshold"})]}),e.jsx(xe,{checked:E,onCheckedChange:J})]}),E&&e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(m,{children:"Min Balance Threshold (€)"}),e.jsx(o,{type:"number",value:X,onChange:s=>q(s.target.value)})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(m,{children:"Top-Up Amount (€)"}),e.jsx(o,{type:"number",value:_,onChange:s=>$(s.target.value)})]})]})]})]}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-3",children:(Y||[]).map(s=>{const t=s.id===P;return e.jsxs(p,{className:t?"border-primary ring-2 ring-primary/20":"",children:[e.jsx(u,{className:"pb-2",children:e.jsxs(h,{className:"flex items-center justify-between text-lg",children:[s.name,t&&e.jsx(B,{children:"Active"})]})}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("p",{className:"text-3xl font-bold",children:["€",(s.price_cents/100).toFixed(2),e.jsxs("span",{className:"text-base font-normal text-muted-foreground",children:["/",(s.id==="datacenter","GB")]})]}),e.jsx("ul",{className:"space-y-1.5",children:s.features.map(v=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[e.jsx(ne,{className:"mt-0.5 h-4 w-4 shrink-0 text-primary"}),v]},v))}),e.jsx(d,{variant:t?"outline":"default",className:"w-full",disabled:t,onClick:()=>K(s.id),children:t?"Active Product":"Switch Product"})]})]},s.id)})}),e.jsxs(p,{children:[e.jsx(u,{children:e.jsx(h,{className:"text-lg",children:"Recent Invoices"})}),e.jsx(j,{className:"p-0",children:e.jsxs(oe,{children:[e.jsx(de,{children:e.jsxs(D,{children:[e.jsx(C,{children:"Period"}),e.jsx(C,{children:"Amount"}),e.jsx(C,{children:"Status"}),e.jsx(C,{className:"text-right",children:"Date"})]})}),e.jsx(me,{children:(G||[]).map(s=>e.jsxs(D,{children:[e.jsx(T,{className:"font-medium",children:s.period}),e.jsxs(T,{children:["€",(s.amount_cents/100).toFixed(2)]}),e.jsx(T,{children:e.jsx(B,{variant:ge[s.status]??"secondary",children:s.status})}),e.jsx(T,{className:"text-right text-sm text-muted-foreground",children:new Date(s.created_at).toLocaleDateString()})]},s.id))})]})})]})]})]})}export{Fe as default};
