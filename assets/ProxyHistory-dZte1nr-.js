import{r as N,j as e,Z as g,I as b,B as m,E as v,t as w}from"./index-D3h9DRY2.js";import{S as C}from"./SEOHead-BsNmCgJT.js";import{C as T,a as H,b as P,c as S}from"./card-Dv5w7cMK.js";import{T as $,a as L,b as h,c as r,d as B,e as i}from"./table-B-X-jUHP.js";import{B as j}from"./badge-DzYE9u37.js";import{b as R}from"./use-backend-CknATFrT.js";import{S as D}from"./search-WLSdVI86.js";import{f as E}from"./format-sbWH3_uq.js";import{C as O}from"./copy-B1RIFTAW.js";import"./useQuery-DjQCpUqu.js";import"./useMutation-iJD4rGZe.js";import"./api-BTF2QDx4.js";function q(){const{data:l,isLoading:p}=R(),[d,u]=N.useState(""),n=l==null?void 0:l.filter(s=>{var a,t;return((t=(a=s.product)==null?void 0:a.name)==null?void 0:t.toLowerCase().includes(d.toLowerCase()))||s.id.toString().includes(d)}),f=s=>{const a=s.map(t=>`${t.host}:${t.port}:${t.username}:${t.password}`).join(`
`);navigator.clipboard.writeText(a),w({title:"Copied",description:"Proxies copied to clipboard."})},y=s=>{const a=s.proxies.map(c=>`${c.host}:${c.port}:${c.username}:${c.password}`).join(`
`),t=new Blob([a],{type:"text/plain"}),o=URL.createObjectURL(t),x=document.createElement("a");x.href=o,x.download=`proxies_order_${s.id}.txt`,x.click(),URL.revokeObjectURL(o)};return e.jsxs(e.Fragment,{children:[e.jsx(C,{title:"Proxy History",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(g,{className:"h-6 w-6 text-primary"}),"Proxy History"]}),e.jsxs("div",{className:"relative w-64",children:[e.jsx(D,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(b,{placeholder:"Search orders...",className:"pl-9",value:d,onChange:s=>u(s.target.value)})]})]}),e.jsxs(T,{children:[e.jsx(H,{children:e.jsx(P,{className:"text-lg",children:"Generated Proxy Orders"})}),e.jsx(S,{children:p?e.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Loading history..."}):(n==null?void 0:n.length)===0?e.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"No orders found."}):e.jsx("div",{className:"rounded-md border",children:e.jsxs($,{children:[e.jsx(L,{children:e.jsxs(h,{children:[e.jsx(r,{children:"Order ID"}),e.jsx(r,{children:"Product"}),e.jsx(r,{children:"Quantity"}),e.jsx(r,{children:"Date"}),e.jsx(r,{children:"Status"}),e.jsx(r,{className:"text-right",children:"Actions"})]})}),e.jsx(B,{children:n.map(s=>{var a,t,o;return e.jsxs(h,{children:[e.jsxs(i,{className:"font-medium text-xs",children:["#",s.id]}),e.jsx(i,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:(a=s.product)==null?void 0:a.name}),e.jsx("span",{className:"text-xs text-muted-foreground uppercase",children:(t=s.product)==null?void 0:t.type})]})}),e.jsx(i,{children:e.jsxs(j,{variant:"secondary",children:[((o=s.proxies)==null?void 0:o.length)||0," Proxies"]})}),e.jsx(i,{className:"text-xs text-muted-foreground",children:E(new Date(s.created_at),"MMM d, yyyy HH:mm")}),e.jsx(i,{children:e.jsx(j,{variant:s.status==="active"?"success":"secondary",className:"capitalize",children:s.status})}),e.jsx(i,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>f(s.proxies),title:"Copy All",children:e.jsx(O,{className:"h-4 w-4"})}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>y(s),title:"Download TXT",children:e.jsx(v,{className:"h-4 w-4"})})]})})]},s.id)})})]})})})]})]})]})}export{q as default};
