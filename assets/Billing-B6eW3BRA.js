import{r as p,K as w,j as e,D as B,I as l,B as h,t as u,N as E,O as P}from"./index-DTmX-7Ix.js";import{S as U}from"./SEOHead-UEUc3vr9.js";import{C as n,a as i,b as r,c}from"./card-DERAon_o.js";import{T as k,a as D,b as N,c as o,d as H,e as d}from"./table-h-rXNTxZ.js";import{B as I}from"./badge-DvtB9Fp3.js";import{L as m}from"./label-C3dtnfne.js";import{S as M}from"./switch-jt5z2rAf.js";import{u as O,c as R,d as L}from"./use-backend-DzI0vN_a.js";import{B as _}from"./bitcoin-Cc6LLj-9.js";import{R as $}from"./refresh-cw-jgR_aMzY.js";import"./useMutation-CdwqAdAS.js";import"./api-CW1y2m9B.js";const F={paid:"default",pending:"secondary",failed:"destructive"},G=[{id:"stripe",name:"Stripe",subtitle:"Credit/Debit Card",icon:E},{id:"paypal",name:"PayPal",subtitle:"PayPal Balance",icon:P},{id:"crypto",name:"Crypto",subtitle:"BTC, ETH, USDT",icon:_}];function te(){const{data:f}=O(),{data:K}=R(),y=L(),[x,j]=p.useState("50"),{gateways:t,autoTopUpEnabled:b}=w(),[g,C]=p.useState(!1),[T,v]=p.useState("5"),A=async s=>{if(s!=="Stripe"){u({title:"Coming Soon",description:`${s} is not yet implemented.`});return}try{await y.mutateAsync({amount:parseFloat(x)})}catch(a){u({title:"Checkout Error",description:a.message,variant:"destructive"})}},S=t.stripe||t.paypal||t.crypto;return e.jsxs(e.Fragment,{children:[e.jsx(U,{title:"Account & Billing",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Account & Billing"}),e.jsxs(n,{children:[e.jsx(i,{children:e.jsxs(r,{className:"flex items-center gap-2 text-lg",children:[e.jsx(B,{className:"h-5 w-5"})," Add Balance"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 max-w-lg",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(m,{children:"Amount ($)"}),e.jsx(l,{type:"number",value:x,onChange:s=>j(s.target.value),min:"5",placeholder:"Enter amount"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(m,{children:"Promo Code (optional)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{placeholder:"WELCOME20"}),e.jsx(h,{variant:"outline",size:"sm",className:"shrink-0",onClick:()=>u({title:"Coupon Applied",description:"20% discount applied to your balance."}),children:"Apply"})]})]})]}),!S&&e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No payment methods are currently available. Please contact support."}),e.jsx("div",{className:"grid gap-3 sm:grid-cols-3",children:G.map(s=>{const a=t[s.id];return e.jsxs(h,{variant:a?"default":"outline",className:`h-auto py-4 flex-col gap-1 ${a?"":"opacity-40 cursor-not-allowed"}`,disabled:!a,onClick:()=>A(s.name),children:[e.jsx(s.icon,{className:"h-6 w-6"}),e.jsx("span",{className:"font-semibold",children:s.name}),e.jsx("span",{className:"text-[11px] font-normal opacity-80",children:s.subtitle}),!a&&e.jsx("span",{className:"text-[10px] font-normal",children:"Not available"})]},s.id)})})]})]}),b&&e.jsxs(n,{children:[e.jsx(i,{children:e.jsxs(r,{className:"flex items-center gap-2 text-lg",children:[e.jsx($,{className:"h-5 w-5"})," Auto Top-Up"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Enable Auto Top-Up"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically add balance when it drops below the threshold"})]}),e.jsx(M,{checked:g,onCheckedChange:C})]}),g&&e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(m,{children:"Min Balance Threshold ($)"}),e.jsx(l,{type:"number",value:T,onChange:s=>v(s.target.value)})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(m,{children:"Top-Up Amount ($)"}),e.jsx(l,{type:"number",value:x,onChange:s=>j(s.target.value)})]})]})]})]}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-3",children:(f??[]).map(s=>e.jsxs(n,{children:[e.jsx(i,{className:"pb-2",children:e.jsx(r,{className:"text-lg",children:s.name})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("p",{className:"text-3xl font-bold",children:["€",Number(s.price).toFixed(2),e.jsx("span",{className:"text-base font-normal text-muted-foreground",children:"/GB"})]}),e.jsx(h,{variant:"default",className:"w-full",asChild:!0,children:e.jsx(Link,{to:"/app/proxies",children:"Generate Now"})})]})]},s.id))}),e.jsxs(n,{children:[e.jsx(i,{children:e.jsx(r,{className:"text-lg",children:"Recent Invoices"})}),e.jsx(c,{className:"p-0",children:e.jsxs(k,{children:[e.jsx(D,{children:e.jsxs(N,{children:[e.jsx(o,{children:"Period"}),e.jsx(o,{children:"Amount"}),e.jsx(o,{children:"Status"}),e.jsx(o,{className:"text-right",children:"Date"})]})}),e.jsx(H,{children:MOCK_INVOICES.map(s=>e.jsxs(N,{children:[e.jsx(d,{className:"font-medium",children:s.period}),e.jsxs(d,{children:["€",(s.amount_cents/100).toFixed(2)]}),e.jsx(d,{children:e.jsx(I,{variant:F[s.status]??"secondary",children:s.status})}),e.jsx(d,{className:"text-right text-sm text-muted-foreground",children:new Date(s.created_at).toLocaleDateString()})]},s.id))})]})})]})]})]})}export{te as default};
