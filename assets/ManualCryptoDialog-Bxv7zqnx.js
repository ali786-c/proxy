import{j as e,y as I,z as S,A as P,E as B,G as k,x as u,H as F}from"./ui-DhchgSRK.js";import{r as i,aA as T,am as A,a2 as E,aI as _,aw as M}from"./vendor-Dios4bpT.js";import{d as U,I as c,t,c as z}from"./index-WnGPYx7J.js";import{L as d}from"./label-CHENNY20.js";function Y({open:j,onOpenChange:p,defaultAmount:y="10",onSuccess:m}){const{settings:s}=U(),[n,v]=i.useState(y),[l,b]=i.useState(""),[o,N]=i.useState(""),[r,D]=i.useState(null),[x,h]=i.useState(!1),g=(s==null?void 0:s.binance_pay_id)||"786112233",C=a=>{navigator.clipboard.writeText(a),t({title:"Copied!",description:"ID copied to clipboard."})},w=async()=>{if(!n||isNaN(parseFloat(n))){t({title:"Error",description:"Please enter a valid amount.",variant:"destructive"});return}if(!l&&!o){t({title:"Error",description:"Please provide either your Binance ID or TXID.",variant:"destructive"});return}if(!r){t({title:"Error",description:"Please upload a screenshot of your payment.",variant:"destructive"});return}h(!0);try{const a=new FormData;a.append("currency","USDT"),a.append("amount",n),l&&a.append("binance_id",l),o&&a.append("txid",o),a.append("proof",r),await z.submitManualCrypto(a),t({title:"Payment Submitted",description:"Admin will review your screenshot shortly. Your balance will be credited upon approval."}),p(!1),m==null||m()}catch(a){t({title:"Submission Failed",description:a.message,variant:"destructive"})}finally{h(!1)}};return e.jsx(I,{open:j,onOpenChange:p,children:e.jsxs(S,{className:"sm:max-w-[450px]",children:[e.jsxs(P,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5 text-orange-500"})," Binance Pay / Manual Crypto"]}),e.jsx(k,{children:"Pay manually via Binance ID and upload proof for instant verification."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"rounded-lg bg-primary/5 border border-primary/20 p-4 space-y-3",children:[e.jsx("p",{className:"text-sm font-medium",children:"Step 1: Send USDT to our Binance ID"}),e.jsxs("div",{className:"flex items-center justify-between bg-background border rounded-md p-2",children:[e.jsx("span",{className:"font-mono text-lg font-bold",children:g}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>C(g),children:e.jsx(A,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-[11px] text-muted-foreground italic text-center",children:(s==null?void 0:s.binance_pay_instructions)||"Please ensure you send the exact amount. Verification usually takes 5-15 mins."})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Amount Sent (â‚¬)"}),e.jsx(c,{type:"number",value:n,onChange:a=>v(a.target.value),placeholder:"0.00"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Your Binance ID"}),e.jsx(c,{value:l,onChange:a=>b(a.target.value),placeholder:"Optional"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"OR TXID"}),e.jsx(c,{value:o,onChange:a=>N(a.target.value),placeholder:"Optional"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Upload Screenshot (Proof)"}),e.jsxs("div",{className:"relative group",children:[e.jsx(c,{type:"file",accept:"image/*",className:"opacity-0 absolute inset-0 w-full h-full cursor-pointer z-10",onChange:a=>{var f;return D(((f=a.target.files)==null?void 0:f[0])||null)}}),e.jsx("div",{className:`border-2 border-dashed rounded-lg p-4 transition-colors flex flex-col items-center gap-2 ${r?"border-green-500 bg-green-500/5":"border-muted-foreground/20 group-hover:border-primary/50"}`,children:r?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-8 w-8 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:r.name})]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"h-8 w-8 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground text-center",children:"Click to upload or drag screenshot"})]})})]})]})]})]}),e.jsxs(F,{children:[e.jsx(u,{variant:"ghost",onClick:()=>p(!1),children:"Cancel"}),e.jsxs(u,{onClick:w,disabled:x,className:"gap-2",children:[x?e.jsx(M,{className:"h-4 w-4 animate-spin"}):null,"Submit Proof"]})]})]})})}export{Y as M};
