import{r as n,z as me,t as $,j as e,E as L,J as O,K as G,N as I,O as T,I as J,a as o,P as Y,k as R,Q as B,i as K}from"./index-Cl2slAZZ.js";import{S as ue}from"./SEOHead-DgXLMDjT.js";import{E as he}from"./ErrorBanner-DFePrb4P.js";import{L as g}from"./label-BrxkBhDm.js";import{C as k,a as F,b as U,c as D}from"./card-B8OYlSOh.js";import{T as pe}from"./textarea-BwQfoX5y.js";import{T as je,a as ye,b as H,c as V}from"./tabs-COxzwz7b.js";import{T as ge,a as fe,b as W,c as f,d as ve,e as v}from"./table-CqP-QKlx.js";import{d as be,e as Ne,f as we}from"./use-backend-B75OJwKu.js";import{D as Ce,a as Pe,b as Se,c as Te,d as $e}from"./dialog-IgnHuk_m.js";import{L as X}from"./loader-circle-BAwQG-yb.js";import{C as Z}from"./copy-Cjpj0xli.js";import{B as ke}from"./bitcoin-P8tXViHT.js";import"./circle-alert-B2Fw2rV4.js";import"./useMutation-C3uQ2xJQ.js";const De={rp:"residential",mp:"mobile",isp:"isp",dc:"datacenter"};function _(t){return`${t.host}:${t.port}:${t.username}:${t.password}`}function Ae(t){return`curl -x http://${t.username}:${t.password}@${t.host}:${t.port} https://httpbin.org/ip`}function Ee(t){return`import requests

proxies = {
    "http": "http://${t.username}:${t.password}@${t.host}:${t.port}",
    "https": "http://${t.username}:${t.password}@${t.host}:${t.port}",
}
response = requests.get("https://httpbin.org/ip", proxies=proxies)
print(response.json())`}function Le(t){return`const HttpsProxyAgent = require('https-proxy-agent');

const agent = new HttpsProxyAgent(
  'http://${t.username}:${t.password}@${t.host}:${t.port}'
);

fetch('https://httpbin.org/ip', { agent })
  .then(res => res.json())
  .then(console.log);`}function Ye(){const{data:t}=be(),{data:d}=Ne(),b=we(),[u,ee]=n.useState(""),[se,te]=n.useState("residential"),[x,ae]=n.useState(""),[re,ne]=n.useState(""),[m,ie]=n.useState("rotating"),[h,oe]=n.useState(1),[l,N]=n.useState(!1),[q,p]=n.useState(null),[i,le]=n.useState([]),[c,M]=n.useState(null),[ce,A]=n.useState(!1),{gateways:w}=me(),de=n.useCallback(async()=>{var s,a;if(p(null),M(null),!u){p("Please select a product.");return}N(!0);try{const r=await b.mutateAsync({product_id:Number(u),quantity:h,country:x||void 0,session_type:m});le(r.proxies||[]),$({title:"Proxies Generated",description:`${((s=r.proxies)==null?void 0:s.length)||0} proxies ready.`})}catch(r){r.status===402&&((a=r.body)!=null&&a.can_direct_purchase)?(M({productId:r.body.product_id,amount:r.body.total_cost}),p(`Insufficient balance. You need €${r.body.total_cost.toFixed(2)} to generate these proxies.`)):p(r.message||"Failed to generate proxies.")}finally{N(!1)}},[u,h,x,m,b]),Q=async s=>{if(c){N(!0);try{if(s==="cryptomus"){const{url:a}=await K.createCryptomusProductCheckout(c.productId.toString(),h,x||void 0,m);window.location.href=a}else{const{url:a}=await K.createProductCheckout(c.productId.toString(),h,x||void 0,m);window.location.href=a}}catch(a){$({title:"Checkout Error",description:a.message,variant:"destructive"})}finally{N(!1),A(!1)}}},xe=n.useCallback(()=>{const s=i.map(_).join(`
`);navigator.clipboard.writeText(s),$({title:"Copied",description:"All proxies copied to clipboard."})},[i]),E=n.useCallback(s=>{let a,r;s==="json"?(a=JSON.stringify(i,null,2),r="application/json"):s==="csv"?(a=`host,port,username,password
`+i.map(S=>`${S.host},${S.port},${S.username},${S.password}`).join(`
`),r="text/csv"):(a=i.map(_).join(`
`),r="text/plain");const P=new Blob([a],{type:r}),j=URL.createObjectURL(P),y=document.createElement("a");y.href=j,y.download=`proxies.${s}`,y.click(),URL.revokeObjectURL(j)},[i]),C=i[0];return e.jsxs(e.Fragment,{children:[e.jsx(ue,{title:"Proxy Generator",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Proxy Generator"}),e.jsxs(k,{children:[e.jsx(F,{children:e.jsx(U,{className:"text-lg",children:"Generate Proxies"})}),e.jsxs(D,{className:"space-y-4",children:[q&&e.jsx(he,{message:q,onDismiss:()=>p(null)}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Product"}),e.jsxs(L,{value:u,onValueChange:s=>{ee(s);const a=(t??[]).find(r=>r.id.toString()===s);a&&te(a.type)},children:[e.jsx(O,{children:e.jsx(G,{placeholder:"Select Product..."})}),e.jsx(I,{children:(t??[]).map(s=>e.jsx(T,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Country"}),e.jsxs(L,{value:x,onValueChange:ae,children:[e.jsx(O,{children:e.jsx(G,{placeholder:"Select..."})}),e.jsx(I,{children:(()=>{var r,P;const s=De[se]||"residential",a=((P=(r=d==null?void 0:d.data)==null?void 0:r[s])==null?void 0:P.countries)||{};return Object.entries(a).map(([j,y])=>e.jsx(T,{value:j,children:y},j))})()})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"City (optional)"}),e.jsx(J,{value:re,onChange:s=>ne(s.target.value),placeholder:"Any"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Session Type"}),e.jsxs(L,{value:m,onValueChange:ie,children:[e.jsx(O,{children:e.jsx(G,{})}),e.jsxs(I,{children:[e.jsx(T,{value:"rotating",children:"Rotating"}),e.jsx(T,{value:"sticky",children:"Sticky"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Quantity"}),e.jsx(J,{type:"number",min:1,max:1e3,value:h,onChange:s=>oe(Number(s.target.value))})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(o,{onClick:de,disabled:l,children:[l&&!c&&e.jsx(X,{className:"mr-2 h-4 w-4 animate-spin"}),l&&!c?"Generating…":"Generate Proxies"]}),c&&e.jsxs(o,{variant:"secondary",onClick:()=>A(!0),disabled:l,className:"gap-2",children:[l?e.jsx(X,{className:"h-4 w-4 animate-spin"}):e.jsx(Y,{className:"h-4 w-4"}),"Pay €",c.amount.toFixed(2)," & Generate"]})]})]})]}),i.length>0&&e.jsxs(je,{defaultValue:"output",children:[e.jsx("div",{className:"flex items-center justify-between flex-wrap gap-2",children:e.jsxs(ye,{children:[e.jsx(H,{value:"output",children:"Output"}),e.jsx(H,{value:"table",children:"Table View"}),e.jsx(H,{value:"snippets",children:"Config Snippets"})]})}),e.jsx(V,{value:"output",className:"mt-4",children:e.jsxs(k,{children:[e.jsx(F,{className:"flex flex-row items-center justify-between pb-2",children:e.jsxs(U,{className:"text-sm",children:[e.jsx(R,{variant:"secondary",className:"mr-2",children:i.length}),"proxies generated • ",u," • ",x," • ",m]})}),e.jsxs(D,{className:"space-y-3",children:[e.jsx(pe,{readOnly:!0,className:"font-mono text-xs leading-relaxed min-h-[200px] max-h-[400px] resize-y bg-muted",value:i.map(_).join(`
`),onFocus:s=>s.target.select()}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(o,{variant:"default",size:"sm",onClick:xe,children:[e.jsx(Z,{className:"mr-1.5 h-3.5 w-3.5"})," Copy All"]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>E("txt"),children:[e.jsx(B,{className:"mr-1.5 h-3.5 w-3.5"})," Download .txt"]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>E("csv"),children:[e.jsx(B,{className:"mr-1.5 h-3.5 w-3.5"})," Download .csv"]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>E("json"),children:[e.jsx(B,{className:"mr-1.5 h-3.5 w-3.5"})," Download .json"]})]})]})]})}),e.jsx(V,{value:"table",className:"mt-4",children:e.jsx(k,{children:e.jsx(D,{className:"p-0",children:e.jsx("div",{className:"max-h-96 overflow-auto",children:e.jsxs(ge,{children:[e.jsx(fe,{children:e.jsxs(W,{children:[e.jsx(f,{className:"w-12",children:"#"}),e.jsx(f,{children:"Host"}),e.jsx(f,{children:"Port"}),e.jsx(f,{children:"Username"}),e.jsx(f,{children:"Password"})]})}),e.jsx(ve,{children:i.map((s,a)=>e.jsxs(W,{children:[e.jsx(v,{className:"text-muted-foreground",children:a+1}),e.jsx(v,{className:"font-mono text-xs",children:s.host}),e.jsx(v,{className:"font-mono text-xs",children:s.port}),e.jsx(v,{className:"font-mono text-xs",children:s.username}),e.jsx(v,{className:"font-mono text-xs",children:s.password})]},a))})]})})})})}),e.jsx(V,{value:"snippets",className:"mt-4 space-y-4",children:C&&e.jsxs(e.Fragment,{children:[e.jsx(z,{title:"cURL",code:Ae(C)}),e.jsx(z,{title:"Python (requests)",code:Ee(C)}),e.jsx(z,{title:"Node.js (fetch)",code:Le(C)})]})})]})]}),e.jsx(Ce,{open:ce,onOpenChange:A,children:e.jsxs(Pe,{className:"sm:max-w-md",children:[e.jsxs(Se,{children:[e.jsx(Te,{children:"Select Payment Method"}),e.jsx($e,{children:"Choose how you want to pay for these proxies."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[w.stripe&&e.jsxs(o,{variant:"outline",className:"flex items-center justify-between p-6 h-auto",onClick:()=>Q("stripe"),disabled:l,children:[e.jsxs("div",{className:"flex items-center gap-3 text-left",children:[e.jsx(Y,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Credit/Debit Card"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Secure via Stripe"})]})]}),e.jsx(R,{variant:"secondary",className:"bg-primary/10 text-primary border-primary/20",children:"+VAT"})]}),w.cryptomus&&e.jsxs(o,{variant:"outline",className:"flex items-center justify-between p-6 h-auto",onClick:()=>Q("cryptomus"),disabled:l,children:[e.jsxs("div",{className:"flex items-center gap-3 text-left",children:[e.jsx(ke,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Cryptocurrency"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Automated via Cryptomus"})]})]}),e.jsx(R,{variant:"secondary",className:"bg-green-500/10 text-green-600 border-green-200",children:"VAT-FREE"})]}),!w.stripe&&!w.cryptomus&&e.jsx("p",{className:"text-center text-sm text-muted-foreground italic",children:"No payment methods available. Please contact support."})]})]})})]})}function z({title:t,code:d}){const b=()=>{navigator.clipboard.writeText(d),$({title:"Copied",description:`${t} snippet copied.`})};return e.jsxs(k,{children:[e.jsxs(F,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(U,{className:"text-sm",children:t}),e.jsxs(o,{variant:"ghost",size:"sm",onClick:b,children:[e.jsx(Z,{className:"mr-1 h-3.5 w-3.5"})," Copy"]})]}),e.jsx(D,{children:e.jsx("pre",{className:"overflow-x-auto rounded-md bg-muted p-3 text-xs leading-relaxed",children:d})})]})}export{Ye as default};
