import{P as $,r as t,j as e,I as a,D as V,n as z,Q as H,e as L,v as W,w as G,x as Q,y as _,z as h,B as q,t as J}from"./index-AMVWoFUG.js";import{S as K}from"./SEOHead-CHZvE3pk.js";import{C as i,a as o,b as d,c as m,d as X}from"./card-DpvZaonW.js";import{L as r}from"./label-vejPJHHB.js";import{S as x}from"./switch-Bt-EQhch.js";import{B as j}from"./badge-GnBnn40f.js";import{R as Y}from"./refresh-cw-DnRTbhE9.js";import{B as Z}from"./bitcoin-hllMupzw.js";const g=[{id:"stripe",name:"Stripe",icon:z,desc:"Charge client's saved card via Stripe"},{id:"paypal",name:"PayPal",icon:H,desc:"Charge client's PayPal agreement"},{id:"crypto",name:"Crypto Wallet",icon:Z,desc:"Deduct from client's crypto deposit"}];function ie(){const{autoTopUpEnabled:f,setAutoTopUpEnabled:y,gateways:p}=$(),[c,N]=t.useState(f),[v,b]=t.useState("5"),[S,C]=t.useState("50"),[w,T]=t.useState("500"),[u,U]=t.useState("stripe"),[A,k]=t.useState("paypal"),[B,E]=t.useState("3"),[P,R]=t.useState("60"),[O,M]=t.useState(!0),[D,I]=t.useState(!0),F=()=>{y(c),J({title:"Settings Saved",description:"Auto top-up configuration updated."})};return e.jsxs(e.Fragment,{children:[e.jsx(K,{title:"Top-Up Settings",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Top-Up & Balance Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure automatic balance top-up for client accounts and control which payment source to charge."})]}),e.jsxs(i,{children:[e.jsx(o,{children:e.jsxs(d,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Y,{className:"h-5 w-5"})," Client Auto Top-Up"]})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Enable Auto Top-Up for Clients"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Allow clients to opt-in to automatic balance replenishment"})]}),e.jsx(x,{checked:c,onCheckedChange:s=>N(s)})]}),c&&e.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(r,{children:"Min Balance Threshold ($)"}),e.jsx(a,{type:"number",value:v,onChange:s=>b(s.target.value)}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Top-up triggers when balance falls below this"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(r,{children:"Default Top-Up Amount ($)"}),e.jsx(a,{type:"number",value:S,onChange:s=>C(s.target.value)})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(r,{children:"Max Monthly Top-Up ($)"}),e.jsx(a,{type:"number",value:w,onChange:s=>T(s.target.value)}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Safety cap per client per month"})]})]})]})]}),e.jsxs(i,{children:[e.jsxs(o,{children:[e.jsxs(d,{className:"flex items-center gap-2 text-lg",children:[e.jsx(V,{className:"h-5 w-5"})," Auto Top-Up Source Provider"]}),e.jsx(X,{children:"Choose which payment method to charge clients from when auto top-up triggers. Only enabled gateways can be selected."})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsx("div",{className:"grid gap-3 sm:grid-cols-3",children:g.map(s=>{const n=p[s.id],l=u===s.id;return e.jsxs("button",{onClick:()=>n&&U(s.id),disabled:!n,className:`relative flex flex-col items-center gap-2 rounded-lg border-2 p-4 transition-all text-center ${l?"border-primary bg-primary/5":n?"border-border hover:border-primary/50 cursor-pointer":"border-border opacity-40 cursor-not-allowed"}`,children:[l&&e.jsx("div",{className:"absolute top-2 right-2 rounded-full bg-primary p-0.5",children:e.jsx(L,{className:"h-3 w-3 text-primary-foreground"})}),e.jsx(s.icon,{className:`h-6 w-6 ${l?"text-primary":"text-muted-foreground"}`}),e.jsx("span",{className:"font-semibold text-sm",children:s.name}),e.jsx("span",{className:"text-[11px] text-muted-foreground",children:s.desc}),!n&&e.jsx(j,{variant:"secondary",className:"text-[10px]",children:"Gateway disabled"}),l&&e.jsx(j,{className:"text-[10px]",children:"Primary"})]},s.id)})}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(r,{children:"Fallback Source"}),e.jsxs(W,{value:A,onValueChange:k,children:[e.jsx(G,{children:e.jsx(Q,{})}),e.jsxs(_,{children:[e.jsx(h,{value:"none",children:"No fallback"}),g.filter(s=>s.id!==u&&p[s.id]).map(s=>e.jsx(h,{value:s.id,children:s.name},s.id))]})]}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Used if primary source fails"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(r,{children:"Retry Attempts"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{type:"number",value:B,onChange:s=>E(s.target.value),className:"w-20"}),e.jsx("span",{className:"text-sm text-muted-foreground self-center",children:"attempts, every"}),e.jsx(a,{type:"number",value:P,onChange:s=>R(s.target.value),className:"w-20"}),e.jsx("span",{className:"text-sm text-muted-foreground self-center",children:"min"})]})]})]})]})]}),e.jsxs(i,{children:[e.jsx(o,{children:e.jsx(d,{className:"text-lg",children:"Top-Up Notifications"})}),e.jsxs(m,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-md border p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Notify client on successful charge"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Send email when auto top-up completes"})]}),e.jsx(x,{checked:O,onCheckedChange:M})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-md border p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Notify admin on charge failure"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Alert when auto top-up fails after all retries"})]}),e.jsx(x,{checked:D,onCheckedChange:I})]})]})]}),e.jsx(q,{onClick:F,size:"lg",className:"gap-2",children:"Save All Settings"})]})]})}export{ie as default};
