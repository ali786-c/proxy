import{j as e,S as D,r as t,I as u,B as o,t as w}from"./index-DacMd7GX.js";import{S as O}from"./SEOHead-DOu6mKjt.js";import{E as G}from"./ErrorBanner-Dm1ikwJA.js";import{E as K}from"./EmptyState-BK6Vd0kN.js";import{L as _}from"./label-uRzQCEHp.js";import{C as b,a as L,b as E,c as S}from"./card-CDzokvzu.js";import{T as k,a as R,b as C,c as i,d as q,e as n}from"./table-T_XK2yVw.js";import{B as P}from"./badge-DZwzj0vn.js";import{T as F,a as Y,b as T,c as A}from"./tabs-GETwA-j_.js";import{D as M,a as V,b as J,c as Q,d as W,e as X,f as ee}from"./dialog-C5pPu8HX.js";import{K as B}from"./key-Cfzbmy17.js";import{P as U}from"./plus-Bab4BqYS.js";import{T as $}from"./trash-2-DCp6zw2-.js";import{C as se}from"./copy-CimNcdlL.js";import"./circle-alert-NoFHIv6l.js";const ae=[{id:"1",ip:"203.0.113.42",label:"Production server",created_at:"2026-02-10T10:00:00Z"},{id:"2",ip:"198.51.100.7",label:"Staging",created_at:"2026-02-15T14:00:00Z"}],te=[{id:"1",name:"Production",key_prefix:"upx_prod_****",allowed_countries:["US","UK"],daily_gb_cap:50,daily_request_cap:1e5,allowed_scopes:["proxy:generate","usage:read"],created_at:"2026-01-20T10:00:00Z",last_used_at:"2026-02-20T08:30:00Z"},{id:"2",name:"Testing",key_prefix:"upx_test_****",allowed_countries:[],daily_gb_cap:5,daily_request_cap:1e4,allowed_scopes:["proxy:generate"],created_at:"2026-02-01T12:00:00Z",last_used_at:null}];function fe(){return e.jsxs(e.Fragment,{children:[e.jsx(O,{title:"Settings",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Settings"}),e.jsxs(F,{defaultValue:"allowlist",children:[e.jsxs(Y,{children:[e.jsxs(T,{value:"allowlist",children:[e.jsx(D,{className:"mr-1 h-3.5 w-3.5"})," IP Allowlist"]}),e.jsxs(T,{value:"api-keys",children:[e.jsx(B,{className:"mr-1 h-3.5 w-3.5"})," API Keys"]})]}),e.jsx(A,{value:"allowlist",className:"mt-4",children:e.jsx(le,{})}),e.jsx(A,{value:"api-keys",className:"mt-4",children:e.jsx(ie,{})})]})]})]})}function le(){const[j,g]=t.useState(ae),[x,f]=t.useState(""),[c,y]=t.useState(""),[m,d]=t.useState(null),N=()=>{d(null);const a=x.trim();if(!a){d("IP address is required.");return}if(!/^\d{1,3}(\.\d{1,3}){3}(\/\d{1,2})?$/.test(a)){d("Enter a valid IPv4 address or CIDR range.");return}const p={id:Date.now().toString(),ip:a,label:c.trim()||void 0,created_at:new Date().toISOString()};g(h=>[...h,p]),f(""),y(""),w({title:"IP Added",description:`${a} added to allowlist.`})},v=a=>{g(p=>p.filter(h=>h.id!==a)),w({title:"Removed",description:"IP removed from allowlist."})};return e.jsxs(b,{children:[e.jsx(L,{children:e.jsx(E,{className:"text-lg",children:"IP Allowlist"})}),e.jsxs(S,{className:"space-y-4",children:[m&&e.jsx(G,{message:m,onDismiss:()=>d(null)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{placeholder:"203.0.113.0/24",value:x,onChange:a=>f(a.target.value),className:"max-w-xs"}),e.jsx(u,{placeholder:"Label (optional)",value:c,onChange:a=>y(a.target.value),className:"max-w-xs"}),e.jsxs(o,{onClick:N,children:[e.jsx(U,{className:"mr-1 h-4 w-4"})," Add"]})]}),j.length===0?e.jsx(K,{icon:D,title:"No IPs allowlisted",description:"Add your server IPs to authenticate without credentials."}):e.jsxs(k,{children:[e.jsx(R,{children:e.jsxs(C,{children:[e.jsx(i,{children:"IP Address"}),e.jsx(i,{children:"Label"}),e.jsx(i,{children:"Added"}),e.jsx(i,{className:"w-12"})]})}),e.jsx(q,{children:j.map(a=>e.jsxs(C,{children:[e.jsx(n,{className:"font-mono text-sm",children:a.ip}),e.jsx(n,{className:"text-sm text-muted-foreground",children:a.label??"—"}),e.jsx(n,{className:"text-xs text-muted-foreground",children:new Date(a.created_at).toLocaleDateString()}),e.jsx(n,{children:e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>v(a.id),"aria-label":"Remove",children:e.jsx($,{className:"h-4 w-4 text-destructive"})})})]},a.id))})]})]})]})}const re=["proxy:generate","usage:read","allowlist:manage","keys:manage"];function ie(){const[j,g]=t.useState(te),[x,f]=t.useState(null),[c,y]=t.useState(""),[m,d]=t.useState(""),[N,v]=t.useState(""),[a,p]=t.useState(""),[h,I]=t.useState(["proxy:generate"]),H=s=>{I(l=>l.includes(s)?l.filter(r=>r!==s):[...l,s])},Z=()=>{if(!c.trim())return;const s=`upx_${c.toLowerCase().replace(/\s/g,"_")}_${Math.random().toString(36).slice(2,14)}`,l={id:Date.now().toString(),name:c.trim(),key_prefix:s.slice(0,12)+"****",allowed_countries:m?m.split(",").map(r=>r.trim().toUpperCase()):[],daily_gb_cap:N?Number(N):null,daily_request_cap:a?Number(a):null,allowed_scopes:h,created_at:new Date().toISOString(),last_used_at:null};g(r=>[...r,l]),f(s),y(""),d(""),v(""),p(""),I(["proxy:generate"]),w({title:"API Key Created",description:"Copy it now — it won't be shown again."})},z=s=>{g(l=>l.filter(r=>r.id!==s)),w({title:"Revoked",description:"API key has been revoked."})};return e.jsxs("div",{className:"space-y-4",children:[x&&e.jsx(b,{className:"border-primary",children:e.jsxs(S,{className:"flex items-center justify-between gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Your new API key (copy now — shown once):"}),e.jsx("code",{className:"mt-1 block text-xs font-mono text-primary",children:x})]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(x),w({title:"Copied"})},children:[e.jsx(se,{className:"mr-1 h-3.5 w-3.5"})," Copy"]})]})}),e.jsxs(b,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between",children:[e.jsx(E,{className:"text-lg",children:"API Keys"}),e.jsxs(M,{children:[e.jsx(V,{asChild:!0,children:e.jsxs(o,{size:"sm",children:[e.jsx(U,{className:"mr-1 h-4 w-4"})," Create Key"]})}),e.jsxs(J,{children:[e.jsx(Q,{children:e.jsx(W,{children:"Create API Key"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Key Name"}),e.jsx(u,{value:c,onChange:s=>y(s.target.value),placeholder:"Production"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Allowed Countries (comma-separated, optional)"}),e.jsx(u,{value:m,onChange:s=>d(s.target.value),placeholder:"US, UK, DE"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Daily GB Cap"}),e.jsx(u,{type:"number",value:N,onChange:s=>v(s.target.value),placeholder:"No limit"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Daily Request Cap"}),e.jsx(u,{type:"number",value:a,onChange:s=>p(s.target.value),placeholder:"No limit"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Scopes"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:re.map(s=>e.jsx(P,{variant:h.includes(s)?"default":"outline",className:"cursor-pointer",onClick:()=>H(s),children:s},s))})]})]}),e.jsxs(X,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(o,{variant:"outline",children:"Cancel"})}),e.jsx(o,{onClick:Z,disabled:!c.trim(),children:"Create"})]})]})]})]}),e.jsx(S,{className:"p-0",children:j.length===0?e.jsx("div",{className:"p-6",children:e.jsx(K,{icon:B,title:"No API keys",description:"Create a key to access the UpgradedProxy API programmatically."})}):e.jsxs(k,{children:[e.jsx(R,{children:e.jsxs(C,{children:[e.jsx(i,{children:"Name"}),e.jsx(i,{children:"Key"}),e.jsx(i,{children:"Scopes"}),e.jsx(i,{children:"Limits"}),e.jsx(i,{children:"Last Used"}),e.jsx(i,{className:"w-12"})]})}),e.jsx(q,{children:j.map(s=>{var l;return e.jsxs(C,{children:[e.jsx(n,{className:"font-medium text-sm",children:s.name}),e.jsx(n,{className:"font-mono text-xs",children:s.key_prefix}),e.jsx(n,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:(l=s.allowed_scopes)==null?void 0:l.map(r=>e.jsx(P,{variant:"secondary",className:"text-[10px]",children:r},r))})}),e.jsxs(n,{className:"text-xs text-muted-foreground",children:[s.daily_gb_cap?`${s.daily_gb_cap} GB/d`:"—",s.daily_request_cap?` / ${s.daily_request_cap.toLocaleString()} req/d`:""]}),e.jsx(n,{className:"text-xs text-muted-foreground",children:s.last_used_at?new Date(s.last_used_at).toLocaleDateString():"Never"}),e.jsx(n,{children:e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>z(s.id),"aria-label":"Revoke",children:e.jsx($,{className:"h-4 w-4 text-destructive"})})})]},s.id)})})]})})]})]})}export{fe as default};
