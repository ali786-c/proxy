import{m as y,r as t,j as e,a as l,b as P,I as x}from"./index-CJ7KnT-1.js";import{c as k}from"./dashboard-BpxTb2fm.js";import{S as c}from"./SEOHead-CfpahmF3.js";import{L as h}from"./label-BvVlnkbA.js";import{C}from"./circle-check-BpO-fQwn.js";import{L}from"./loader-circle-Yt0XJMsW.js";function I(){const p=y(),[r,f]=t.useState(""),[o,w]=t.useState(""),[d,m]=t.useState(!1),[j,g]=t.useState(!1),[u,n]=t.useState(null),[N,b]=t.useState(!1);t.useEffect(()=>{const s=new URLSearchParams(window.location.search),a=s.get("token"),i=s.get("email");a&&i&&b(!0)},[]);const v=async s=>{if(s.preventDefault(),r!==o){n("Passwords do not match");return}if(r.length<8){n("Password must be at least 8 characters");return}m(!0),n(null);try{const a=new URLSearchParams(window.location.search),i=a.get("token"),S=a.get("email");await k.resetPassword({token:i,email:S,password:r,password_confirmation:o}),g(!0)}catch(a){n(a.message)}finally{m(!1)}};return j?e.jsxs(e.Fragment,{children:[e.jsx(c,{title:"Password Updated",noindex:!0}),e.jsx("div",{className:"flex min-h-screen items-center justify-center px-4",children:e.jsxs("div",{className:"w-full max-w-sm space-y-4 rounded-lg border bg-card p-8 text-center",children:[e.jsx(C,{className:"mx-auto h-12 w-12 text-success"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Password Updated"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your password has been successfully reset."}),e.jsx(l,{className:"w-full",onClick:()=>p("/app",{replace:!0}),children:"Go to Dashboard"})]})})]}):N?e.jsxs(e.Fragment,{children:[e.jsx(c,{title:"Reset Password",noindex:!0}),e.jsx("div",{className:"flex min-h-screen items-center justify-center px-4",children:e.jsxs("form",{onSubmit:v,className:"w-full max-w-sm space-y-4 rounded-lg border bg-card p-8",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Set New Password"}),u&&e.jsx("p",{className:"text-sm text-destructive",children:u}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"password",children:"New Password"}),e.jsx(x,{id:"password",type:"password",value:r,onChange:s=>f(s.target.value),minLength:8,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"confirm",children:"Confirm Password"}),e.jsx(x,{id:"confirm",type:"password",value:o,onChange:s=>w(s.target.value),required:!0})]}),e.jsxs(l,{type:"submit",className:"w-full",disabled:d,children:[d&&e.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Password"]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{title:"Reset Password",noindex:!0}),e.jsx("div",{className:"flex min-h-screen items-center justify-center px-4",children:e.jsxs("div",{className:"w-full max-w-sm space-y-4 rounded-lg border bg-card p-8 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Invalid or Expired Link"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This password reset link is invalid or has expired."}),e.jsx(l,{variant:"outline",className:"w-full",asChild:!0,children:e.jsx(P,{to:"/forgot-password",children:"Request a New Link"})})]})})]})}export{I as default};
