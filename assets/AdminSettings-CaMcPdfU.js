import{U as _,r as h,i as S,j as e,a as C,G as b,I as i,aI as w,S as q,t as j,ae as g}from"./index-D5UIMIAT.js";import{u as P}from"./useMutation-CgtBru7h.js";import{S as E}from"./SEOHead-D-mAupIa.js";import{C as d,a as m,b as o,c as x}from"./card-rwfYRBA5.js";import{L as n}from"./label-DoNXWbzT.js";import{S as u}from"./switch-JzKzOiW_.js";import{S as k}from"./save-DZgkH0Tx.js";function H(){const f=_(),[a,p]=h.useState({}),{data:r={},isLoading:v}=S({queryKey:["admin-settings"],queryFn:()=>g.get("/admin/settings",s=>s)});h.useEffect(()=>{r&&p(r)},[r]);const l=P({mutationFn:s=>g.post("/admin/settings",c=>c,s),onSuccess:()=>{f.invalidateQueries({queryKey:["admin-settings"]}),j({title:"Settings Saved",description:"System configuration updated successfully."})},onError:s=>j({title:"Error",description:s.message,variant:"destructive"})}),t=(s,c)=>{p(y=>({...y,[s]:c}))},N=()=>{l.mutate(a)};return v?e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Loading settings..."}):e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Admin — Settings",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"System Settings"}),e.jsxs(C,{onClick:N,disabled:l.isPending,children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),l.isPending?"Saving...":"Save All Changes"]})]}),e.jsxs(d,{children:[e.jsx(m,{children:e.jsxs(o,{className:"flex items-center gap-2 text-lg",children:[e.jsx(b,{className:"h-5 w-5"})," General"]})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{children:"Site Name"}),e.jsx(i,{value:a.site_name||"",onChange:s=>t("site_name",s.target.value),placeholder:"UpgradedProxy"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{children:"Support Email"}),e.jsx(i,{value:a.support_email||"",onChange:s=>t("support_email",s.target.value),placeholder:"support@upgradedproxy.com"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Maintenance Mode"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Disable public access temporarily"})]}),e.jsx(u,{checked:a.maintenance_mode==="1"||a.maintenance_mode===!0,onCheckedChange:s=>t("maintenance_mode",s)})]})]})]}),e.jsxs(d,{children:[e.jsx(m,{children:e.jsxs(o,{className:"flex items-center gap-2 text-lg",children:[e.jsx(w,{className:"h-5 w-5"})," Email / SMTP"]})}),e.jsx(x,{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{children:"SMTP Host"}),e.jsx(i,{value:a.smtp_host||"",onChange:s=>t("smtp_host",s.target.value),placeholder:"smtp.example.com"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{children:"SMTP Port"}),e.jsx(i,{value:a.smtp_port||"",onChange:s=>t("smtp_port",s.target.value),placeholder:"587"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{children:"Username"}),e.jsx(i,{value:a.smtp_user||"",onChange:s=>t("smtp_user",s.target.value),placeholder:"user@example.com"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{children:"Password"}),e.jsx(i,{type:"password",value:a.smtp_pass||"",onChange:s=>t("smtp_pass",s.target.value),placeholder:"••••••••"})]})]})})]}),e.jsxs(d,{children:[e.jsx(m,{children:e.jsxs(o,{className:"flex items-center gap-2 text-lg",children:[e.jsx(q,{className:"h-5 w-5"})," Security"]})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"2FA Required for Admin"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Force all admins to use two-factor authentication"})]}),e.jsx(u,{checked:a.admin_2fa_required==="1"||a.admin_2fa_required===!0,onCheckedChange:s=>t("admin_2fa_required",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Rate Limiting"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Limit API requests per minute to prevent abuse"})]}),e.jsx(u,{checked:a.rate_limiting_enabled==="1"||a.rate_limiting_enabled===!0,onCheckedChange:s=>t("rate_limiting_enabled",s)})]})]})]})]})]})}export{H as default};
