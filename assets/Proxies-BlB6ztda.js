import{r as n,t as $,j as e,x as A,y as E,z as G,E as I,J as S,I as V,a as i,K as oe,N as O}from"./index-uv7RKa8h.js";import{S as ie}from"./SEOHead-D4EfXKfM.js";import{E as le}from"./ErrorBanner-s_kypXK4.js";import{L as y}from"./label-CfxDIkHK.js";import{C as T,a as D,b as H,c as k}from"./card-VS78f1Pp.js";import{T as ce}from"./textarea-DC1DPGSI.js";import{T as de,a as xe,b as R,c as _}from"./tabs-BBMfswfJ.js";import{T as ue,a as me,b as q,c as g,d as he,e as f}from"./table-DuCi45QL.js";import{B as pe}from"./badge-BXbAltru.js";import{d as je,e as ye,f as ge}from"./use-backend-QIDQpZrQ.js";import{c as fe}from"./dashboard-BJhQ00ui.js";import{L as J}from"./loader-circle-Dk7HOFAw.js";import{C as Q}from"./copy-CzjWUTOz.js";import"./circle-alert-oUv2dtCf.js";import"./useMutation-DUDPJtMj.js";const be={rp:"residential",mp:"mobile",isp:"isp",dc:"datacenter"};function z(t){return`${t.host}:${t.port}:${t.username}:${t.password}`}function ve(t){return`curl -x http://${t.username}:${t.password}@${t.host}:${t.port} https://httpbin.org/ip`}function Ne(t){return`import requests

proxies = {
    "http": "http://${t.username}:${t.password}@${t.host}:${t.port}",
    "https": "http://${t.username}:${t.password}@${t.host}:${t.port}",
}
response = requests.get("https://httpbin.org/ip", proxies=proxies)
print(response.json())`}function we(t){return`const HttpsProxyAgent = require('https-proxy-agent');

const agent = new HttpsProxyAgent(
  'http://${t.username}:${t.password}@${t.host}:${t.port}'
);

fetch('https://httpbin.org/ip', { agent })
  .then(res => res.json())
  .then(console.log);`}function Be(){const{data:t}=je(),{data:l}=ye(),b=ge(),[d,Y]=n.useState(""),[K,M]=n.useState("residential"),[x,W]=n.useState(""),[X,Z]=n.useState(""),[u,ee]=n.useState("rotating"),[v,se]=n.useState(1),[m,N]=n.useState(!1),[F,h]=n.useState(null),[o,te]=n.useState([]),[c,U]=n.useState(null),ae=n.useCallback(async()=>{var s,r;if(h(null),U(null),!d){h("Please select a product.");return}N(!0);try{const a=await b.mutateAsync({product_id:Number(d),quantity:v,country:x||void 0,session_type:u});te(a.proxies||[]),$({title:"Proxies Generated",description:`${((s=a.proxies)==null?void 0:s.length)||0} proxies ready.`})}catch(a){a.status===402&&((r=a.body)!=null&&r.can_direct_purchase)?(U({productId:a.body.product_id,amount:a.body.total_cost}),h(`Insufficient balance. You need €${a.body.total_cost.toFixed(2)} to generate these proxies.`)):h(a.message||"Failed to generate proxies.")}finally{N(!1)}},[d,v,x,u,b]),re=async()=>{if(c){N(!0);try{const{url:s}=await fe.createProductCheckout(c.productId.toString(),v,x||void 0,u);window.location.href=s}catch(s){$({title:"Checkout Error",description:s.message,variant:"destructive"})}finally{N(!1)}}},ne=n.useCallback(()=>{const s=o.map(z).join(`
`);navigator.clipboard.writeText(s),$({title:"Copied",description:"All proxies copied to clipboard."})},[o]),L=n.useCallback(s=>{let r,a;s==="json"?(r=JSON.stringify(o,null,2),a="application/json"):s==="csv"?(r=`host,port,username,password
`+o.map(P=>`${P.host},${P.port},${P.username},${P.password}`).join(`
`),a="text/csv"):(r=o.map(z).join(`
`),a="text/plain");const C=new Blob([r],{type:a}),p=URL.createObjectURL(C),j=document.createElement("a");j.href=p,j.download=`proxies.${s}`,j.click(),URL.revokeObjectURL(p)},[o]),w=o[0];return e.jsxs(e.Fragment,{children:[e.jsx(ie,{title:"Proxy Generator",noindex:!0}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Proxy Generator"}),e.jsxs(T,{children:[e.jsx(D,{children:e.jsx(H,{className:"text-lg",children:"Generate Proxies"})}),e.jsxs(k,{className:"space-y-4",children:[F&&e.jsx(le,{message:F,onDismiss:()=>h(null)}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Product"}),e.jsxs(A,{value:d,onValueChange:s=>{Y(s);const r=(t??[]).find(a=>a.id.toString()===s);r&&M(r.type)},children:[e.jsx(E,{children:e.jsx(G,{placeholder:"Select Product..."})}),e.jsx(I,{children:(t??[]).map(s=>e.jsx(S,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Country"}),e.jsxs(A,{value:x,onValueChange:W,children:[e.jsx(E,{children:e.jsx(G,{placeholder:"Select..."})}),e.jsx(I,{children:(()=>{var a,C;const s=be[K]||"residential",r=((C=(a=l==null?void 0:l.data)==null?void 0:a[s])==null?void 0:C.countries)||{};return Object.entries(r).map(([p,j])=>e.jsx(S,{value:p,children:j},p))})()})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"City (optional)"}),e.jsx(V,{value:X,onChange:s=>Z(s.target.value),placeholder:"Any"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Session Type"}),e.jsxs(A,{value:u,onValueChange:ee,children:[e.jsx(E,{children:e.jsx(G,{})}),e.jsxs(I,{children:[e.jsx(S,{value:"rotating",children:"Rotating"}),e.jsx(S,{value:"sticky",children:"Sticky"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Quantity"}),e.jsx(V,{type:"number",min:1,max:1e3,value:v,onChange:s=>se(Number(s.target.value))})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(i,{onClick:ae,disabled:m,children:[m&&!c&&e.jsx(J,{className:"mr-2 h-4 w-4 animate-spin"}),m&&!c?"Generating…":"Generate Proxies"]}),c&&e.jsxs(i,{variant:"secondary",onClick:re,disabled:m,className:"gap-2",children:[m?e.jsx(J,{className:"h-4 w-4 animate-spin"}):e.jsx(oe,{className:"h-4 w-4"}),"Pay €",c.amount.toFixed(2)," & Generate"]})]})]})]}),o.length>0&&e.jsxs(de,{defaultValue:"output",children:[e.jsx("div",{className:"flex items-center justify-between flex-wrap gap-2",children:e.jsxs(xe,{children:[e.jsx(R,{value:"output",children:"Output"}),e.jsx(R,{value:"table",children:"Table View"}),e.jsx(R,{value:"snippets",children:"Config Snippets"})]})}),e.jsx(_,{value:"output",className:"mt-4",children:e.jsxs(T,{children:[e.jsx(D,{className:"flex flex-row items-center justify-between pb-2",children:e.jsxs(H,{className:"text-sm",children:[e.jsx(pe,{variant:"secondary",className:"mr-2",children:o.length}),"proxies generated • ",d," • ",x," • ",u]})}),e.jsxs(k,{className:"space-y-3",children:[e.jsx(ce,{readOnly:!0,className:"font-mono text-xs leading-relaxed min-h-[200px] max-h-[400px] resize-y bg-muted",value:o.map(z).join(`
`),onFocus:s=>s.target.select()}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(i,{variant:"default",size:"sm",onClick:ne,children:[e.jsx(Q,{className:"mr-1.5 h-3.5 w-3.5"})," Copy All"]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>L("txt"),children:[e.jsx(O,{className:"mr-1.5 h-3.5 w-3.5"})," Download .txt"]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>L("csv"),children:[e.jsx(O,{className:"mr-1.5 h-3.5 w-3.5"})," Download .csv"]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>L("json"),children:[e.jsx(O,{className:"mr-1.5 h-3.5 w-3.5"})," Download .json"]})]})]})]})}),e.jsx(_,{value:"table",className:"mt-4",children:e.jsx(T,{children:e.jsx(k,{className:"p-0",children:e.jsx("div",{className:"max-h-96 overflow-auto",children:e.jsxs(ue,{children:[e.jsx(me,{children:e.jsxs(q,{children:[e.jsx(g,{className:"w-12",children:"#"}),e.jsx(g,{children:"Host"}),e.jsx(g,{children:"Port"}),e.jsx(g,{children:"Username"}),e.jsx(g,{children:"Password"})]})}),e.jsx(he,{children:o.map((s,r)=>e.jsxs(q,{children:[e.jsx(f,{className:"text-muted-foreground",children:r+1}),e.jsx(f,{className:"font-mono text-xs",children:s.host}),e.jsx(f,{className:"font-mono text-xs",children:s.port}),e.jsx(f,{className:"font-mono text-xs",children:s.username}),e.jsx(f,{className:"font-mono text-xs",children:s.password})]},r))})]})})})})}),e.jsx(_,{value:"snippets",className:"mt-4 space-y-4",children:w&&e.jsxs(e.Fragment,{children:[e.jsx(B,{title:"cURL",code:ve(w)}),e.jsx(B,{title:"Python (requests)",code:Ne(w)}),e.jsx(B,{title:"Node.js (fetch)",code:we(w)})]})})]})]})]})}function B({title:t,code:l}){const b=()=>{navigator.clipboard.writeText(l),$({title:"Copied",description:`${t} snippet copied.`})};return e.jsxs(T,{children:[e.jsxs(D,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(H,{className:"text-sm",children:t}),e.jsxs(i,{variant:"ghost",size:"sm",onClick:b,children:[e.jsx(Q,{className:"mr-1 h-3.5 w-3.5"})," Copy"]})]}),e.jsx(k,{children:e.jsx("pre",{className:"overflow-x-auto rounded-md bg-muted p-3 text-xs leading-relaxed",children:l})})]})}export{Be as default};
