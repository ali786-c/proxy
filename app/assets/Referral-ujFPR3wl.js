import{j as s,x as C}from"./ui-BkJV2AdO.js";import{S as R}from"./SEOHead-CIRbADKl.js";import{C as l,c as n,a as _,b as k}from"./card-l-SRMqus.js";import{b as H,S as x,I as S,B as U,t as E}from"./index-D3tbSPqP.js";import{i as M}from"./use-backend-DTU-Ni94.js";import{T as L,a as B,b as p,c as u}from"./tabs-Dc8dU4I6.js";import{T as f,a as N,b as i,c as t,d as g,e as r}from"./table-8_4vQSbC.js";import{U as y,I,as as P,s as $,am as G,aI as b,aJ as J}from"./vendor-BJanyxg7.js";import{f as w}from"./format-sbWH3_uq.js";import"./useMutation-DiuQ4335.js";function X(){const{data:a,isLoading:T}=M(),{format:c}=H(),o=(a==null?void 0:a.referral_code)||"Loading...",d=(a==null?void 0:a.stats)||{total_referrals:0,total_earned:0,pending_amount:0},m=(a==null?void 0:a.earnings)||[],h=(a==null?void 0:a.referred_users)||[],v=()=>{const e=`${window.location.origin}/signup?ref=${o}`;navigator.clipboard.writeText(e),E({title:"Copied!",description:"Referral link copied to clipboard"})};return T?s.jsxs("div",{className:"space-y-6",children:[s.jsx(x,{className:"h-10 w-48"}),s.jsx("div",{className:"grid gap-4 sm:grid-cols-3",children:[1,2,3].map(e=>s.jsx(x,{className:"h-32 w-full"},e))}),s.jsx(x,{className:"h-40 w-full"})]}):s.jsxs(s.Fragment,{children:[s.jsx(R,{title:"Referral Program",noindex:!0}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Referral Program"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Earn commissions by inviting new users. Get 10% of their top-ups and purchases!"})]}),s.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[s.jsx(l,{children:s.jsxs(n,{className:"pt-6 text-center",children:[s.jsx(y,{className:"h-8 w-8 mx-auto text-primary"}),s.jsx("p",{className:"mt-2 text-2xl font-bold",children:d.total_referrals}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Referred Users"})]})}),s.jsx(l,{children:s.jsxs(n,{className:"pt-6 text-center",children:[s.jsx(I,{className:"h-8 w-8 mx-auto text-success"}),s.jsx("p",{className:"mt-2 text-2xl font-bold",children:c(d.total_earned)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Earned"})]})}),s.jsx(l,{children:s.jsxs(n,{className:"pt-6 text-center",children:[s.jsx(P,{className:"h-8 w-8 mx-auto text-warning"}),s.jsx("p",{className:"mt-2 text-2xl font-bold",children:c(d.pending_amount)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending Commission"})]})})]}),s.jsxs(l,{children:[s.jsx(_,{children:s.jsxs(k,{className:"flex items-center gap-2",children:[s.jsx($,{className:"h-5 w-5"})," Your Referral Link"]})}),s.jsxs(n,{className:"space-y-3",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(S,{readOnly:!0,value:`${window.location.origin}/signup?ref=${o}`,className:"font-mono text-sm bg-muted/50"}),s.jsxs(C,{onClick:v,className:"gap-1.5 shrink-0",children:[s.jsx(G,{className:"h-4 w-4"})," Copy"]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Share this link and earn 10% commission on every purchase made by referred users."})]})]}),s.jsxs(L,{defaultValue:"earnings",className:"w-full",children:[s.jsxs(B,{className:"grid w-full grid-cols-2 max-w-[400px]",children:[s.jsxs(p,{value:"earnings",className:"flex items-center gap-2",children:[s.jsx(b,{className:"h-4 w-4"})," Earning History"]}),s.jsxs(p,{value:"referred",className:"flex items-center gap-2",children:[s.jsx(J,{className:"h-4 w-4"})," Referred Users"]})]}),s.jsx(u,{value:"earnings",children:s.jsx(l,{children:s.jsx(n,{className:"p-0",children:m.length>0?s.jsxs(f,{children:[s.jsx(N,{children:s.jsxs(i,{children:[s.jsx(t,{children:"Date"}),s.jsx(t,{children:"User"}),s.jsx(t,{children:"Description"}),s.jsx(t,{className:"text-right",children:"Amount"}),s.jsx(t,{className:"text-center",children:"Status"})]})}),s.jsx(g,{children:m.map(e=>{var j;return s.jsxs(i,{children:[s.jsx(r,{className:"text-xs",children:w(new Date(e.date),"MMM dd, yyyy HH:mm")}),s.jsx(r,{className:"font-medium text-xs",children:(j=e.referred_user)==null?void 0:j.name}),s.jsx(r,{className:"text-xs",children:e.description}),s.jsx(r,{className:"text-right font-bold text-success",children:c(e.amount)}),s.jsx(r,{className:"text-center",children:s.jsx(U,{variant:"outline",className:"capitalize text-[10px] h-5",children:e.status})})]},e.id)})})]}):s.jsxs("div",{className:"py-12 text-center text-muted-foreground",children:[s.jsx(b,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),s.jsx("p",{children:"No earnings yet. Share your link to start earning!"})]})})})}),s.jsx(u,{value:"referred",children:s.jsx(l,{children:s.jsx(n,{className:"p-0",children:h.length>0?s.jsxs(f,{children:[s.jsx(N,{children:s.jsxs(i,{children:[s.jsx(t,{children:"Name"}),s.jsx(t,{children:"Email"}),s.jsx(t,{className:"text-right",children:"Joined Date"})]})}),s.jsx(g,{children:h.map(e=>s.jsxs(i,{children:[s.jsx(r,{className:"font-medium text-xs font-mono",children:e.name}),s.jsx(r,{className:"text-xs",children:e.email}),s.jsx(r,{className:"text-right text-xs",children:w(new Date(e.joined_at),"MMM dd, yyyy")})]},e.id))})]}):s.jsxs("div",{className:"py-12 text-center text-muted-foreground",children:[s.jsx(y,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),s.jsx("p",{children:"No referred users yet."})]})})})})]})]})]})}export{X as default};
